/*
 COPYRIGHT 2009 ESRI

 TRADE SECRETS: ESRI PROPRIETARY AND CONFIDENTIAL
 Unpublished material - all rights reserved under the
 Copyright Laws of the United States and applicable international
 laws, treaties, and conventions.

 For additional information, contact:
 Environmental Systems Research Institute, Inc.
 Attn: Contracts and Legal Services Department
 380 New York Street
 Redlands, California, 92373
 USA

 email: contracts@esri.com
 */
//>>built
require({cache:{"esri/layers/FeatureType":function(){define("esri/layers/FeatureType",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/symbols/jsonUtils","esri/layers/RangeDomain","esri/layers/CodedValueDomain","esri/layers/InheritedDomain","esri/layers/FeatureTemplate"],function(_1,_2,_3,_4,_5,_6,_7,_8,_9,_a,_b){var _c=_1(null,{declaredClass:"esri.layers.FeatureType",constructor:function(_d){if(_d&&_2.isObject(_d)){this.id=_d.id;this.name=_d.name;var _e=_d.symbol;if(_e){this.symbol=_7.fromJson(_e);}var _f=_d.domains,_10,i;var _11=this.domains={};for(_10 in _f){if(_f.hasOwnProperty(_10)){var _12=_f[_10];switch(_12.type){case "range":_11[_10]=new _8(_12);break;case "codedValue":_11[_10]=new _9(_12);break;case "inherited":_11[_10]=new _a(_12);break;}}}var _13=_d.templates;if(_13){var _14=this.templates=[];for(i=0;i<_13.length;i++){_14.push(new _b(_13[i]));}}}},toJson:function(){var _15={id:this.id,name:this.name,symbol:this.symbol&&this.symbol.toJson()};var _16,_17=this.domains,_18=this.templates,_19=_6.fixJson;if(_17){var _1a=_15.domains={};for(_16 in _17){if(_17.hasOwnProperty(_16)){_1a[_16]=_17[_16]&&_17[_16].toJson();}}_19(_1a);}if(_18){_15.templates=_3.map(_18,function(_1b){return _1b.toJson();});}return _19(_15);}});if(_4("extend-esri")){_2.setObject("layers.FeatureType",_c,_5);}return _c;});},"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n","dijit/form/ComboBoxMixin":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/ComboBoxMixin",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/kernel","dojo/_base/lang","dojo/store/util/QueryResults","./_AutoCompleterMixin","./_ComboBoxMenu","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(_1c,_1d,_1e,_1f,_20,_21,_22,_23,_24){return _1c("dijit.form.ComboBoxMixin",[_23,_21],{dropDownClass:_22,hasDownArrow:true,templateString:_24,baseClass:"dijitTextBox dijitComboBox",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},_setHasDownArrowAttr:function(val){this._set("hasDownArrow",val);this._buttonNode.style.display=val?"":"none";},_showResultList:function(){this.displayMessage("");this.inherited(arguments);},_setStoreAttr:function(_25){if(!_25.get){_1f.mixin(_25,{_oldAPI:true,get:function(id){var _26=new _1d();this.fetchItemByIdentity({identity:id,onItem:function(_27){_26.resolve(_27);},onError:function(_28){_26.reject(_28);}});return _26.promise;},query:function(_29,_2a){var _2b=new _1d(function(){_2c.abort&&_2c.abort();});_2b.total=new _1d();var _2c=this.fetch(_1f.mixin({query:_29,onBegin:function(_2d){_2b.total.resolve(_2d);},onComplete:function(_2e){_2b.resolve(_2e);},onError:function(_2f){_2b.reject(_2f);}},_2a));return _20(_2b);}});}this._set("store",_25);},postMixInProperties:function(){var _30=this.params.store||this.store;if(_30){this._setStoreAttr(_30);}this.inherited(arguments);if(!this.params.store&&!this.store._oldAPI){var _31=this.declaredClass;_1f.mixin(this.store,{getValue:function(_32,_33){_1e.deprecated(_31+".store.getValue(item, attr) is deprecated for builtin store.  Use item.attr directly","","2.0");return _32[_33];},getLabel:function(_34){_1e.deprecated(_31+".store.getLabel(item) is deprecated for builtin store.  Use item.label directly","","2.0");return _34.name;},fetch:function(_35){_1e.deprecated(_31+".store.fetch() is deprecated for builtin store.","Use store.query()","2.0");var _36=["dojo/data/ObjectStore"];require(_36,_1f.hitch(this,function(_37){new _37({objectStore:this}).fetch(_35);}));}});}}});});},"dijit/form/RangeBoundTextBox":function(){define("dijit/form/RangeBoundTextBox",["dojo/_base/declare","dojo/i18n","./MappedTextBox"],function(_38,_39,_3a){var _3b=_38("dijit.form.RangeBoundTextBox",_3a,{rangeMessage:"",rangeCheck:function(_3c,_3d){return ("min" in _3d?(this.compare(_3c,_3d.min)>=0):true)&&("max" in _3d?(this.compare(_3c,_3d.max)<=0):true);},isInRange:function(){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");if(val==null){return false;}var _3e=false;if("min" in this.constraints){var min=this.constraints.min;_3e=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min)<0;}if(!_3e&&("max" in this.constraints)){var max=this.constraints.max;_3e=this.compare(val,((typeof max!="number")||max>0)?max:0)>0;}return _3e;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_3f){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_3f));},getErrorMessage:function(_40){var v=this.get("value");if(v!=null&&v!==""&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_40)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=_39.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},applyTextDir:function(){}});return _3b;});},"dijit/hccss":function(){define("dijit/hccss",["dojo/dom-class","dojo/hccss","dojo/ready","dojo/_base/window"],function(_41,has,_42,win){_42(90,function(){if(has("highcontrast")){_41.add(win.body(),"dijit_a11y");}});return has;});},"dijit/_Contained":function(){define("dijit/_Contained",["dojo/_base/declare","./registry"],function(_43,_44){return _43("dijit._Contained",null,{_getSibling:function(_45){var _46=this.domNode;do{_46=_46[_45+"Sibling"];}while(_46&&_46.nodeType!=1);return _46&&_44.byNode(_46);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});});},"dijit/form/_TextBoxMixin":function(){define("dijit/form/_TextBoxMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","../main"],function(_47,_48,dom,_49,_4a,_4b,on,_4c){var _4d=_48("dijit.form._TextBoxMixin",null,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_4e,_4f,_50){var _51;if(_4e!==undefined){_51=this.filter(_4e);if(typeof _50!="string"){if(_51!==null&&((typeof _51!="number")||!isNaN(_51))){_50=this.filter(this.format(_51,this.constraints));}else{_50="";}}}if(_50!=null&&((typeof _50)!="number"||!isNaN(_50))&&this.textbox.value!=_50){this.textbox.value=_50;this._set("displayedValue",this.get("displayedValue"));}if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_50);}this.inherited(arguments,[_51,_4f]);},displayedValue:"",_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},_setDisplayedValueAttr:function(_52){if(_52==null){_52="";}else{if(typeof _52!="string"){_52=String(_52);}}this.textbox.value=_52;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));if(this.textDir=="auto"){this.applyTextDir(this.focusNode,_52);}},format:function(_53){return _53==null?"":(_53.toString?_53.toString():_53);},parse:function(_54){return _54;},_refreshState:function(){},onInput:function(){},__skipInputEvent:false,_onInput:function(evt){if(this.textDir=="auto"){this.applyTextDir(this.focusNode,this.focusNode.value);}this._processInput(evt);},_processInput:function(evt){this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);var _55=function(e){var _56;if(e.type=="keydown"){_56=e.keyCode;switch(_56){case _4a.SHIFT:case _4a.ALT:case _4a.CTRL:case _4a.META:case _4a.CAPS_LOCK:case _4a.NUM_LOCK:case _4a.SCROLL_LOCK:return;}if(!e.ctrlKey&&!e.metaKey&&!e.altKey){switch(_56){case _4a.NUMPAD_0:case _4a.NUMPAD_1:case _4a.NUMPAD_2:case _4a.NUMPAD_3:case _4a.NUMPAD_4:case _4a.NUMPAD_5:case _4a.NUMPAD_6:case _4a.NUMPAD_7:case _4a.NUMPAD_8:case _4a.NUMPAD_9:case _4a.NUMPAD_MULTIPLY:case _4a.NUMPAD_PLUS:case _4a.NUMPAD_ENTER:case _4a.NUMPAD_MINUS:case _4a.NUMPAD_PERIOD:case _4a.NUMPAD_DIVIDE:return;}if((_56>=65&&_56<=90)||(_56>=48&&_56<=57)||_56==_4a.SPACE){return;}var _57=false;for(var i in _4a){if(_4a[i]===e.keyCode){_57=true;break;}}if(!_57){return;}}}_56=e.charCode>=32?String.fromCharCode(e.charCode):e.charCode;if(!_56){_56=(e.keyCode>=65&&e.keyCode<=90)||(e.keyCode>=48&&e.keyCode<=57)||e.keyCode==_4a.SPACE?String.fromCharCode(e.keyCode):e.keyCode;}if(!_56){_56=229;}if(e.type=="keypress"){if(typeof _56!="string"){return;}if((_56>="a"&&_56<="z")||(_56>="A"&&_56<="Z")||(_56>="0"&&_56<="9")||(_56===" ")){if(e.ctrlKey||e.metaKey||e.altKey){return;}}}if(e.type=="input"){if(this.__skipInputEvent){this.__skipInputEvent=false;return;}}else{this.__skipInputEvent=true;}var _58={faux:true},_59;for(_59 in e){if(_59!="layerX"&&_59!="layerY"){var v=e[_59];if(typeof v!="function"&&typeof v!="undefined"){_58[_59]=v;}}}_4b.mixin(_58,{charOrCode:_56,_wasConsumed:false,preventDefault:function(){_58._wasConsumed=true;e.preventDefault();},stopPropagation:function(){e.stopPropagation();}});if(this.onInput(_58)===false){_58.preventDefault();_58.stopPropagation();}if(_58._wasConsumed){return;}this.defer(function(){this._onInput(_58);});};this.own(on(this.textbox,"keydown, keypress, paste, cut, input, compositionend",_4b.hitch(this,_55)));},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=_4b.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(_5a){return _5a.substring(0,1).toUpperCase()+_5a.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);},_isTextSelected:function(){return this.textbox.selectionStart!=this.textbox.selectionEnd;},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;if(!this._isTextSelected()){_4d.selectInputText(this.textbox);}});this.defer(function(){if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);this._selectOnClickHandle=null;}},500);}this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);},_setTextDirAttr:function(_5b){if(!this._created||this.textDir!=_5b){this._set("textDir",_5b);this.applyTextDir(this.focusNode,this.focusNode.value);}}});_4d._setSelectionRange=_4c._setSelectionRange=function(_5c,_5d,_5e){if(_5c.setSelectionRange){_5c.setSelectionRange(_5d,_5e);}};_4d.selectInputText=_4c.selectInputText=function(_5f,_60,_61){_5f=dom.byId(_5f);if(isNaN(_60)){_60=0;}if(isNaN(_61)){_61=_5f.value?_5f.value.length:0;}try{_5f.focus();_4d._setSelectionRange(_5f,_60,_61);}catch(e){}};return _4d;});},"esri/dijit/_EventedWidget":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/aspect","dojo/on","esri/Evented","dijit/_WidgetBase"],function(_62,_63,_64,on,_65,_66){var EWM=_62([_65,_66],{_onMap:function(_67){var _68=this.constructor._onMap,_69,_6a;if(!_68){_68=this.registerConnectEvents();}_67=_67.toLowerCase();if(_68[_67]){_69=this[_68[_67].name];}else{_6a=this._onCamelCase(_67);if(this[_6a]){_69=_6a;}}return _69;},on:function(_6b,_6c){_65.prototype.on.apply(this,arguments);return this.inherited(arguments);},emit:function(_6d,_6e,_6f){var _70,_71,_72,_73=_6d.toLowerCase(),_74=this.constructor._onMap||this.registerConnectEvents();_71=this[this._onMap(_73)];_6e=_6e||{};if(!_6e.target){_6e.target=this;}if(_71&&_74&&_74[_73]){this._onObj2Arr(function(){_70=Array.prototype.slice.call(arguments);},_74[_73].argKeys)(_6e);_72=_63.mixin({},arguments);_72[2]=_70;_72[0]=_74[_73].name.replace(/^on/,"");}return this.inherited(_72||arguments);}});return EWM;});},"dojo/store/util/SimpleQueryEngine":function(){define(["../../_base/array"],function(_75){return function(_76,_77){switch(typeof _76){default:throw new Error("Can not query with a "+typeof _76);case "object":case "undefined":var _78=_76;_76=function(_79){for(var key in _78){var _7a=_78[key];if(_7a&&_7a.test){if(!_7a.test(_79[key],_79)){return false;}}else{if(_7a!=_79[key]){return false;}}}return true;};break;case "string":if(!this[_76]){throw new Error("No filter function "+_76+" was found in store");}_76=this[_76];case "function":}function _7b(_7c){var _7d=_75.filter(_7c,_76);var _7e=_77&&_77.sort;if(_7e){_7d.sort(typeof _7e=="function"?_7e:function(a,b){for(var _7f,i=0;_7f=_7e[i];i++){var _80=a[_7f.attribute];var _81=b[_7f.attribute];if(_80!=_81){return !!_7f.descending==(_80==null||_80>_81)?-1:1;}}return 0;});}if(_77&&(_77.start||_77.count)){var _82=_7d.length;_7d=_7d.slice(_77.start||0,(_77.start||0)+(_77.count||Infinity));_7d.total=_82;}return _7d;};_7b.matches=_76;return _7b;};});},"dijit/form/ToggleButton":function(){define("dijit/form/ToggleButton",["dojo/_base/declare","dojo/_base/kernel","./Button","./_ToggleButtonMixin"],function(_83,_84,_85,_86){return _83("dijit.form.ToggleButton",[_85,_86],{baseClass:"dijitToggleButton",setChecked:function(_87){_84.deprecated("setChecked("+_87+") is deprecated. Use set('checked',"+_87+") instead.","","2.0");this.set("checked",_87);}});});},"dijit/Toolbar":function(){define("dijit/Toolbar",["require","dojo/_base/declare","dojo/has","dojo/keys","dojo/ready","./_Widget","./_KeyNavContainer","./_TemplatedMixin"],function(_88,_89,has,_8a,_8b,_8c,_8d,_8e){if(has("dijit-legacy-requires")){_8b(0,function(){var _8f=["dijit/ToolbarSeparator"];_88(_8f);});}return _89("dijit.Toolbar",[_8c,_8e,_8d],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" data-dojo-attach-point=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[_8a.LEFT_ARROW]:[_8a.RIGHT_ARROW],this.isLeftToRight()?[_8a.RIGHT_ARROW]:[_8a.LEFT_ARROW]);}});});},"dijit/Viewport":function(){define("dijit/Viewport",["dojo/Evented","dojo/on","dojo/ready","dojo/sniff","dojo/_base/window","dojo/window"],function(_90,on,_91,has,win,_92){var _93=new _90();_91(200,function(){var _94=_92.getBox();_93._rlh=on(win.global,"resize",function(){var _95=_92.getBox();if(_94.h==_95.h&&_94.w==_95.w){return;}_94=_95;_93.emit("resize");});if(has("ie")==8){var _96=screen.deviceXDPI;setInterval(function(){if(screen.deviceXDPI!=_96){_96=screen.deviceXDPI;_93.emit("resize");}},500);}});return _93;});},"dojo/parser":function(){define(["require","./_base/kernel","./_base/lang","./_base/array","./_base/config","./_base/html","./_base/window","./_base/url","./_base/json","./aspect","./date/stamp","./Deferred","./has","./query","./on","./ready"],function(_97,_98,_99,_9a,_9b,_9c,_9d,_9e,_9f,_a0,_a1,_a2,has,_a3,don,_a4){new Date("X");var _a5=0;_a0.after(_99,"extend",function(){_a5++;},true);function _a6(_a7){var map=_a7._nameCaseMap,_a8=_a7.prototype;if(!map||map._extendCnt<_a5){map=_a7._nameCaseMap={};for(var _a9 in _a8){if(_a9.charAt(0)==="_"){continue;}map[_a9.toLowerCase()]=_a9;}map._extendCnt=_a5;}return map;};var _aa={};function _ab(_ac){var ts=_ac.join();if(!_aa[ts]){var _ad=[];for(var i=0,l=_ac.length;i<l;i++){var t=_ac[i];_ad[_ad.length]=(_aa[t]=_aa[t]||(_99.getObject(t)||(~t.indexOf("/")&&_97(t))));}var _ae=_ad.shift();_aa[ts]=_ad.length?(_ae.createSubclass?_ae.createSubclass(_ad):_ae.extend.apply(_ae,_ad)):_ae;}return _aa[ts];};var _af={_clearCache:function(){_a5++;_aa={};},_functionFromScript:function(_b0,_b1){var _b2="",_b3="",_b4=(_b0.getAttribute(_b1+"args")||_b0.getAttribute("args")),_b5=_b0.getAttribute("with");var _b6=(_b4||"").split(/\s*,\s*/);if(_b5&&_b5.length){_9a.forEach(_b5.split(/\s*,\s*/),function(_b7){_b2+="with("+_b7+"){";_b3+="}";});}return new Function(_b6,_b2+_b0.innerHTML+_b3);},instantiate:function(_b8,_b9,_ba){_b9=_b9||{};_ba=_ba||{};var _bb=(_ba.scope||_98._scopeName)+"Type",_bc="data-"+(_ba.scope||_98._scopeName)+"-",_bd=_bc+"type",_be=_bc+"mixins";var _bf=[];_9a.forEach(_b8,function(_c0){var _c1=_bb in _b9?_b9[_bb]:_c0.getAttribute(_bd)||_c0.getAttribute(_bb);if(_c1){var _c2=_c0.getAttribute(_be),_c3=_c2?[_c1].concat(_c2.split(/\s*,\s*/)):[_c1];_bf.push({node:_c0,types:_c3});}});return this._instantiate(_bf,_b9,_ba);},_instantiate:function(_c4,_c5,_c6){var _c7=_9a.map(_c4,function(obj){var _c8=obj.ctor||_ab(obj.types);if(!_c8){throw new Error("Unable to resolve constructor for: '"+obj.types.join()+"'");}return this.construct(_c8,obj.node,_c5,_c6,obj.scripts,obj.inherited);},this);if(!_c5._started&&!_c6.noStart){_9a.forEach(_c7,function(_c9){if(typeof _c9.startup==="function"&&!_c9._started){_c9.startup();}});}return _c7;},construct:function(_ca,_cb,_cc,_cd,_ce,_cf){var _d0=_ca&&_ca.prototype;_cd=_cd||{};var _d1={};if(_cd.defaults){_99.mixin(_d1,_cd.defaults);}if(_cf){_99.mixin(_d1,_cf);}var _d2;if(has("dom-attributes-explicit")){_d2=_cb.attributes;}else{if(has("dom-attributes-specified-flag")){_d2=_9a.filter(_cb.attributes,function(a){return a.specified;});}else{var _d3=/^input$|^img$/i.test(_cb.nodeName)?_cb:_cb.cloneNode(false),_d4=_d3.outerHTML.replace(/=[^\s"']+|="[^"]*"|='[^']*'/g,"").replace(/^\s*<[a-zA-Z0-9]*\s*/,"").replace(/\s*>.*$/,"");_d2=_9a.map(_d4.split(/\s+/),function(_d5){var _d6=_d5.toLowerCase();return {name:_d5,value:(_cb.nodeName=="LI"&&_d5=="value")||_d6=="enctype"?_cb.getAttribute(_d6):_cb.getAttributeNode(_d6).value};});}}var _d7=_cd.scope||_98._scopeName,_d8="data-"+_d7+"-",_d9={};if(_d7!=="dojo"){_d9[_d8+"props"]="data-dojo-props";_d9[_d8+"type"]="data-dojo-type";_d9[_d8+"mixins"]="data-dojo-mixins";_d9[_d7+"type"]="dojoType";_d9[_d8+"id"]="data-dojo-id";}var i=0,_da,_db=[],_dc,_dd;while(_da=_d2[i++]){var _de=_da.name,_df=_de.toLowerCase(),_e0=_da.value;switch(_d9[_df]||_df){case "data-dojo-type":case "dojotype":case "data-dojo-mixins":break;case "data-dojo-props":_dd=_e0;break;case "data-dojo-id":case "jsid":_dc=_e0;break;case "data-dojo-attach-point":case "dojoattachpoint":_d1.dojoAttachPoint=_e0;break;case "data-dojo-attach-event":case "dojoattachevent":_d1.dojoAttachEvent=_e0;break;case "class":_d1["class"]=_cb.className;break;case "style":_d1["style"]=_cb.style&&_cb.style.cssText;break;default:if(!(_de in _d0)){var map=_a6(_ca);_de=map[_df]||_de;}if(_de in _d0){switch(typeof _d0[_de]){case "string":_d1[_de]=_e0;break;case "number":_d1[_de]=_e0.length?Number(_e0):NaN;break;case "boolean":_d1[_de]=_e0.toLowerCase()!="false";break;case "function":if(_e0===""||_e0.search(/[^\w\.]+/i)!=-1){_d1[_de]=new Function(_e0);}else{_d1[_de]=_99.getObject(_e0,false)||new Function(_e0);}_db.push(_de);break;default:var _e1=_d0[_de];_d1[_de]=(_e1&&"length" in _e1)?(_e0?_e0.split(/\s*,\s*/):[]):(_e1 instanceof Date)?(_e0==""?new Date(""):_e0=="now"?new Date():_a1.fromISOString(_e0)):(_e1 instanceof _9e)?(_98.baseUrl+_e0):_9f.fromJson(_e0);}}else{_d1[_de]=_e0;}}}for(var j=0;j<_db.length;j++){var _e2=_db[j].toLowerCase();_cb.removeAttribute(_e2);_cb[_e2]=null;}if(_dd){try{_dd=_9f.fromJson.call(_cd.propsThis,"{"+_dd+"}");_99.mixin(_d1,_dd);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_dd+"'");}}_99.mixin(_d1,_cc);if(!_ce){_ce=(_ca&&(_ca._noScript||_d0._noScript)?[]:_a3("> script[type^='dojo/']",_cb));}var _e3=[],_e4=[],_e5=[],ons=[];if(_ce){for(i=0;i<_ce.length;i++){var _e6=_ce[i];_cb.removeChild(_e6);var _e7=(_e6.getAttribute(_d8+"event")||_e6.getAttribute("event")),_e8=_e6.getAttribute(_d8+"prop"),_e9=_e6.getAttribute(_d8+"method"),_ea=_e6.getAttribute(_d8+"advice"),_eb=_e6.getAttribute("type"),nf=this._functionFromScript(_e6,_d8);if(_e7){if(_eb=="dojo/connect"){_e3.push({method:_e7,func:nf});}else{if(_eb=="dojo/on"){ons.push({event:_e7,func:nf});}else{_d1[_e7]=nf;}}}else{if(_eb=="dojo/aspect"){_e3.push({method:_e9,advice:_ea,func:nf});}else{if(_eb=="dojo/watch"){_e5.push({prop:_e8,func:nf});}else{_e4.push(nf);}}}}}var _ec=_ca.markupFactory||_d0.markupFactory;var _ed=_ec?_ec(_d1,_cb,_ca):new _ca(_d1,_cb);if(_dc){_99.setObject(_dc,_ed);}for(i=0;i<_e3.length;i++){_a0[_e3[i].advice||"after"](_ed,_e3[i].method,_99.hitch(_ed,_e3[i].func),true);}for(i=0;i<_e4.length;i++){_e4[i].call(_ed);}for(i=0;i<_e5.length;i++){_ed.watch(_e5[i].prop,_e5[i].func);}for(i=0;i<ons.length;i++){don(_ed,ons[i].event,ons[i].func);}return _ed;},scan:function(_ee,_ef){var _f0=[],_f1=[],_f2={};var _f3=(_ef.scope||_98._scopeName)+"Type",_f4="data-"+(_ef.scope||_98._scopeName)+"-",_f5=_f4+"type",_f6=_f4+"textdir",_f7=_f4+"mixins";var _f8=_ee.firstChild;var _f9=_ef.inherited;if(!_f9){function _fa(_fb,_fc){return (_fb.getAttribute&&_fb.getAttribute(_fc))||(_fb.parentNode&&_fa(_fb.parentNode,_fc));};_f9={dir:_fa(_ee,"dir"),lang:_fa(_ee,"lang"),textDir:_fa(_ee,_f6)};for(var key in _f9){if(!_f9[key]){delete _f9[key];}}}var _fd={inherited:_f9};var _fe;var _ff;function _100(_101){if(!_101.inherited){_101.inherited={};var node=_101.node,_102=_100(_101.parent);var _103={dir:node.getAttribute("dir")||_102.dir,lang:node.getAttribute("lang")||_102.lang,textDir:node.getAttribute(_f6)||_102.textDir};for(var key in _103){if(_103[key]){_101.inherited[key]=_103[key];}}}return _101.inherited;};while(true){if(!_f8){if(!_fd||!_fd.node){break;}_f8=_fd.node.nextSibling;_ff=false;_fd=_fd.parent;_fe=_fd.scripts;continue;}if(_f8.nodeType!=1){_f8=_f8.nextSibling;continue;}if(_fe&&_f8.nodeName.toLowerCase()=="script"){type=_f8.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_fe.push(_f8);}_f8=_f8.nextSibling;continue;}if(_ff){_f8=_f8.nextSibling;continue;}var type=_f8.getAttribute(_f5)||_f8.getAttribute(_f3);var _104=_f8.firstChild;if(!type&&(!_104||(_104.nodeType==3&&!_104.nextSibling))){_f8=_f8.nextSibling;continue;}var _105;var ctor=null;if(type){var _106=_f8.getAttribute(_f7),_107=_106?[type].concat(_106.split(/\s*,\s*/)):[type];try{ctor=_ab(_107);}catch(e){}if(!ctor){_9a.forEach(_107,function(t){if(~t.indexOf("/")&&!_f2[t]){_f2[t]=true;_f1[_f1.length]=t;}});}var _108=ctor&&!ctor.prototype._noScript?[]:null;_105={types:_107,ctor:ctor,parent:_fd,node:_f8,scripts:_108};_105.inherited=_100(_105);_f0.push(_105);}else{_105={node:_f8,scripts:_fe,parent:_fd};}_f8=_104;_fe=_108;_ff=ctor&&ctor.prototype.stopParser&&!(_ef.template);_fd=_105;}var d=new _a2();if(_f1.length){if(has("dojo-debug-messages")){console.warn("WARNING: Modules being Auto-Required: "+_f1.join(", "));}_97(_f1,function(){d.resolve(_9a.filter(_f0,function(_109){if(!_109.ctor){try{_109.ctor=_ab(_109.types);}catch(e){}}var _10a=_109.parent;while(_10a&&!_10a.types){_10a=_10a.parent;}var _10b=_109.ctor&&_109.ctor.prototype;_109.instantiateChildren=!(_10b&&_10b.stopParser&&!(_ef.template));_109.instantiate=!_10a||(_10a.instantiate&&_10a.instantiateChildren);return _109.instantiate;}));});}else{d.resolve(_f0);}return d.promise;},_require:function(_10c){var hash=_9f.fromJson("{"+_10c.innerHTML+"}"),vars=[],mids=[],d=new _a2();for(var name in hash){vars.push(name);mids.push(hash[name]);}_97(mids,function(){for(var i=0;i<vars.length;i++){_99.setObject(vars[i],arguments[i]);}d.resolve(arguments);});return d.promise;},_scanAmd:function(root){var _10d=new _a2(),_10e=_10d.promise;_10d.resolve(true);var self=this;_a3("script[type='dojo/require']",root).forEach(function(node){_10e=_10e.then(function(){return self._require(node);});node.parentNode.removeChild(node);});return _10e;},parse:function(_10f,_110){var root;if(!_110&&_10f&&_10f.rootNode){_110=_10f;root=_110.rootNode;}else{if(_10f&&_99.isObject(_10f)&&!("nodeType" in _10f)){_110=_10f;}else{root=_10f;}}root=root?_9c.byId(root):_9d.body();_110=_110||{};var _111=_110.template?{template:true}:{},_112=[],self=this;var p=this._scanAmd(root,_110).then(function(){return self.scan(root,_110);}).then(function(_113){return _112=_112.concat(self._instantiate(_113,_111,_110));}).otherwise(function(e){console.error("dojo/parser::parse() error",e);throw e;});_99.mixin(_112,p);return _112;}};if(1){_98.parser=_af;}if(_9b.parseOnLoad){_a4(100,_af,"parse");}return _af;});},"url:esri/dijit/templates/AttributeInspector.html":"<div class=\"esriAttributeInspector\">\r\n    <div class=\"atiLayerName\" dojoAttachPoint=\"layerName\"></div>\r\n    <div class=\"atiAttributes\" dojoAttachPoint=\"attributeTable\"></div>\r\n    <div dojoAttachPoint=\"attachmentEditor\"></div>\r\n    <div class=\"atiEditorTrackingInfo\" dojoAttachPoint=\"editorTrackingInfoDiv\"></div>\r\n    <div class=\"atiButtons\" dojoAttachPoint=\"editButtons\">\r\n        <button  dojoType=\"dijit.form.Button\" class=\"atiButton atiDeleteButton\"  dojoAttachPoint=\"deleteBtn\" dojoAttachEvent=\"onClick: onDeleteBtn\" showLabel=\"true\" type=\"button\">${NLS_deleteFeature}</button>\r\n        <div class=\"atiNavButtons\" dojoAttachPoint=\"navButtons\">\r\n            <div class=\"atiNavMessage\" dojoAttachPoint=\"navMessage\"></div>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiFirstIcon\" dojoAttachPoint=\"firstFeatureButton\" dojoAttachEvent=\"onClick: onFirstFeature\" showLabel=\"false\" type=\"button\">${NLS_first}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiPrevIcon\" dojoAttachPoint=\"prevFeatureButton\" dojoAttachEvent=\"onClick: onPreviousFeature\" showLabel=\"false\" type=\"button\">${NLS_previous}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiNextIcon\" dojoAttachPoint=\"nextFeatureButton\" dojoAttachEvent=\"onClick: onNextFeature\" showLabel=\"false\" type=\"button\">${NLS_next}</button>\r\n            <button  dojoType=\"dijit.form.Button\" iconClass=\"atiButton atiLastIcon\" dojoAttachPoint=\"lastFeatureButton\" dojoAttachEvent=\"onClick: onLastFeature\" showLabel=\"false\" type=\"button\">${NLS_last}</button>\r\n        </div>\r\n    </div>\r\n</div>\r\n","dijit/_Container":function(){define("dijit/_Container",["dojo/_base/array","dojo/_base/declare","dojo/dom-construct"],function(_114,_115,_116){return _115("dijit._Container",null,{buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_117,_118){var _119=this.containerNode;if(_118&&typeof _118=="number"){var _11a=this.getChildren();if(_11a&&_11a.length>=_118){_119=_11a[_118-1].domNode;_118="after";}}_116.place(_117.domNode,_119,_118);if(this._started&&!_117._started){_117.startup();}},removeChild:function(_11b){if(typeof _11b=="number"){_11b=this.getChildren()[_11b];}if(_11b){var node=_11b.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},_getSiblingOfChild:function(_11c,dir){var _11d=this.getChildren(),idx=_114.indexOf(this.getChildren(),_11c);return _11d[idx+dir];},getIndexOfChild:function(_11e){return _114.indexOf(this.getChildren(),_11e);}});});},"dijit/a11yclick":function(){define("dijit/a11yclick",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window"],function(on,_11f,keys,_120,has,_121,win){var _122=null;if(has("dom-addeventlistener")){win.doc.addEventListener("keydown",function(evt){_122=evt.target;},true);}else{(function(){var _123=function(evt){_122=evt.srcElement;};win.doc.attachEvent("onkeydown",_123);_121.addOnWindowUnload(function(){win.doc.detachEvent("onkeydown",_123);});})();}function _124(e){return (e.keyCode===keys.ENTER||e.keyCode===keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey;};return function(node,_125){if(/input|button/i.test(node.nodeName)){return on(node,"click",_125);}else{var _126=[on(node,"keydown",function(e){if(_124(e)){_122=e.target;e.preventDefault();}}),on(node,"keyup",function(e){if(_124(e)&&e.target==_122){_122=null;on.emit(e.target,"click",{cancelable:true,bubbles:true});}}),on(node,"click",function(e){_125.call(this,e);})];if(has("touch")){var _127;_126.push(on(node,"touchend",function(e){var _128=e.target;_127=setTimeout(function(){_127=null;on.emit(_128,"click",{cancelable:true,bubbles:true});},600);}),on(node,"click",function(e){if(_127){clearTimeout(_127);}}));}return {remove:function(){_11f.forEach(_126,function(h){h.remove();});if(_127){clearTimeout(_127);_127=null;}}};}};return ret;});},"dijit/Editor":function(){define("dijit/Editor",["require","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/i18n","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/string","dojo/topic","dojo/_base/window","./_base/focus","./_Container","./Toolbar","./ToolbarSeparator","./layout/_LayoutWidget","./form/ToggleButton","./_editor/_Plugin","./_editor/plugins/EnterKeyHandling","./_editor/html","./_editor/range","./_editor/RichText","./main","dojo/i18n!./_editor/nls/commands"],function(_129,_12a,_12b,_12c,i18n,_12d,_12e,_12f,_130,_131,keys,lang,has,_132,_133,win,_134,_135,_136,_137,_138,_139,_13a,_13b,html,_13c,_13d,_13e){var _13f=_12b("dijit.Editor",_13d,{plugins:null,extraPlugins:null,constructor:function(){if(!lang.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull",_13b];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(has("ie")){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new _12c();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(lang.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new _136({ownerDocument:this.ownerDocument,dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}_12a.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.resolve(true);_12e.add(this.iframe.parentNode,"dijitEditorIFrameContainer");_12e.add(this.iframe,"dijitEditorIFrame");_12d.set(this.iframe,"allowTransparency",true);if(has("webkit")){_130.set(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){_12a.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_140,_141){var args=lang.isString(_140)?{name:_140}:lang.isFunction(_140)?{ctor:_140}:_140;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};if(args.name){if(_13a.registry[args.name]){o.plugin=_13a.registry[args.name](args);}else{_133.publish(_13e._scopeName+".Editor.getPlugin",o);}}if(!o.plugin){try{var pc=args.ctor||lang.getObject(args.name)||_129(args.name);if(pc){o.plugin=new pc(args);}}catch(e){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}}if(!o.plugin){throw new Error(this.id+": cannot find plugin ["+args.name+"]");}_140=o.plugin;}if(arguments.length>1){this._plugins[_141]=_140;}else{this._plugins.push(_140);}_140.setEditor(this);if(lang.isFunction(_140.setToolbar)){_140.setToolbar(this.toolbar);}},resize:function(size){if(size){_138.prototype.resize.apply(this,arguments);}},layout:function(){var _142=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+_12f.getPadBorderExtents(this.iframe.parentNode).h+_12f.getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_142+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _143;var b=this.document.body;var _144=b.clientWidth;var _145=b.clientHeight;var _146=b.clientLeft;var _147=b.offsetWidth;var _148=b.offsetHeight;var _149=b.offsetLeft;if(/^rtl$/i.test(b.dir||"")){if(_144<_147&&e.x>_144&&e.x<_147){_143=true;}}else{if(e.x<_146&&e.x>_149){_143=true;}}if(!_143){if(_145<_148&&e.y>_145&&e.y<_148){_143=true;}}if(!_143){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){this.defer("placeCursorAtEnd");}this.inherited(arguments);}},onBeforeActivate:function(){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){this._editTimer.remove();}this._editTimer=this.defer("endEditing",this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r=this.inherited(arguments);if(this.customUndo){this._endEditing();}return r;}},_pasteImpl:function(){return this._clipboardCommand("paste");},_cutImpl:function(){return this._clipboardCommand("cut");},_copyImpl:function(){return this._clipboardCommand("copy");},_clipboardCommand:function(cmd){var r;try{r=this.document.execCommand(cmd,false,null);if(has("webkit")&&!r){throw {code:1011};}}catch(e){if(e.code==1011||(e.code==9&&has("opera"))){var sub=_132.substitute,_14a={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[has("mac")?"appleKey":"ctrlKey"],[_14a[cmd]])]));}r=false;}return r;},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _14b=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_14c,_14d,sel;if(mark){if(has("ie")<9){if(lang.isArray(mark)){_14b=[];_12a.forEach(mark,function(n){_14b.push(_13c.getNode(n,this.editNode));},this);win.withGlobal(this.window,"moveToBookmark",_134,[{mark:_14b,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=_13c.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_13c.create(this.window);_14c=_13c.getNode(mark.startContainer,this.editNode);_14d=_13c.getNode(mark.endContainer,this.editNode);if(_14c&&_14d){r.setStart(_14c,mark.startOffset);r.setEnd(_14d,mark.endOffset);sel.addRange(r);}}}}}else{sel=_13c.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=_13c.create(this.window);_14c=_13c.getNode(mark.startContainer,this.editNode);_14d=_13c.getNode(mark.endContainer,this.editNode);if(_14c&&_14d){r.setStart(_14c,mark.startOffset);r.setEnd(_14d,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_14e){if(this._editTimer){this._editTimer=this._editTimer.remove();}if(this._inEditing){this._endEditing(_14e);this._inEditing=false;}},_getBookmark:function(){var b=win.withGlobal(this.window,_134.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(has("ie")<9){var sel=_13c.getSelection(this.window);if(!lang.isArray(mark)){if(sel){var _14f;if(sel.rangeCount){_14f=sel.getRangeAt(0);}if(_14f){b.mark=_14f.cloneRange();}else{b.mark=win.withGlobal(this.window,_134.getBookmark);}}}else{_12a.forEach(b.mark,function(n){tmp.push(_13c.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=_13c.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:_13c.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(){if(this._steps.length===0){this._steps.push({"text":html.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(){var v=html.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!has("ie")&&!this.iframe&&e.keyCode==keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){_131.stop(e);this.undo();return;}else{if(k==89||k==121){_131.stop(e);this.redo();return;}}}this.inherited(arguments);switch(k){case keys.ENTER:case keys.BACKSPACE:case keys.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");}else{this.beginEditing("paste");}this.defer("endEditing",1);break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<keys.F1||e.keyCode>keys.F15)){this.beginEditing();break;}case keys.ALT:this.endEditing();break;case keys.UP_ARROW:case keys.DOWN_ARROW:case keys.LEFT_ARROW:case keys.RIGHT_ARROW:case keys.HOME:case keys.END:case keys.PAGE_UP:case keys.PAGE_DOWN:this.endEditing(true);break;case keys.CTRL:case keys.SHIFT:case keys.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(win.withGlobal(this.window,"isCollapsed",_134)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&#160;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_150){this.setValueDeferred.then(lang.hitch(this,function(){if((!this.disabled&&_150)||(!this._buttonEnabledPlugins&&_150)){_12a.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_150){_12a.forEach(this._plugins,function(p){p.set("disabled",false);});}}}));this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){_130.set(this.document.body,"color",_130.get(this.iframe,"color"));}}catch(e){}}});function _151(args){return new _13a({command:args.name});};function _152(args){return new _13a({buttonClass:_139,command:args.name});};lang.mixin(_13a.registry,{"undo":_151,"redo":_151,"cut":_151,"copy":_151,"paste":_151,"insertOrderedList":_151,"insertUnorderedList":_151,"indent":_151,"outdent":_151,"justifyCenter":_151,"justifyFull":_151,"justifyLeft":_151,"justifyRight":_151,"delete":_151,"selectAll":_151,"removeFormat":_151,"unlink":_151,"insertHorizontalRule":_151,"bold":_152,"italic":_152,"underline":_152,"strikethrough":_152,"subscript":_152,"superscript":_152,"|":function(){return new _13a({setEditor:function(_153){this.editor=_153;this.button=new _137({ownerDocument:_153.ownerDocument});}});}});return _13f;});},"dijit/form/TextBox":function(){require({cache:{"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/TextBox",["dojo/_base/declare","dojo/dom-construct","dojo/dom-style","dojo/_base/kernel","dojo/_base/lang","dojo/sniff","./_FormValueWidget","./_TextBoxMixin","dojo/text!./templates/TextBox.html","../main"],function(_154,_155,_156,_157,lang,has,_158,_159,_15a,_15b){var _15c=_154("dijit.form.TextBox",[_158,_159],{templateString:_15a,_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" data-dojo-attach-point=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:has("ie")?"disabled":"",baseClass:"dijitTextBox",postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==this.constructor.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},postCreate:function(){this.inherited(arguments);if(has("ie")<9){this.defer(function(){try{var s=_156.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _15d=this.domNode.getElementsByTagName("INPUT");if(_15d){for(var i=0;i<_15d.length;i++){_15d[i].style.fontFamily=ff;}}}}}catch(e){}});}},_onInput:function(e){this.inherited(arguments);if(this.intermediateChanges){this.defer(function(){this._handleOnChange(this.get("value"),false);});}},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=_155.create("span",{onmousedown:function(e){e.preventDefault();},className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(this._phspan.ownerDocument.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this.focused&&!this.textbox.value)?"":"none";}},_setValueAttr:function(_15e,_15f,_160){this.inherited(arguments);this._updatePlaceHolder();},getDisplayedValue:function(){_157.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use get('displayedValue') instead.","","2.0");return this.get("displayedValue");},setDisplayedValue:function(_161){_157.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_161);},_onBlur:function(e){if(this.disabled){return;}this.inherited(arguments);this._updatePlaceHolder();if(has("mozilla")){if(this.selectOnClick){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}}},_onFocus:function(by){if(this.disabled||this.readOnly){return;}this.inherited(arguments);this._updatePlaceHolder();}});if(has("ie")){_15c.prototype._isTextSelected=function(){var _162=this.ownerDocument.selection.createRange();var _163=_162.parentElement();return _163==this.textbox&&_162.text.length>0;};_15b._setSelectionRange=_159._setSelectionRange=function(_164,_165,stop){if(_164.createTextRange){var r=_164.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_165);r.moveEnd("character",stop-_165);r.select();}};}return _15c;});},"dijit/layout/_LayoutWidget":function(){define("dijit/layout/_LayoutWidget",["dojo/_base/lang","../_Widget","../_Container","../_Contained","../Viewport","dojo/_base/declare","dojo/dom-class","dojo/dom-geometry","dojo/dom-style"],function(lang,_166,_167,_168,_169,_16a,_16b,_16c,_16d){return _16a("dijit.layout._LayoutWidget",[_166,_167,_168],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);_16b.add(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _16e=this.getParent&&this.getParent();if(!(_16e&&_16e.isLayoutContainer)){this.resize();this.own(_169.on("resize",lang.hitch(this,"resize")));}},resize:function(_16f,_170){var node=this.domNode;if(_16f){_16c.setMarginBox(node,_16f);}var mb=_170||{};lang.mixin(mb,_16f||{});if(!("h" in mb)||!("w" in mb)){mb=lang.mixin(_16c.getMarginBox(node),mb);}var cs=_16d.getComputedStyle(node);var me=_16c.getMarginExtents(node,cs);var be=_16c.getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=_16c.getPadExtents(node,cs);this._contentBox={l:_16d.toPixelValue(node,cs.paddingLeft),t:_16d.toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_171){var cls=this.baseClass+"-child "+(_171.baseClass?this.baseClass+"-"+_171.baseClass:"");_16b.add(_171.domNode,cls);},addChild:function(_172,_173){this.inherited(arguments);if(this._started){this._setupChild(_172);}},removeChild:function(_174){var cls=this.baseClass+"-child"+(_174.baseClass?" "+this.baseClass+"-"+_174.baseClass:"");_16b.remove(_174.domNode,cls);this.inherited(arguments);}});});},"esri/layers/RenderMode":function(){define("esri/layers/RenderMode",["dojo/_base/kernel","dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","dojo/io/script","esri/kernel"],function(_175,_176,lang,_177,has,_178,_179){var _17a=_176(null,{declaredClass:"esri.layers._RenderMode",constructor:function(){this._prefix="jsonp_"+(_175._scopeName||"dojo")+"IoScript";},initialize:function(map){this.map=map;this._init=true;},startup:function(){},propertyChangeHandler:function(type){},destroy:function(){this._init=false;},drawFeature:function(_17b){},suspend:function(){},resume:function(){},refresh:function(){},_incRefCount:function(oid){var _17c=this._featureMap[oid];if(_17c){_17c._count++;}},_decRefCount:function(oid){var _17d=this._featureMap[oid];if(_17d){_17d._count--;}},_getFeature:function(oid){return this._featureMap[oid];},_addFeatureIIf:function(oid,_17e){var fmap=this._featureMap,_17f=fmap[oid],_180=this.featureLayer;if(!_17f){fmap[oid]=_17e;_180._add(_17e);_17e._count=0;}return _17f||_17e;},_removeFeatureIIf:function(oid){var _181=this._featureMap[oid],_182=this.featureLayer;if(_181){if(_181._count){return;}delete this._featureMap[oid];_182._remove(_181);}return _181;},_clearIIf:function(){var i,_183=this.featureLayer,_184=_183.graphics,_185=_183._selectedFeatures,_186=_183.objectIdField;for(i=_184.length-1;i>=0;i--){var _187=_184[i];var oid=_187.attributes[_186];if(oid in _185){_187._count=1;continue;}_187._count=0;this._removeFeatureIIf(oid);}},_isPending:function(id){var dfd=_178[this._prefix+id];return dfd?true:false;},_cancelPendingRequest:function(dfd,id){dfd=dfd||_178[this._prefix+id];if(dfd){try{dfd.cancel();_178._validCheck(dfd);}catch(e){}}},_purgeRequests:function(){_178._validCheck(null);},_toggleVisibility:function(show){var _188=this.featureLayer,_189=_188.graphics,_18a=show?"show":"hide",i,len=_189.length;show=show&&_188._ager;for(i=0;i<len;i++){var _18b=_189[i];_18b[_18a]();if(show){_188._repaint(_18b);}}},_applyTimeFilter:function(_18c){var _18d=this.featureLayer;if(!_18d.timeInfo||_18d.suspended){return;}if(!_18c){_18d._fireUpdateStart();}var _18e=_18d._trackManager;if(_18e){_18e.clearTracks();}var defn=_18d.getTimeDefinition(),_18f=_18d._getOffsettedTE(_18d._mapTimeExtent);if(_18f){_18f=_18d._getTimeOverlap(defn,_18f);if(_18f){var _190=_18d._filterByTime(_18d.graphics,_18f.startTime,_18f.endTime);if(_18e){_18e.addFeatures(_190.match);}_177.forEach(_190.match,function(_191){var _192=_191._shape;if(!_191.visible){_191.show();_192=_191._shape;_192&&_192._moveToFront();}if(_18d._ager&&_192){_18d._repaint(_191);}});_177.forEach(_190.noMatch,function(_193){if(_193.visible){_193.hide();}});}else{this._toggleVisibility(false);}}else{if(_18e){_18e.addFeatures(_18d.graphics);}this._toggleVisibility(true);}if(_18e){_18e.moveLatestToFront();_18e.drawTracks();}if(!_18c){_18d._fireUpdateEnd();}}});if(has("extend-esri")){lang.setObject("layers._RenderMode",_17a,_179);}return _17a;});},"dijit/form/_SearchMixin":function(){define("dijit/form/_SearchMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/sniff","dojo/string","dojo/when","../registry"],function(_194,_195,_196,keys,lang,_197,has,_198,when,_199){return _195("dijit.form._SearchMixin",null,{pageSize:Infinity,store:null,fetchProperties:{},query:{},searchDelay:200,searchAttr:"name",queryExpr:"${0}*",ignoreCase:true,_abortQuery:function(){if(this.searchTimer){this.searchTimer=this.searchTimer.remove();}if(this._queryDeferHandle){this._queryDeferHandle=this._queryDeferHandle.remove();}if(this._fetchHandle){if(this._fetchHandle.abort){this._cancelingQuery=true;this._fetchHandle.abort();this._cancelingQuery=false;}if(this._fetchHandle.cancel){this._cancelingQuery=true;this._fetchHandle.cancel();this._cancelingQuery=false;}this._fetchHandle=null;}},_processInput:function(evt){if(this.disabled||this.readOnly){return;}var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==keys.SHIFT){return;}var _19a=false;this._prev_key_backspace=false;switch(key){case keys.DELETE:case keys.BACKSPACE:this._prev_key_backspace=true;this._maskValidSubsetError=true;_19a=true;break;default:_19a=typeof key=="string"||key==229;}if(_19a){if(!this.store){this.onSearch();}else{this.searchTimer=this.defer("_startSearchFromInput",1);}}},onSearch:function(){},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_startSearch:function(text){this._abortQuery();var _19b=this,_197=lang.clone(this.query),_19c={start:0,count:this.pageSize,queryOptions:{ignoreCase:this.ignoreCase,deep:true}},qs=_198.substitute(this.queryExpr,[text]),q,_19d=function(){var _19e=_19b._fetchHandle=_19b.store.query(_197,_19c);if(_19b.disabled||_19b.readOnly||(q!==_19b._lastQuery)){return;}when(_19e,function(res){_19b._fetchHandle=null;if(!_19b.disabled&&!_19b.readOnly&&(q===_19b._lastQuery)){when(_19e.total,function(_19f){res.total=_19f;var _1a0=_19b.pageSize;if(isNaN(_1a0)||_1a0>res.total){_1a0=res.total;}res.nextPage=function(_1a1){_19c.direction=_1a1=_1a1!==false;_19c.count=_1a0;if(_1a1){_19c.start+=res.length;if(_19c.start>=res.total){_19c.count=0;}}else{_19c.start-=_1a0;if(_19c.start<0){_19c.count=Math.max(_1a0+_19c.start,0);_19c.start=0;}}if(_19c.count<=0){res.length=0;_19b.onSearch(res,_197,_19c);}else{_19d();}};_19b.onSearch(res,_197,_19c);});}},function(err){_19b._fetchHandle=null;if(!_19b._cancelingQuery){console.error(_19b.declaredClass+" "+err.toString());}});};lang.mixin(_19c,this.fetchProperties);if(this.store._oldAPI){q=qs;}else{q=_194.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_197[this.searchAttr]=q;this._queryDeferHandle=this.defer(_19d,this.searchDelay);},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var list=this.list;if(list){this.store=_199.byId(list);}}this.inherited(arguments);}});});},"dijit/form/DateTextBox":function(){define("dijit/form/DateTextBox",["dojo/_base/declare","../Calendar","./_DateTimeTextBox"],function(_1a2,_1a3,_1a4){return _1a2("dijit.form.DateTextBox",_1a4,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:_1a3,_selector:"date",value:new Date("")});});},"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n","dijit/form/_FormWidgetMixin":function(){define("dijit/form/_FormWidgetMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/sniff","dojo/window","../a11y"],function(_1a5,_1a6,_1a7,_1a8,lang,_1a9,has,_1aa,a11y){return _1a6("dijit.form._FormWidgetMixin",null,{name:"",alt:"",value:"",type:"text","aria-label":"focusNode",tabIndex:"0",_setTabIndexAttr:"focusNode",disabled:false,intermediateChanges:false,scrollOnFocus:true,_setIdAttr:"focusNode",_setDisabledAttr:function(_1ab){this._set("disabled",_1ab);_1a7.set(this.focusNode,"disabled",_1ab);if(this.valueNode){_1a7.set(this.valueNode,"disabled",_1ab);}this.focusNode.setAttribute("aria-disabled",_1ab?"true":"false");if(_1ab){this._set("hovering",false);this._set("active",false);var _1ac="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:("_setTabIndexAttr" in this)?this._setTabIndexAttr:"focusNode";_1a5.forEach(lang.isArray(_1ac)?_1ac:[_1ac],function(_1ad){var node=this[_1ad];if(has("webkit")||a11y.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.set("tabIndex",this.tabIndex);}}},_onFocus:function(by){if(by=="mouse"&&this.isFocusable()){var _1ae=this.connect(this.focusNode,"onfocus",function(){this.disconnect(_1af);this.disconnect(_1ae);});var _1af=this.connect(this.ownerDocumentBody,"onmouseup",function(){this.disconnect(_1af);this.disconnect(_1ae);if(this.focused){this.focus();}});}if(this.scrollOnFocus){this.defer(function(){_1aa.scrollIntoView(this.domNode);});}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(_1a8.get(this.domNode,"display")!="none");},focus:function(){if(!this.disabled&&this.focusNode.focus){try{this.focusNode.focus();}catch(e){}}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(){},_onChangeActive:false,_handleOnChange:function(_1b0,_1b1){if(this._lastValueReported==undefined&&(_1b1===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_1b0;}this._pendingOnChange=this._pendingOnChange||(typeof _1b0!=typeof this._lastValueReported)||(this.compare(_1b0,this._lastValueReported)!=0);if((this.intermediateChanges||_1b1||_1b1===undefined)&&this._pendingOnChange){this._lastValueReported=_1b0;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){this._onChangeHandle.remove();}this._onChangeHandle=this.defer(function(){this._onChangeHandle=null;this.onChange(_1b0);});}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){this._onChangeHandle.remove();this.onChange(this._lastValueReported);}this.inherited(arguments);}});});},"dijit/BackgroundIframe":function(){define("dijit/BackgroundIframe",["require","./main","dojo/_base/config","dojo/dom-construct","dojo/dom-style","dojo/_base/lang","dojo/on","dojo/sniff","dojo/_base/window"],function(_1b2,_1b3,_1b4,_1b5,_1b6,lang,on,has,win){var _1b7=new function(){var _1b8=[];this.pop=function(){var _1b9;if(_1b8.length){_1b9=_1b8.pop();_1b9.style.display="";}else{if(has("ie")<9){var burl=_1b4["dojoBlankHtmlUrl"]||_1b2.toUrl("dojo/resources/blank.html")||"javascript:\"\"";var html="<iframe src='"+burl+"' role='presentation'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_1b9=win.doc.createElement(html);}else{_1b9=_1b5.create("iframe");_1b9.src="javascript:\"\"";_1b9.className="dijitBackgroundIframe";_1b9.setAttribute("role","presentation");_1b6.set(_1b9,"opacity",0.1);}_1b9.tabIndex=-1;}return _1b9;};this.push=function(_1ba){_1ba.style.display="none";_1b8.push(_1ba);};}();_1b3.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(has("ie")||has("mozilla")){var _1bb=(this.iframe=_1b7.pop());node.appendChild(_1bb);if(has("ie")<7||has("quirks")){this.resize(node);this._conn=on(node,"resize",lang.hitch(this,function(){this.resize(node);}));}else{_1b6.set(_1bb,{width:"100%",height:"100%"});}}};lang.extend(_1b3.BackgroundIframe,{resize:function(node){if(this.iframe){_1b6.set(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){this._conn.remove();this._conn=null;}if(this.iframe){_1b7.push(this.iframe);delete this.iframe;}}});return _1b3.BackgroundIframe;});},"dijit/form/ValidationTextBox":function(){require({cache:{"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"}});define("dijit/form/ValidationTextBox",["dojo/_base/declare","dojo/_base/kernel","dojo/i18n","./TextBox","../Tooltip","dojo/text!./templates/ValidationTextBox.html","dojo/i18n!./nls/validate"],function(_1bc,_1bd,i18n,_1be,_1bf,_1c0){var _1c1;return _1c1=_1bc("dijit.form.ValidationTextBox",_1be,{templateString:_1c0,required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},pattern:".*",regExp:"",regExpGen:function(){},state:"",tooltipPosition:[],_deprecateRegExp:function(attr,_1c2){if(_1c2!=_1c1.prototype[attr]){_1bd.deprecated("ValidationTextBox id="+this.id+", set('"+attr+"', ...) is deprecated.  Use set('pattern', ...) instead.","","2.0");this.set("pattern",_1c2);}},_setRegExpGenAttr:function(_1c3){this._deprecateRegExp("regExpGen",_1c3);this.regExpGen=this._getPatternAttr;},_setRegExpAttr:function(_1c4){this._deprecateRegExp("regExp",_1c4);},_setValueAttr:function(){this.inherited(arguments);this.validate(this.focused);},validator:function(_1c5,_1c6){return (new RegExp("^(?:"+this._getPatternAttr(_1c6)+")"+(this.required?"":"?")+"$")).test(_1c5)&&(!this.required||!this._isEmpty(_1c5))&&(this._isEmpty(_1c5)||this.parse(_1c5,_1c6)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_1c7){return (this.trim?/^\s*$/:/^$/).test(_1c7);},getErrorMessage:function(){var _1c8=this.invalidMessage=="$_unset_$"?this.messages.invalidMessage:!this.invalidMessage?this.promptMessage:this.invalidMessage;var _1c9=this.missingMessage=="$_unset_$"?this.messages.missingMessage:!this.missingMessage?_1c8:this.missingMessage;return (this.required&&this._isEmpty(this.textbox.value))?_1c9:_1c8;},getPromptMessage:function(){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_1ca){var _1cb="";var _1cc=this.disabled||this.isValid(_1ca);if(_1cc){this._maskValidSubsetError=true;}var _1cd=this._isEmpty(this.textbox.value);var _1ce=!_1cc&&_1ca&&this._isValidSubset();this._set("state",_1cc?"":(((((!this._hasBeenBlurred||_1ca)&&_1cd)||_1ce)&&(this._maskValidSubsetError||(_1ce&&!this._hasBeenBlurred&&_1ca)))?"Incomplete":"Error"));this.focusNode.setAttribute("aria-invalid",_1cc?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_1ca&&_1ce;_1cb=this.getErrorMessage(_1ca);}else{if(this.state=="Incomplete"){_1cb=this.getPromptMessage(_1ca);this._maskValidSubsetError=!this._hasBeenBlurred||_1ca;}else{if(_1cd){_1cb=this.getPromptMessage(_1ca);}}}this.set("message",_1cb);return _1cc;},displayMessage:function(_1cf){if(_1cf&&this.focused){_1bf.show(_1cf,this.domNode,this.tooltipPosition,!this.isLeftToRight());}else{_1bf.hide(this.domNode);}},_refreshState:function(){if(this._created){this.validate(this.focused);}this.inherited(arguments);},constructor:function(_1d0){this.constraints={};this.baseClass+=" dijitValidationTextBox";},startup:function(){this.inherited(arguments);this._refreshState();},_setConstraintsAttr:function(_1d1){if(!_1d1.locale&&this.lang){_1d1.locale=this.lang;}this._set("constraints",_1d1);this._refreshState();},_setPatternAttr:function(_1d2){this._set("pattern",_1d2);},_getPatternAttr:function(_1d3){var p=this.pattern;var type=(typeof p).toLowerCase();if(type=="function"){p=this.pattern(_1d3||this.constraints);}if(p!=this._lastRegExp){var _1d4="";this._lastRegExp=p;if(p!=".*"){p.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_1d4+=re;break;case ")":_1d4+="|$)";break;default:_1d4+="(?:"+re+"|$)";break;}});}try{"".search(_1d4);}catch(e){_1d4=this.pattern;console.warn("RegExp error in "+this.declaredClass+": "+this.pattern);}this._partialre="^(?:"+_1d4+")$";}return p;},postMixInProperties:function(){this.inherited(arguments);this.messages=i18n.getLocalization("dijit.form","validate",this.lang);this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_1d5){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_1d6){this._set("required",_1d6);this.focusNode.setAttribute("aria-required",_1d6);this._refreshState();},_setMessageAttr:function(_1d7){this._set("message",_1d7);this.displayMessage(_1d7);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});});},"dojo/_base/query":function(){define(["../query","./NodeList"],function(_1d8){return _1d8;});},"dijit/_WidgetsInTemplateMixin":function(){define("dijit/_WidgetsInTemplateMixin",["dojo/_base/array","dojo/_base/declare","dojo/parser"],function(_1d9,_1da,_1db){return _1da("dijit._WidgetsInTemplateMixin",null,{_earlyTemplatedStartup:false,widgetsInTemplate:true,_beforeFillContent:function(){if(this.widgetsInTemplate){var node=this.domNode;var cw=(this._startupWidgets=_1db.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang,textDir:this.textDir},propsThis:this,scope:"dojo"}));if(!cw.isFulfilled()){throw new Error(this.declaredClass+": parser returned unfilled promise (probably waiting for module auto-load), "+"unsupported by _WidgetsInTemplateMixin.   Must pre-load all supporting widgets before instantiation.");}this._attachTemplateNodes(cw,function(n,p){return n[p];});}},startup:function(){_1d9.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);}});});},"dijit/form/_FormValueMixin":function(){define("dijit/form/_FormValueMixin",["dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/sniff","./_FormWidgetMixin"],function(_1dc,_1dd,keys,has,_1de){return _1dc("dijit.form._FormValueMixin",_1de,{readOnly:false,_setReadOnlyAttr:function(_1df){_1dd.set(this.focusNode,"readOnly",_1df);this._set("readOnly",_1df);},postCreate:function(){this.inherited(arguments);if(has("ie")){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_1e0,_1e1){this._handleOnChange(_1e0,_1e1);},_handleOnChange:function(_1e2,_1e3){this._set("value",_1e2);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){if(has("ie")<9||(has("ie")&&has("quirks"))){e.preventDefault();var node=e.srcElement,te=node.ownerDocument.createEventObject();te.keyCode=keys.ESCAPE;te.shiftKey=e.shiftKey;node.fireEvent("onkeypress",te);}}}});});},"url:dijit/form/templates/ValidationTextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","esri/tasks/query":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/has","esri/kernel","esri/geometry/jsonUtils","esri/tasks/SpatialRelationship","dojo/has!extend-esri?esri/tasks/QueryTask","dojo/has!extend-esri?esri/tasks/RelationshipQuery","dojo/has!extend-esri?esri/tasks/StatisticDefinition"],function(_1e4,lang,_1e5,_1e6,has,_1e7,_1e8,_1e9){var _1ea=_1e4(null,{declaredClass:"esri.tasks.Query",constructor:function(){this.spatialRelationship=_1ea.SPATIAL_REL_INTERSECTS;},text:null,where:"",geometry:null,groupByFieldsForStatistics:null,objectIds:null,returnGeometry:false,orderByFields:null,outSpatialReference:null,outFields:null,outStatistics:null,timeExtent:null,relationParam:null,pixelSize:null,toJson:function(_1eb){var json={text:this.text,where:this.where,returnGeometry:this.returnGeometry,spatialRel:this.spatialRelationship,maxAllowableOffset:this.maxAllowableOffset,geometryPrecision:this.geometryPrecision},g=_1eb&&_1eb["geometry"]||this.geometry,ids=this.objectIds,_1ec=this.outFields,_1ed=this.outSpatialReference,_1ee=this.groupByFieldsForStatistics,_1ef=this.orderByFields,_1f0=this.outStatistics;if(g){json.geometry=g;json.geometryType=_1e8.getJsonType(g);json.inSR=g.spatialReference.wkid||_1e6.toJson(g.spatialReference.toJson());}if(ids){json.objectIds=ids.join(",");}if(_1ec){json.outFields=_1ec.join(",");}if(_1ee){json.groupByFieldsForStatistics=_1ee.join(",");}if(_1ef){json.orderByFields=_1ef.join(",");}if(_1f0){var _1f1=[];_1e5.forEach(_1f0,function(item,idx){_1f1.push(item.toJson());});json.outStatistics=_1e6.toJson(_1f1);}if(_1ed!==null){json.outSR=_1ed.wkid||_1e6.toJson(_1ed.toJson());}else{if(g){json.outSR=g.spatialReference.wkid||_1e6.toJson(g.spatialReference.toJson());}}var _1f2=this.timeExtent;json.time=_1f2?_1f2.toJson().join(","):null;var _1f3=this.relationParam;if(_1f3&&this.spatialRelationship===_1ea.SPATIAL_REL_RELATION){json.relationParam=_1f3;}json.pixelSize=this.pixelSize?_1e6.toJson(this.pixelSize.toJson()):null;json._ts=this._ts;return json;}});lang.mixin(_1ea,_1e9);if(has("extend-esri")){lang.setObject("tasks.Query",_1ea,_1e7);}return _1ea;});},"dojox/main":function(){define("dojox/main",["dojo/_base/kernel"],function(dojo){return dojo.dojox;});},"esri/layers/FeatureTemplate":function(){define("esri/layers/FeatureTemplate",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/lang","esri/graphic"],function(_1f4,lang,has,_1f5,_1f6,_1f7){var _1f8=_1f4(null,{declaredClass:"esri.layers.FeatureTemplate",constructor:function(json){if(json&&lang.isObject(json)){this.name=json.name;this.description=json.description;this.drawingTool=json.drawingTool;var _1f9=json.prototype;this.prototype=new _1f7(_1f9.geometry,null,_1f9.attributes);}},toJson:function(){return _1f6.fixJson({name:this.name,description:this.description,drawingTool:this.drawingTool,prototype:this.prototype&&this.prototype.toJson()});}});lang.mixin(_1f8,{TOOL_AUTO_COMPLETE_POLYGON:"esriFeatureEditToolAutoCompletePolygon",TOOL_CIRCLE:"esriFeatureEditToolCircle",TOOL_ELLIPSE:"esriFeatureEditToolEllipse",TOOL_FREEHAND:"esriFeatureEditToolFreehand",TOOL_LINE:"esriFeatureEditToolLine",TOOL_NONE:"esriFeatureEditToolNone",TOOL_POINT:"esriFeatureEditToolPoint",TOOL_POLYGON:"esriFeatureEditToolPolygon",TOOL_RECTANGLE:"esriFeatureEditToolRectangle",TOOL_ARROW:"esriFeatureEditToolArrow",TOOL_TRIANGLE:"esriFeatureEditToolTriangle",TOOL_LEFT_ARROW:"esriFeatureEditToolLeftArrow",TOOL_RIGHT_ARROW:"esriFeatureEditToolRightArrow",TOOL_UP_ARROW:"esriFeatureEditToolUpArrow",TOOL_DOWN_ARROW:"esriFeatureEditToolDownArrow"});if(has("extend-esri")){lang.setObject("layers.FeatureTemplate",_1f8,_1f5);}return _1f8;});},"dijit/form/_DateTimeTextBox":function(){require({cache:{"url:dijit/form/templates/DropDownBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdata-dojo-attach-point=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"button presentation\" aria-hidden=\"true\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdata-dojo-attach-point=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"}});define("dijit/form/_DateTimeTextBox",["dojo/date","dojo/date/locale","dojo/date/stamp","dojo/_base/declare","dojo/_base/lang","./RangeBoundTextBox","../_HasDropDown","dojo/text!./templates/DropDownBox.html"],function(date,_1fa,_1fb,_1fc,lang,_1fd,_1fe,_1ff){new Date("X");var _200=_1fc("dijit.form._DateTimeTextBox",[_1fd,_1fe],{templateString:_1ff,hasDownArrow:true,cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},pattern:_1fa.regexp,datePackage:"",postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},compare:function(val1,val2){var _201=this._isInvalidDate(val1);var _202=this._isInvalidDate(val2);return _201?(_202?0:-1):(_202?1:date.compare(val1,val2,this._selector));},forceWidth:true,format:function(_203,_204){if(!_203){return "";}return this.dateLocaleModule.format(_203,_204);},"parse":function(_205,_206){return this.dateLocaleModule.parse(_205,_206)||(this._isEmpty(_205)?null:undefined);},serialize:function(val,_207){if(val.toGregorian){val=val.toGregorian();}return _1fb.toISOString(val,_207);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(_208){this.dateModule=_208.datePackage?lang.getObject(_208.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_208.datePackage?lang.getObject(_208.datePackage+".locale",false):_1fa;this._set("pattern",this.dateLocaleModule.regexp);this._invalidDate=this.constructor.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_209){_209.selector=this._selector;_209.fullYear=true;var _20a=_1fb.fromISOString;if(typeof _209.min=="string"){_209.min=_20a(_209.min);}if(typeof _209.max=="string"){_209.max=_20a(_209.max);}this.inherited(arguments);},_isInvalidDate:function(_20b){return !_20b||isNaN(_20b)||typeof _20b!="object"||_20b.toString()==this._invalidDate;},_setValueAttr:function(_20c,_20d,_20e){if(_20c!==undefined){if(typeof _20c=="string"){_20c=_1fb.fromISOString(_20c);}if(this._isInvalidDate(_20c)){_20c=null;}if(_20c instanceof Date&&!(this.dateClassObj instanceof Date)){_20c=new this.dateClassObj(_20c);}}this.inherited(arguments);if(this.value instanceof Date){this.filterString="";}if(this.dropDown){this.dropDown.set("value",_20c,false);}},_set:function(attr,_20f){if(attr=="value"&&this.value instanceof Date&&this.compare(_20f,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_210){if(this.dropDown){this.dropDown.destroy();}var _211=lang.isString(this.popupClass)?lang.getObject(this.popupClass,false):this.popupClass,_212=this,_213=this.get("value");this.dropDown=new _211({onChange:function(_214){_212.set("value",_214,true);},id:this.id+"_popup",dir:_212.dir,lang:_212.lang,value:_213,currentFocus:!this._isInvalidDate(_213)?_213:this.dropDownDefaultValue,constraints:_212.constraints,filterString:_212.filterString,datePackage:_212.params.datePackage,isDisabledDate:function(date){return !_212.rangeCheck(date,_212.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_215,_216){this._setValueAttr(this.parse(_215,this.constraints),_216,_215);}});return _200;});},"dijit/_editor/_Plugin":function(){define("dijit/_editor/_Plugin",["dojo/_base/connect","dojo/_base/declare","dojo/_base/lang","../form/Button"],function(_217,_218,lang,_219){var _21a=_218("dijit._editor._Plugin",null,{constructor:function(args){this.params=args||{};lang.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:_219,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _21b=this.getLabel(this.command),_21c=this.editor,_21d=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _21e=lang.mixin({label:_21b,ownerDocument:_21c.ownerDocument,dir:_21c.dir,lang:_21c.lang,showLabel:false,iconClass:_21d,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_21e);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){var h;while(h=this._connects.pop()){h.remove();}if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(_217.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_21f,_220;if(!e||!e.isLoaded||!c.length){return;}var _221=this.get("disabled");if(this.button){try{_220=!_221&&e.queryCommandEnabled(c);if(this.enabled!==_220){this.enabled=_220;this.button.set("disabled",!_220);}if(_220){if(typeof this.button.checked=="boolean"){_21f=e.queryCommandState(c);if(this.checked!==_21f){this.checked=_21f;this.button.set("checked",e.queryCommandState(c));}}}}catch(e){console.log(e);}}},setEditor:function(_222){this.editor=_222;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",lang.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_223){if(this.button){_223.addChild(this.button);}},set:function(name,_224){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _225=this._getAttrNames(name);if(this[_225.s]){var _226=this[_225.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_224);}return _226||this;},get:function(name){var _227=this._getAttrNames(name);return this[_227.g]?this[_227.g]():this[name];},_setDisabledAttr:function(_228){this.disabled=_228;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_229){this[name]=_229;}});_21a.registry={};return _21a;});},"esri/layers/FeatureEditResult":function(){define("esri/layers/FeatureEditResult",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel"],function(_22a,lang,has,_22b){var _22c=_22a(null,{declaredClass:"esri.layers.FeatureEditResult",constructor:function(json){if(json&&lang.isObject(json)){this.objectId=json.objectId;this.success=json.success;if(!json.success){var err=json.error;this.error=new Error();this.error.code=err.code;this.error.message=err.description;}}}});if(has("extend-esri")){lang.setObject("layers.FeatureEditResult",_22c,_22b);}return _22c;});},"dojo/data/util/sorter":function(){define(["../../_base/lang"],function(lang){var _22d={};lang.setObject("dojo.data.util.sorter",_22d);_22d.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};_22d.createSortFunction=function(_22e,_22f){var _230=[];function _231(attr,dir,comp,s){return function(_232,_233){var a=s.getValue(_232,attr);var b=s.getValue(_233,attr);return dir*comp(a,b);};};var _234;var map=_22f.comparatorMap;var bc=_22d.basicComparator;for(var i=0;i<_22e.length;i++){_234=_22e[i];var attr=_234.attribute;if(attr){var dir=(_234.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_230.push(_231(attr,dir,comp,_22f));}}return function(rowA,rowB){var i=0;while(i<_230.length){var ret=_230[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};return _22d;});},"dojo/store/util/QueryResults":function(){define(["../../_base/array","../../_base/lang","../../_base/Deferred"],function(_235,lang,_236){var _237=function(_238){if(!_238){return _238;}if(_238.then){_238=lang.delegate(_238);}function _239(_23a){if(!_238[_23a]){_238[_23a]=function(){var args=arguments;return _236.when(_238,function(_23b){Array.prototype.unshift.call(args,_23b);return _237(_235[_23a].apply(_235,args));});};}};_239("forEach");_239("filter");_239("map");if(!_238.total){_238.total=_236.when(_238,function(_23c){return _23c.length;});}return _238;};lang.setObject("dojo.store.util.QueryResults",_237);return _237;});},"dojo/touch":function(){define(["./_base/kernel","./aspect","./dom","./_base/lang","./on","./has","./mouse","./domReady","./_base/window"],function(dojo,_23d,dom,lang,on,has,_23e,_23f,win){var _240=navigator.msPointerEnabled;var _241;function _242(_243,_244,_245){if(_240&&_245){return function(node,_246){return on(node,_245,_246);};}else{if(has("touch")){return function(node,_247){var _248=on(node,_244,_247),_249=on(node,_243,function(evt){if(!_241||(new Date()).getTime()>_241+1000){_247.call(this,evt);}});return {remove:function(){_248.remove();_249.remove();}};};}else{return function(node,_24a){return on(node,_243,_24a);};}}};var _24b,_24c,_24d;if(has("touch")&&!_240){_23f(function(){_24d=win.body();win.doc.addEventListener("touchstart",function(_24e){_241=(new Date()).getTime();var _24f=_24d;_24d=_24e.target;if(_24d.dojoElementFromPoint){_24d=_24d.dojoElementFromPoint(_24e.changedTouches[0].clientX,_24e.changedTouches[0].clientY);}if(_24f){on.emit(_24f,"dojotouchout",{target:_24f,relatedTarget:_24d,bubbles:true});}if(_24d){on.emit(_24d,"dojotouchover",{target:_24d,relatedTarget:_24f,bubbles:true});}},true);on(win.doc,"touchmove",function(_250){_241=(new Date()).getTime();_24c=_250;var _251=win.doc.elementFromPoint(_250.clientX,_250.clientY);if(_251){var _252=_251;if(_251.dojoElementFromPoint){_251=_251.dojoElementFromPoint(_250.clientX,_250.clientY);}if(_24d!==_251){if(_24d){on.emit(_252,"dojotouchout",{target:_24d,relatedTarget:_251,bubbles:true});}if(_251){on.emit(_252,"dojotouchover",{target:_251,relatedTarget:_24d,bubbles:true});}_24d=_251;}on.emit(_252,"dojotouchmove",{target:_251,bubbles:true});}});on(win.doc,"touchend",function(_253){var node=win.doc.elementFromPoint(_253.clientX,_253.clientY);var _254=node;if(node.dojoElementFromPoint){node=node.dojoElementFromPoint(_253.clientX,_253.clientY);}if(node){on.emit(_254,"dojotouchend",lang.delegate(_253,{target:node,bubbles:true}));}});});_24b=function(node,_255){return on(node,"dojotouchmove",function(_256){_255(lang.delegate(_24c,{target:_256.target,preventDefault:function(){_24c.preventDefault();},stopPropagation:function(){_256.stopPropagation();}}));});};}var _257={press:_242("mousedown","touchstart","MSPointerDown"),move:_242("mousemove",_24b,"MSPointerMove"),release:_242("mouseup","dojotouchend","MSPointerUp"),cancel:_242(_23e.leave,"touchcancel",has("touch")?"MSPointerCancel":null),over:_242("mouseover","dojotouchover","MSPointerOver"),out:_242("mouseout","dojotouchout","MSPointerOut"),enter:_23e._eventHandler(_242("mouseover","dojotouchover","MSPointerOver")),leave:_23e._eventHandler(_242("mouseout","dojotouchout","MSPointerOut"))};1&&(dojo.touch=_257);return _257;});},"dijit/_CssStateMixin":function(){define("dijit/_CssStateMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/has","dojo/_base/lang","dojo/on","dojo/ready","dojo/_base/window","./registry"],function(_258,_259,dom,_25a,has,lang,on,_25b,win,_25c){var _25d=_259("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);_258.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active","_opened"],function(attr){this.watch(attr,lang.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._trackMouseState(this.domNode,this.baseClass);this._setStateClass();},_cssMouseEvent:function(_25e){if(!this.disabled){switch(_25e.type){case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":case "touchstart":this._set("active",true);break;case "mouseup":case "touchend":this._set("active",false);break;}}},_setStateClass:function(){var _25f=this.baseClass.split(" ");function _260(_261){_25f=_25f.concat(_258.map(_25f,function(c){return c+_261;}),"dijit"+_261);};if(!this.isLeftToRight()){_260("Rtl");}var _262=this.checked=="mixed"?"Mixed":(this.checked?"Checked":"");if(this.checked){_260(_262);}if(this.state){_260(this.state);}if(this.selected){_260("Selected");}if(this._opened){_260("Opened");}if(this.disabled){_260("Disabled");}else{if(this.readOnly){_260("ReadOnly");}else{if(this.active){_260("Active");}else{if(this.hovering){_260("Hover");}}}}if(this.focused){_260("Focused");}var tn=this.stateNode||this.domNode,_263={};_258.forEach(tn.className.split(" "),function(c){_263[c]=true;});if("_stateClasses" in this){_258.forEach(this._stateClasses,function(c){delete _263[c];});}_258.forEach(_25f,function(c){_263[c]=true;});var _264=[];for(var c in _263){_264.push(c);}tn.className=_264.join(" ");this._stateClasses=_25f;},_subnodeCssMouseEvent:function(node,_265,evt){if(this.disabled||this.readOnly){return;}function _266(_267){_25a.toggle(node,_265+"Hover",_267);};function _268(_269){_25a.toggle(node,_265+"Active",_269);};function _26a(_26b){_25a.toggle(node,_265+"Focused",_26b);};switch(evt.type){case "mouseover":_266(true);break;case "mouseout":_266(false);_268(false);break;case "mousedown":case "touchstart":_268(true);break;case "mouseup":case "touchend":_268(false);break;case "focus":case "focusin":_26a(true);break;case "blur":case "focusout":_26a(false);break;}},_trackMouseState:function(node,_26c){node._cssState=_26c;}});_25b(function(){function _26d(evt){if(!dom.isDescendant(evt.relatedTarget,evt.target)){for(var node=evt.target;node&&node!=evt.relatedTarget;node=node.parentNode){if(node._cssState){var _26e=_25c.getEnclosingWidget(node);if(_26e){if(node==_26e.domNode){_26e._cssMouseEvent(evt);}else{_26e._subnodeCssMouseEvent(node,node._cssState,evt);}}}}}};function _26f(evt){evt.target=evt.srcElement;_26d(evt);};var body=win.body(),_270=(has("touch")?[]:["mouseover","mouseout"]).concat(["mousedown","touchstart","mouseup","touchend"]);_258.forEach(_270,function(type){if(body.addEventListener){body.addEventListener(type,_26d,true);}else{body.attachEvent("on"+type,_26f);}});on(body,"focusin, focusout",function(evt){var node=evt.target;if(node._cssState&&!node.getAttribute("widgetId")){var _271=_25c.getEnclosingWidget(node);_271._subnodeCssMouseEvent(node,node._cssState,evt);}});});return _25d;});},"esri/dijit/editing/AttachmentEditor":function(){define(["require","dojo/_base/declare","dojo/_base/lang","dojo/_base/connect","dojo/_base/array","dojo/_base/kernel","dojo/has","dojo/query","dojo/io-query","dojo/dom-attr","dijit/_Widget","dijit/_Templated","esri/kernel","esri/lang","esri/domUtils","dojo/text!esri/dijit/editing/templates/AttachmentEditor.html","dojo/i18n!esri/nls/jsapi","dojo/NodeList-dom"],function(_272,_273,lang,_274,_275,_276,has,_277,_278,_279,_27a,_27b,_27c,_27d,_27e,_27f,_280){var AE=_273([_27a,_27b],{declaredClass:"esri.dijit.editing.AttachmentEditor",widgetsInTemplate:true,templateString:_27f,basePath:_272.toUrl("esri/dijit/editing")+"/",_listHtml:"<span id='node_${oid}_${attid}'><a href='${href}' target='_blank'>${name}</a>",_deleteBtnHtml:"(<span style='cursor:pointer;color:red;font-weight:bold;' class='deleteAttachment' id='${attid}');'>X</span>)",_endHtml:"<br/></span>",_aeConnects:[],_layerEditingCapChecked:{},_layerEditingCap:{},constructor:function(_281,_282){lang.mixin(this,_280.widgets.attachmentEditor);},startup:function(){this.inherited(arguments);this._uploadField_connect=_274.connect(this._uploadField,"onchange",this,"_addAttachment");this._uploadFieldFocus_connect=_274.connect(this._uploadField,"onfocus",lang.hitch(this,function(e){_27e.hide(this._attachmentError);}));},destroy:function(){_275.forEach(this._aeConnects,_274.disconnect);_274.disconnect(this._uploadField_connect);_274.disconnect(this._uploadFieldFocus_connect);this.inherited(arguments);},showAttachments:function(_283,_284){var list=this._attachmentList;list.innerHTML=this.NLS_none;this._uploadField.value="";_275.forEach(this.domNode.children,function(_285,idx){_27e.show(_285);});_27e.hide(this._attachmentError);if(!_283){return;}this._featureLayer=_283.getLayer()||_284;if(!this._featureLayer){return;}if(this._featureLayer.declaredClass!=="esri.layers.FeatureLayer"||!this._featureLayer.getEditCapabilities){_27e.hide(this._uploadForm);_275.forEach(this.domNode.children,function(_286,idx){_27e.hide(_286);});return;}this._currentLayerId=this._featureLayer.id;if(!this._layerEditingCapChecked[this._currentLayerId]){this._layerEditingCap[this._currentLayerId]=this._featureLayer.getEditCapabilities();this._layerEditingCapChecked[this._currentLayerId]=true;}this._featureCanUpdate=this._featureLayer.getEditCapabilities({feature:_283}).canUpdate;this._oid=_283.attributes[this._featureLayer.objectIdField];this._getAttachments(_283);},_getAttachments:function(_287){if(!this._featureLayer||!this._featureLayer.queryAttachmentInfos){return;}this._featureLayer.queryAttachmentInfos(this._oid,lang.hitch(this,"_onQueryAttachmentInfosComplete"));},_addAttachment:function(){_27e.hide(this._attachmentError);if(!this._featureLayer||!this._featureLayer.addAttachment){return;}this._featureLayer.addAttachment(this._oid,this._uploadForm,lang.hitch(this,"_onAddAttachmentComplete"),lang.hitch(this,"_onAddAttachmentError"));},_deleteAttachment:function(oid,_288){this._featureLayer.deleteAttachments(oid,[_288],lang.hitch(this,"_onDeleteAttachmentComplete"));},_onQueryAttachmentInfosComplete:function(_289){var _28a=this._listHtml+this._deleteBtnHtml+this._endHtml;this._uploadForm.style.display="block";if((!this._featureCanUpdate&&this._layerEditingCap[this._currentLayerId].canUpdate)||(!this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate)){_28a=this._listHtml+this._endHtml;this._uploadForm.style.display="none";}else{if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_28a=this._listHtml+this._endHtml;}}var list=this._attachmentList,_28b=_275.map(_289,lang.hitch(this,function(info){return _27d.substitute({href:info.url,name:info.name,oid:info.objectId,attid:info.id},_28a);}));list.innerHTML=_28b.join("")||this.NLS_none;this._updateConnects();},_onAddAttachmentComplete:function(_28c){var _28d=this._uploadField;var _28e=_28d.value;var pos=_28e.lastIndexOf("\\");if(pos>-1){_28e=_28e.substring(pos+1,_28e.length);}_28e=_28e.replace(/\ /g,"_");var list=this._attachmentList,_28f=_278.objectToQuery({gdbVersion:this._featureLayer.gdbVersion,token:this._featureLayer._getToken()});var _290=this._listHtml+this._deleteBtnHtml+this._endHtml;if(this._layerEditingCap[this._currentLayerId].canCreate&&!this._layerEditingCap[this._currentLayerId].canUpdate){_290=this._listHtml+this._endHtml;}var link=_27d.substitute({href:this._featureLayer._url.path+"/"+_28c.objectId+"/attachments/"+_28c.attachmentId+(_28f?("?"+_28f):""),name:_28e,oid:_28c.objectId,attid:_28c.attachmentId},_290);list.innerHTML=list.innerHTML==this.NLS_none?link:(list.innerHTML+link);this._updateConnects();_28d.value="";},_onAddAttachmentError:function(_291){if(_291&&_27d.isDefined(_291.code)){var _292,_293=this._attachmentError;if(_291.code===400){_292=this.NLS_fileNotSupported;}else{_292=_291.message||(_291.details&&_291.details.length&&_291.details[0]);}_279.set(_293,"innerHTML",(_292||this.NLS_error));_27e.show(_293);}},_onDeleteAttachmentComplete:function(_294){var _295=_275.every(_294,function(_296){return _296.success;}),list=this._attachmentList;if(_295){_276.query("#node_"+_294[0].objectId+"_"+_294[0].attachmentId).orphan();if(!list.children||!list.children.length){list.innerHTML=this.NLS_none;}}},_updateConnects:function(){_275.forEach(this._aeConnects,_274.disconnect);_276.query(".deleteAttachment").forEach(function(item){this._aeConnects.push(_274.connect(item,"onclick",lang.hitch(this,"_deleteAttachment",this._oid,item.id)));},this);}});if(has("extend-esri")){lang.setObject("dijit.editing.AttachmentEditor",AE,_27c);}return AE;});},"dojo/hccss":function(){define(["require","./_base/config","./dom-class","./dom-style","./has","./ready","./_base/window"],function(_297,_298,_299,_29a,has,_29b,win){has.add("highcontrast",function(){var div=win.doc.createElement("div");div.style.cssText="border: 1px solid; border-color:red green; position: absolute; height: 5px; top: -999px;"+"background-image: url("+(_298.blankGif||_297.toUrl("./resources/blank.gif"))+");";win.body().appendChild(div);var cs=_29a.getComputedStyle(div),_29c=cs.backgroundImage,hc=(cs.borderTopColor==cs.borderRightColor)||(_29c&&(_29c=="none"||_29c=="url(invalid-url:)"));if(has("ie")<=8){div.outerHTML="";}else{win.body().removeChild(div);}return hc;});_29b(90,function(){if(has("highcontrast")){_299.add(win.body(),"dj_a11y");}});return has;});},"dijit/form/_FormValueWidget":function(){define("dijit/form/_FormValueWidget",["dojo/_base/declare","dojo/sniff","./_FormWidget","./_FormValueMixin"],function(_29d,has,_29e,_29f){return _29d("dijit.form._FormValueWidget",[_29e,_29f],{_layoutHackIE7:function(){if(has("ie")==7){var _2a0=this.domNode;var _2a1=_2a0.parentNode;var _2a2=_2a0.firstChild||_2a0;var _2a3=_2a2.style.filter;var _2a4=this;while(_2a1&&_2a1.clientHeight==0){(function ping(){var _2a5=_2a4.connect(_2a1,"onscroll",function(){_2a4.disconnect(_2a5);_2a2.style.filter=(new Date()).getMilliseconds();_2a4.defer(function(){_2a2.style.filter=_2a3;});});})();_2a1=_2a1.parentNode;}}}});});},"dijit/ToolbarSeparator":function(){define("dijit/ToolbarSeparator",["dojo/_base/declare","dojo/dom","./_Widget","./_TemplatedMixin"],function(_2a6,dom,_2a7,_2a8){return _2a6("dijit.ToolbarSeparator",[_2a7,_2a8],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dom.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});});},"dojo/data/util/filter":function(){define(["../../_base/lang"],function(lang){var _2a9={};lang.setObject("dojo.data.util.filter",_2a9);_2a9.patternToRegExp=function(_2aa,_2ab){var rxp="^";var c=null;for(var i=0;i<_2aa.length;i++){c=_2aa.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_2aa.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_2ab){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};return _2a9;});},"dijit/form/Button":function(){require({cache:{"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n"}});define("dijit/form/Button",["require","dojo/_base/declare","dojo/dom-class","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/ready","./_FormWidget","./_ButtonMixin","dojo/text!./templates/Button.html"],function(_2ac,_2ad,_2ae,has,_2af,lang,_2b0,_2b1,_2b2,_2b3){if(has("dijit-legacy-requires")){_2b0(0,function(){var _2b4=["dijit/form/DropDownButton","dijit/form/ComboButton","dijit/form/ToggleButton"];_2ac(_2b4);});}return _2ad("dijit.form.Button",[_2b1,_2b2],{showLabel:true,iconClass:"dijitNoIcon",_setIconClassAttr:{node:"iconNode",type:"class"},baseClass:"dijitButton",templateString:_2b3,_setValueAttr:"valueNode",_onClick:function(e){var ok=this.inherited(arguments);if(ok){if(this.valueNode){this.valueNode.click();e.preventDefault();e.stopPropagation();}}return ok;},_fillContent:function(_2b5){if(_2b5&&(!this.params||!("label" in this.params))){var _2b6=lang.trim(_2b5.innerHTML);if(_2b6){this.label=_2b6;}}},_setShowLabelAttr:function(val){if(this.containerNode){_2ae.toggle(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},setLabel:function(_2b7){_2af.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_2b7);},_setLabelAttr:function(_2b8){this.inherited(arguments);if(!this.showLabel&&!("title" in this.params)){this.titleNode.title=lang.trim(this.containerNode.innerText||this.containerNode.textContent||"");}}});});},"dijit/_editor/html":function(){define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(_2b9,lang,has){var _2ba={};lang.setObject("dijit._editor.html",_2ba);var _2bb=_2ba.escapeXml=function(str,_2bc){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_2bc){str=str.replace(/'/gm,"&#39;");}return str;};_2ba.getNodeHtml=function(node){var _2bd=[];_2ba.getNodeHtmlHelper(node,_2bd);return _2bd.join("");};_2ba.getNodeHtmlHelper=function(node,_2be){switch(node.nodeType){case 1:var _2bf=node.nodeName.toLowerCase();if(!_2bf||_2bf.charAt(0)=="/"){return "";}_2be.push("<",_2bf);var _2c0=[],_2c1={};var attr;if(has("dom-attributes-explicit")||has("dom-attributes-specified-flag")){var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!=="_dj"&&(!has("dom-attributes-specified-flag")||attr.specified)&&!(n in _2c1)){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}if(has("ie")===8&&n==="style"){v=v.replace("HEIGHT:","height:").replace("WIDTH:","width:");}_2c0.push([n,v]);_2c1[n]=v;}}}else{var _2c2=/^input$|^img$/i.test(node.nodeName)?node:node.cloneNode(false);var s=_2c2.outerHTML;var _2c3=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;var _2c4=s.match(_2c3);s=s.substr(0,s.indexOf(">"));_2b9.forEach(_2c4,function(attr){if(attr){var idx=attr.indexOf("=");if(idx>0){var key=attr.substring(0,idx);if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_2c0.push([key,node.getAttribute("_djrealurl")]);return;}}var val,_2c5;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_2bf==="img"){_2c5=/width=(\S+)/i.exec(s);if(_2c5){val=_2c5[1];}break;}case "height":if(_2bf==="img"){_2c5=/height=(\S+)/i.exec(s);if(_2c5){val=_2c5[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_2c0.push([key,val.toString()]);}}}}},this);}_2c0.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_2c0[j++])){_2be.push(" ",attr[0],"=\"",(typeof attr[1]==="string"?_2bb(attr[1],true):attr[1]),"\"");}switch(_2bf){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_2be.push(" />");break;case "script":_2be.push(">",node.innerHTML,"</",_2bf,">");break;default:_2be.push(">");if(node.hasChildNodes()){_2ba.getChildrenHtmlHelper(node,_2be);}_2be.push("</",_2bf,">");}break;case 4:case 3:_2be.push(_2bb(node.nodeValue,true));break;case 8:_2be.push("<!--",_2bb(node.nodeValue,true),"-->");break;default:_2be.push("<!-- Element not recognized - Type: ",node.nodeType," Name: ",node.nodeName,"-->");}};_2ba.getChildrenHtml=function(node){var _2c6=[];_2ba.getChildrenHtmlHelper(node,_2c6);return _2c6.join("");};_2ba.getChildrenHtmlHelper=function(dom,_2c7){if(!dom){return;}var _2c8=dom["childNodes"]||dom;var _2c9=!has("ie")||_2c8!==dom;var node,i=0;while((node=_2c8[i++])){if(!_2c9||node.parentNode==dom){_2ba.getNodeHtmlHelper(node,_2c7);}}};return _2ba;});},"dijit/_KeyNavContainer":function(){define("dijit/_KeyNavContainer",["dojo/_base/kernel","./_Container","./_FocusMixin","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/_base/event","dojo/dom-attr","dojo/_base/lang"],function(_2ca,_2cb,_2cc,_2cd,keys,_2ce,_2cf,_2d0,lang){return _2ce("dijit._KeyNavContainer",[_2cc,_2cb],{tabIndex:"0",connectKeyNavHandlers:function(_2d1,_2d2){var _2d3=(this._keyNavCodes={});var prev=lang.hitch(this,"focusPrev");var next=lang.hitch(this,"focusNext");_2cd.forEach(_2d1,function(code){_2d3[code]=prev;});_2cd.forEach(_2d2,function(code){_2d3[code]=next;});_2d3[keys.HOME]=lang.hitch(this,"focusFirstChild");_2d3[keys.END]=lang.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){_2ca.deprecated("startupKeyNavChildren() call no longer needed","","2.0");},startup:function(){this.inherited(arguments);_2cd.forEach(this.getChildren(),lang.hitch(this,"_startupChild"));},addChild:function(_2d4,_2d5){this.inherited(arguments);this._startupChild(_2d4);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){this.focusChild(this._getFirstFocusableChild());},focusLastChild:function(){this.focusChild(this._getLastFocusableChild());},focusNext:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,1));},focusPrev:function(){this.focusChild(this._getNextFocusableChild(this.focusedChild,-1),true);},focusChild:function(_2d6,last){if(!_2d6){return;}if(this.focusedChild&&_2d6!==this.focusedChild){this._onChildBlur(this.focusedChild);}_2d6.set("tabIndex",this.tabIndex);_2d6.focus(last?"end":"start");this._set("focusedChild",_2d6);},_startupChild:function(_2d7){_2d7.set("tabIndex","-1");this.connect(_2d7,"_onFocus",function(){_2d7.set("tabIndex",this.tabIndex);});this.connect(_2d7,"_onBlur",function(){_2d7.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode||this.focusedChild){return;}this.focusFirstChild();_2d0.set(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){_2d0.set(this.domNode,"tabIndex",this.tabIndex);}this.focusedChild=null;this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();_2cf.stop(evt);}},_onChildBlur:function(){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_2d8,dir){if(_2d8){_2d8=this._getSiblingOfChild(_2d8,dir);}var _2d9=this.getChildren();for(var i=0;i<_2d9.length;i++){if(!_2d8){_2d8=_2d9[(dir>0)?0:(_2d9.length-1)];}if(_2d8.isFocusable()){return _2d8;}_2d8=this._getSiblingOfChild(_2d8,dir);}return null;}});});},"url:esri/dijit/editing/templates/AttachmentEditor.html":"<div class=\"attachmentEditor\">\r\n    <br />\r\n    <div>\r\n        <b>${NLS_attachments}</b>\r\n        <hr />\r\n        <div dojoAttachPoint=\"_attachmentError\" style='color:red;display:none'></div>\r\n        <br />\r\n        <span dojoAttachPoint='_attachmentList' style='word-wrap: break-word;'></span>\r\n        <br><br>\r\n        <form dojoAttachPoint='_uploadForm'> ${NLS_add}:&nbsp;&nbsp;<input type='file' name='attachment' dojoAttachPoint='_uploadField' /> </form>\r\n    </div>\r\n</div>","esri/dijit/AttributeInspector":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/connect","dojo/_base/sniff","dojo/_base/kernel","dojo/has","dojo/dom-style","dojo/dom-construct","esri/kernel","esri/lang","esri/domUtils","esri/layers/InheritedDomain","esri/layers/FeatureLayer","dojo/i18n!esri/nls/jsapi","dojo/fx","dojox/gfx","dijit/_Widget","dijit/_Templated","dijit/Editor","dijit/_editor/plugins/LinkDialog","dijit/_editor/plugins/TextColor","esri/dijit/_EventedWidget","esri/dijit/editing/AttachmentEditor","esri/dijit/editing/Util","esri/tasks/query","dijit/form/DateTextBox","dijit/form/TextBox","dijit/form/NumberTextBox","dijit/form/FilteringSelect","dijit/form/NumberSpinner","dijit/form/Button","dijit/form/SimpleTextarea","dijit/Tooltip","dojo/data/ItemFileReadStore","dojox/date/islamic","dojox/date/islamic/Date","dojox/date/islamic/locale","dojo/text!esri/dijit/templates/AttributeInspector.html"],function(_2da,lang,_2db,_2dc,_2dd,_2de,has,_2df,_2e0,_2e1,_2e2,_2e3,_2e4,_2e5,_2e6,fx,gfx,_2e7,_2e8,_2e9,_2ea,_2eb,_2ec,_2ed,Util,_2ee,_2ef,_2f0,_2f1,_2f2,_2f3,_2f4,_2f5,_2f6,_2f7,_2f8,_2f9,_2fa,_2fb){var ATI=_2da([_2ec,_2e7,_2e8],{declaredClass:"esri.dijit.AttributeInspector",widgetsInTemplate:true,templateString:_2fb,_navMessage:"( ${idx} ${of} ${numFeatures} )",onUpdate:function(){},onDelete:function(){},onAttributeChange:function(){},onNext:function(){},onReset:function(){},onCancel:function(){},_eventMap:{"update":true,"delete":["feature"],"attribute-change":["feature","fieldName","fieldValue"],"next":["feature"],"reset":true,"cancel":true},constructor:function(_2fc,_2fd){lang.mixin(this,_2e6.widgets.attributeInspector);_2fc=_2fc||{};if(!_2fc.featureLayer&&!_2fc.layerInfos){console.error("esri.AttributeInspector: please provide correct parameter in the constructor");}this._datePackage=this._getDatePackage(_2fc);this._layerInfos=_2fc.layerInfos||[{featureLayer:_2fc.featureLayer,options:_2fc.options||[]}];this._aiConnects=[];this._selection=[];this._toolTips=[];this._numFeatures=0;this._featureIdx=0;this._currentLInfo=null;this._currentFeature=null;this._hideNavButtons=_2fc.hideNavButtons||false;},postCreate:function(){if(_2db.every(this._layerInfos,function(_2fe){return _2fe.featureLayer.loaded;})){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();}else{var _2ff=this._layerInfos.length;_2db.forEach(this._layerInfos,function(_300){var _301=_300.featureLayer;if(_301.loaded){_2ff--;}else{var _302=_2dc.connect(_301,"onLoad",this,function(_303){_2dc.disconnect(_302);_302=null;_2ff--;if(!_2ff){this._initLayerInfos();this._createAttachmentEditor();this.onFirstFeature();}});}},this);}},destroy:function(){this._destroyAttributeTable();_2db.forEach(this._aiConnects,_2dc.disconnect);delete this._aiConnects;if(this._attachmentEditor){this._attachmentEditor.destroy();delete this._attachmentEditor;}delete this._layerInfos;this._selection=this._currentFeature=this._currentLInfo=this._attributes=this._layerInfos=null;this.inherited(arguments);},refresh:function(){this._updateSelection();},first:function(){this.onFirstFeature();},last:function(){this.onLastFeature();},next:function(){this.onNextFeature();},previous:function(){this.onPreviousFeature();},showFeature:function(_304,_305){if(_305){this._createOnlyFirstTime=true;}this._updateSelection([_304],_305);this._updateUI();},onLayerSelectionChange:function(_306,_307,_308){this._createOnlyFirstTime=false;this._featureIdx=(_308===_2e5.SELECTION_NEW)?0:this._featureIdx;this._updateSelection();this._updateUI();},onLayerSelectionClear:function(){if(!this._selection||this._selection.length<=0){return;}this._numFeatures=0;this._featureIdx=0;this._selection=[];this._currentFeature=null;this._currentLInfo=null;this._updateUI();},onLayerEditsComplete:function(_309,adds,_30a,_30b){_30b=_30b||[];if(_30b.length){var _30c=this._selection;var _30d=_309.featureLayer.objectIdField;_2db.forEach(_30b,lang.hitch(this,function(del){_2db.some(_30c,lang.hitch(this,function(item,idx){if(item.attributes[_30d]!==del.objectId){return false;}this._selection.splice(idx,1);return true;}));}));}adds=adds||[];if(adds.length){this._selection=Util.findFeatures(adds,_309.featureLayer);this._featureIdx=0;}var _30e=this._numFeatures=this._selection?this._selection.length:0;if(adds.length){var _30f=_30e?this._selection[this._featureIdx]:null;if(_30f){var _310=_30f.getLayer();var _311=_310.getEditCapabilities();if(!(_311.canCreate&&!_311.canUpdate)){this._showFeature(_30f);}}}this._updateUI();},onFieldValueChange:function(_312,_313){_313=(typeof _313==="undefined")?null:_313;var _314=_312.field;if(_314.type==="esriFieldTypeDate"){_313=(_313&&_313.getTime)?_313.getTime():(_313&&_313.toGregorian?_313.toGregorian().getTime():_313);}if(this._currentFeature.attributes[_314.name]===_313){return;}var _315=this._currentLInfo;var _316=this._currentFeature;var _317=_314.name;if(_317===_315.typeIdField){var type=this._findFirst(_315.types,"id",_313);var _318=_315.fieldInfos;_2db.forEach(_318,function(_319){_314=_319.field;if(!_314||_314.name===_315.typeIdField){return;}var node=_319.dijit;var _31a=this._setFieldDomain(node,type,_314);if(_31a&&node){this._setValue(node,_316.attributes[_314.name]+"");if(node.isValid()===false){this._setValue(node,null);}}},this);}this.onAttributeChange(_316,_317,_313);},onDeleteBtn:function(evt){this._deleteFeature();},onNextFeature:function(evt){this._onNextFeature(1);},onPreviousFeature:function(evt){this._onNextFeature(-1);},onFirstFeature:function(evt){this._onNextFeature(this._featureIdx*-1);},onLastFeature:function(evt){this._onNextFeature((this._numFeatures-1)-this._featureIdx);},_initLayerInfos:function(){var _31b=this._layerInfos;this._editorTrackingInfos={};_2db.forEach(_31b,this._initLayerInfo,this);},_initLayerInfo:function(_31c){var _31d=_31c.featureLayer,_31e,_31f;this._userIds={};var _320=_31d.id;if(_31d.credential){this._userIds[_320]=_31d.credential.userId;}if(_31c.userId){this._userIds[_320]=_31c.userId;}this._connect(_31d,"onSelectionComplete",lang.hitch(this,"onLayerSelectionChange",_31c));this._connect(_31d,"onSelectionClear",lang.hitch(this,"onLayerSelectionClear",_31c));this._connect(_31d,"onEditsComplete",lang.hitch(this,"onLayerEditsComplete",_31c));_31c.showAttachments=_31d.hasAttachments?(_2e2.isDefined(_31c.showAttachments)?_31c.showAttachments:true):false;_31c.hideFields=_31c.hideFields||[];_31c.htmlFields=_31c.htmlFields||[];_31c.isEditable=_31d.isEditable()?(_2e2.isDefined(_31c.isEditable)?_31c.isEditable:true):false;_31c.typeIdField=_31d.typeIdField;_31c.layerId=_31d.id;_31c.types=_31d.types;if(_31d.globalIdField){_31e=this._findFirst(_31c.fieldInfos,"fieldName",_31d.globalIdField);if(!_31e&&!_31c.showGlobalID){_31c.hideFields.push(_31d.globalIdField);}}_31f=this._findFirst(_31c.fieldInfos,"fieldName",_31d.objectIdField);if(!_31f&&!_31c.showObjectID){_31c.hideFields.push(_31d.objectIdField);}var _321=this._getFields(_31c.featureLayer);if(!_321){return;}var _322=_31c.fieldInfos||[];_322=_2db.map(_322,function(_323){return lang.mixin({},_323);});if(!_322.length){_321=_2db.filter(_321,lang.hitch(this,function(_324){return !this._isInFields(_324.name,_31c.hideFields);}));_31c.fieldInfos=_2db.map(_321,lang.hitch(this,function(_325){var _326=(this._isInFields(_325.name,_31c.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return {"fieldName":_325.name,"field":_325,"stringFieldOption":_326};}));}else{_31c.fieldInfos=_2db.filter(_2db.map(_322,lang.hitch(this,function(_327){var _328=_327.stringFieldOption||(this._isInFields(_327.fieldName,_31c.htmlFields)?ATI.STRING_FIELD_OPTION_RICHTEXT:ATI.STRING_FIELD_OPTION_TEXTBOX);return lang.mixin(_327,{"field":this._findFirst(_321,"name",_327.fieldName),"stringFieldOption":_328});})),"return item.field;");}if(_31c.showGlobalID&&!_31e){_322.push(this._findFirst(_321,"name",_31d.globalIdField));}if(_31c.showObjectID&&!_31f){_322.push(this._findFirst(_321,"name",_31d.objectIdField));}var _329=[];if(_31d.editFieldsInfo){if(_31d.editFieldsInfo.creatorField){_329.push(_31d.editFieldsInfo.creatorField);}if(_31d.editFieldsInfo.creationDateField){_329.push(_31d.editFieldsInfo.creationDateField);}if(_31d.editFieldsInfo.editorField){_329.push(_31d.editFieldsInfo.editorField);}if(_31d.editFieldsInfo.editDateField){_329.push(_31d.editFieldsInfo.editDateField);}}this._editorTrackingInfos[_31d.id]=_329;},_createAttachmentEditor:function(){this._attachmentEditor=null;var _32a=this._layerInfos;var _32b=_2db.filter(_32a,function(item){return item.showAttachments;});if(!_32b||!_32b.length){return;}this._attachmentEditor=new _2ed({"class":"atiAttachmentEditor"},this.attachmentEditor);this._attachmentEditor.startup();},_setCurrentLInfo:function(_32c){var _32d=this._currentLInfo?this._currentLInfo.featureLayer:null;var _32e=_32c.featureLayer;if(_32d&&_32d.id===_32e.id&&!_32d.ownershipBasedAccessControlForFeatures){var _32f=_32e.getEditCapabilities();if(!(_32f.canCreate&&!_32f.canUpdate)){return;}}this._currentLInfo=_32c;this._createTable();},_updateSelection:function(_330,_331){this._selection=_330||[];var _332=this._layerInfos;_2db.forEach(_332,this._getSelection,this);var _333=this._numFeatures=this._selection.length;var _334=_333?this._selection[this._featureIdx]:null;this._showFeature(_334,_331);},_getSelection:function(_335){var _336=_335.featureLayer.getSelectedFeatures();this._selection=this._selection.concat(_336);},_updateUI:function(){var _337=this._numFeatures;var _338=this._currentLInfo;this.layerName.innerHTML=(!_338||_337===0)?this.NLS_noFeaturesSelected:(_338.featureLayer?_338.featureLayer.name:"");_2df.set(this.attributeTable,"display",_337?"":"none");_2df.set(this.editButtons,"display",_337?"":"none");_2df.set(this.navButtons,"display",(!this._hideNavButtons&&(_337>1)?"":"none"));this.navMessage.innerHTML=_2e2.substitute({idx:this._featureIdx+1,of:this.NLS_of,numFeatures:this._numFeatures},this._navMessage);if(this._attachmentEditor){_2df.set(this._attachmentEditor.domNode,"display",((_338&&_338.showAttachments)&&_337)?"":"none");}var _339=((_338&&_338.showDeleteButton===false)||!this._canDelete)?false:true;_2df.set(this.deleteBtn.domNode,"display",_339?"":"none");if(this.domNode.parentNode&&this.domNode.parentNode.scrollTop>0){this.domNode.parentNode.scrollTop=0;}},_onNextFeature:function(_33a){this._featureIdx+=_33a;if(this._featureIdx<0){this._featureIdx=this._numFeatures-1;}else{if(this._featureIdx>=this._numFeatures){this._featureIdx=0;}}var _33b=this._selection.length?this._selection[this._featureIdx]:null;this._showFeature(_33b);this._updateUI();this.onNext(_33b);},_deleteFeature:function(){this.onDelete(this._currentFeature);},_showFeature:function(_33c,_33d){if(!_33c){return;}this._currentFeature=_33c;var _33e=_33d?_33d:_33c.getLayer();var _33f=_33e.getEditCapabilities({feature:_33c,userId:this._userIds[_33e.id]});this._canUpdate=_33f.canUpdate;this._canDelete=_33f.canDelete;var _340=this._getLInfoFromFeatureLayer(_33e);if(!_340){return;}this._setCurrentLInfo(_340);var _341=_33c.attributes;var type=this._findFirst(_340.types,"id",_341[_340.typeIdField]);var node,_342=null;var _343=_340.fieldInfos;_2db.forEach(_343,function(_344){_342=_344.field;node=_344.dijit||null;if(!node){return;}var _345=this._setFieldDomain(node,type,_342);var _346=_341[_342.name];_346=(_346&&_345&&_345.codedValues&&_345.codedValues.length)?(_345.codedValues[_346]?_345.codedValues[_346].name:_346):_346;if(!_2e2.isDefined(_346)){_346="";}if(node.declaredClass==="dijit.form.DateTextBox"){_346=(_346==="")?null:new Date(_346);}else{if(node.declaredClass==="dijit.form.FilteringSelect"){node._lastValueReported=null;_346=_341[_342.name]+"";}}try{this._setValue(node,_346);if(node.declaredClass==="dijit.form.FilteringSelect"&&node.isValid()===false){this._setValue(node,null);}}catch(error){node.set("displayedValue",this.NLS_errorInvalid,false);}},this);if(this._attachmentEditor&&_340.showAttachments){this._attachmentEditor.showAttachments(this._currentFeature);}var _347=_33e.getEditSummary(_33c);if(_347){this.editorTrackingInfoDiv.innerHTML=_347;_2e3.show(this.editorTrackingInfoDiv);}else{_2e3.hide(this.editorTrackingInfoDiv);}},_setFieldDomain:function(node,type,_348){if(!node){return null;}var _349=_348.domain;if(type&&type.domains){if(type.domains[_348.name]&&type.domains[_348.name] instanceof _2e4===false){_349=type.domains[_348.name];}}if(!_349){return null;}if(_349.codedValues&&_349.codedValues.length>0){node.set("store",this._toStore(_2db.map(_349.codedValues,function(item){return {id:item.code+="",name:item.name};})));this._setValue(node,_349.codedValues[0].code);}else{node.constraints={min:_2e2.isDefined(_349.minValue)?_349.minValue:Number.MIN_VALUE,max:_2e2.isDefined(_349.maxValue)?_349.maxValue:Number.MAX_VALUE};this._setValue(node,node.constraints.min);}return _349;},_setValue:function(node,_34a){if(!node.set){return;}node._onChangeActive=false;node.set("value",_34a,true);node._onChangeActive=true;},_getFields:function(_34b){var _34c=_34b._getOutFields();if(!_34c){return null;}var _34d=_34b.fields;return (_34c=="*")?_34d:_2db.filter(_2db.map(_34c,lang.hitch(this,"_findFirst",_34d,"name")),_2e2.isDefined);},_isInFields:function(_34e,_34f){if(!_34e||!_34f&&!_34f.length){return false;}return _2db.some(_34f,function(name){return name.toLowerCase()===_34e.toLowerCase();});},_findFirst:function(_350,_351,_352){var _353=_2db.filter(_350,function(item){return item.hasOwnProperty(_351)&&item[_351]===_352;});return (_353&&_353.length)?_353[0]:null;},_getLInfoFromFeatureLayer:function(_354){var _355=_354?_354.id:null;return this._findFirst(this._layerInfos,"layerId",_355);},_createTable:function(){this._destroyAttributeTable();this.attributeTable.innerHTML="";this._attributes=_2e0.create("table",{cellspacing:"0",cellpadding:"0"},this.attributeTable);var _356=_2e0.create("tbody",null,this._attributes);var _357=this._currentFeature;var _358=this._currentLInfo;var type=this._findFirst(_358.types,"id",_357.attributes[_358.typeIdField]);var _359=_358.fieldInfos;_2db.forEach(_359,lang.hitch(this,"_createField",type,_356),this);this._createOnlyFirstTime=false;},_createField:function(type,_35a,_35b){var _35c=this._currentLInfo;var _35d=_35b.field;if(this._isInFields(_35d.name,_35c.hideFields)){return;}if(this._isInFields(_35d.name,this._editorTrackingInfos[_35c.featureLayer.id])){return;}var node=_2e0.create("tr",null,_35a);var td=_2e0.create("td",{innerHTML:_35b.label||_35d.alias||_35d.name,"class":"atiLabel"},node);td=_2e0.create("td",null,node);var _35e=null;var _35f=false;if(_35b.customField){_2e0.place(_35b.customField.domNode||_35b.customField,_2e0.create("div",null,td),"first");_35e=_35b.customField;}else{if(_35c.isEditable===false||_35d.editable===false||_35b.isEditable===false||_35d.type==="esriFieldTypeOID"||_35d.type==="esriFieldTypeGlobalID"||(!this._canUpdate&&!this._createOnlyFirstTime)){_35f=true;}}if(!_35e&&(_35c.typeIdField&&_35d.name.toLowerCase()==_35c.typeIdField.toLowerCase())){_35e=this._createTypeField(_35d,_35b,td);}else{if(!_35e){_35e=this._createDomainField(_35d,_35b,type,td);}}if(!_35e){switch(_35d.type){case "esriFieldTypeString":_35e=this._createStringField(_35d,_35b,td);break;case "esriFieldTypeDate":_35e=this._createDateField(_35d,_35b,td);break;case "esriFieldTypeInteger":case "esriFieldTypeSmallInteger":_35e=this._createIntField(_35d,_35b,td);break;case "esriFieldTypeSingle":case "esriFieldTypeDouble":_35e=this._createFltField(_35d,_35b,td);break;default:_35e=this._createStringField(_35d,_35b,td);break;}}if(_35b.tooltip&&_35b.tooltip.length){this._toolTips.push(new _2f6({connectId:[_35e.id],label:_35b.tooltip}));}_35e.onChange=lang.hitch(this,"onFieldValueChange",_35b);_35e.set("disabled",_35f);_35b.dijit=_35e;},_createTypeField:function(_360,_361,node){return new _2f2({"class":"atiField",name:_360.alias||_360.name,store:this._toStore(_2db.map(this._currentLInfo.types,function(item){return {id:item.id,name:item.name};})),searchAttr:"name"},_2e0.create("div",null,node));},_createDomainField:function(_362,_363,type,node){var _364=_362.domain;if(type&&type.domains){if(type.domains[_362.name]&&type.domains[_362.name] instanceof _2e4===false){_364=type.domains[_362.name];}}if(!_364){return null;}if(_364.codedValues){return new _2f2({"class":"atiField",name:_362.alias||_362.name,searchAttr:"name",required:_362.nullable||false},_2e0.create("div",null,node));}else{return new _2f3({"class":"atiField"},_2e0.create("div",null,node));}},_createStringField:function(_365,_366,node){var _367={"class":"atiField",trim:true,maxLength:_365.length};if(_366.stringFieldOption===ATI.STRING_FIELD_OPTION_TEXTAREA){_367["class"]+=" atiTextAreaField";return new _2f5(_367,_2e0.create("div",null,node));}else{if(_366.stringFieldOption===ATI.STRING_FIELD_OPTION_RICHTEXT){_367["class"]+=" atiRichTextField";_367.height="100%";_367.width="100%";_367.plugins=_366.richTextPlugins||["bold","italic","underline","foreColor","hiliteColor","|","justifyLeft","justifyCenter","justifyRight","justifyFull","|","insertOrderedList","insertUnorderedList","indent","outdent","|","createLink"];return new _2e9(_367,_2e0.create("div",null,node));}else{return new _2f0(_367,_2e0.create("div",null,node));}}},_createDateField:function(_368,_369,node){var _36a={"class":"atiField","trim":true};if(this._datePackage){_36a.datePackage=this._datePackage;}return new _2ef(_36a,_2e0.create("div",null,node));},_createIntField:function(_36b,_36c,node){return new _2f1({"class":"atiField",constraints:{places:0},invalidMessage:this.NLS_validationInt,trim:true},_2e0.create("div",null,node));},_createFltField:function(_36d,_36e,node){return new _2f1({"class":"atiField",trim:true,invalidMessage:this.NLS_validationFlt},_2e0.create("div",null,node));},_toStore:function(_36f){return new _2f7({data:{identifier:"id",label:"name",items:_36f}});},_connect:function(node,evt,func){this._aiConnects.push(_2dc.connect(node,evt,func));},_getDatePackage:function(_370){if(_370.datePackage===null){return null;}else{if(_370.datePackage){return _370.datePackage;}else{if(_2de.locale==="ar"){return "dojox.date.islamic";}}}return null;},_destroyAttributeTable:function(){var _371=this._layerInfos;_2db.forEach(_371,function(_372){var _373=_372.fieldInfos;_2db.forEach(_373,function(_374){var _375=_374.dijit;if(_375){_375._onChangeHandle=null;if(_374.customField){return;}if(_375.destroyRecursive){_375.destroyRecursive();}else{if(_375.destroy){_375.destroy();}}}_374.dijit=null;},this);},this);var _376=this._toolTips;_2db.forEach(_376,function(item){item.destroy();delete item;});this._toolTips=[];if(this._attributes){_2e0.destroy(this._attributes);}}});lang.mixin(ATI,{STRING_FIELD_OPTION_RICHTEXT:"richtext",STRING_FIELD_OPTION_TEXTAREA:"textarea",STRING_FIELD_OPTION_TEXTBOX:"textbox"});if(has("extend-esri")){lang.setObject("dijit.AttributeInspector",ATI,_2e1);}return ATI;});},"dijit/Destroyable":function(){define("dijit/Destroyable",["dojo/_base/array","dojo/aspect","dojo/_base/declare"],function(_377,_378,_379){return _379("dijit.Destroyable",null,{destroy:function(_37a){this._destroyed=true;},own:function(){_377.forEach(arguments,function(_37b){var _37c="destroyRecursive" in _37b?"destroyRecursive":"destroy" in _37b?"destroy":"remove";var odh=_378.before(this,"destroy",function(_37d){_37b[_37c](_37d);});var hdh=_378.after(_37b,_37c,function(){odh.remove();hdh.remove();},true);},this);return arguments;}});});},"dojox/date/islamic/locale":function(){define("dojox/date/islamic/locale",["../..","dojo/_base/lang","dojo/_base/array","dojo/date","dojo/i18n","dojo/regexp","dojo/string","./Date","dojo/i18n!dojo/cldr/nls/islamic"],function(_37e,lang,arr,dd,i18n,_37f,_380,_381,_382){var _383=lang.getObject("date.islamic.locale",true,_37e);function _384(_385,_386,_387,_388,_389){return _389.replace(/([a-z])\1*/ig,function(_38a){var s,pad;var c=_38a.charAt(0);var l=_38a.length;var _38b=["abbr","wide","narrow"];switch(c){case "G":s=_386["eraAbbr"][0];break;case "y":s=String(_385.getFullYear());break;case "M":var m=_385.getMonth();if(l<3){s=m+1;pad=true;}else{var _38c=["months","format",_38b[l-3]].join("-");s=_386[_38c][m];}break;case "d":s=_385.getDate(true);pad=true;break;case "E":var d=_385.getDay();if(l<3){s=d+1;pad=true;}else{var _38d=["days","format",_38b[l-3]].join("-");s=_386[_38d][d];}break;case "a":var _38e=(_385.getHours()<12)?"am":"pm";s=_386["dayPeriods-format-wide-"+_38e];break;case "h":case "H":case "K":case "k":var h=_385.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_385.getMinutes();pad=true;break;case "s":s=_385.getSeconds();pad=true;break;case "S":s=Math.round(_385.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "z":s=dd.getTimezoneName(_385.toGregorian());if(s){break;}l=4;case "Z":var _38f=_385.toGregorian().getTimezoneOffset();var tz=[(_38f<=0?"+":"-"),_380.pad(Math.floor(Math.abs(_38f)/60),2),_380.pad(Math.abs(_38f)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojox.date.islamic.locale.formatPattern: invalid pattern char: "+_389);}if(pad){s=_380.pad(s,l);}return s;});};_383.format=function(_390,_391){_391=_391||{};var _392=i18n.normalizeLocale(_391.locale);var _393=_391.formatLength||"short";var _394=_383._getIslamicBundle(_392);var str=[];var _395=lang.hitch(this,_384,_390,_394,_392,_391.fullYear);if(_391.selector=="year"){var year=_390.getFullYear();return year;}if(_391.selector!="time"){var _396=_391.datePattern||_394["dateFormat-"+_393];if(_396){str.push(_397(_396,_395));}}if(_391.selector!="date"){var _398=_391.timePattern||_394["timeFormat-"+_393];if(_398){str.push(_397(_398,_395));}}var _399=str.join(" ");return _399;};_383.regexp=function(_39a){return _383._parseInfo(_39a).regexp;};_383._parseInfo=function(_39b){_39b=_39b||{};var _39c=i18n.normalizeLocale(_39b.locale);var _39d=_383._getIslamicBundle(_39c);var _39e=_39b.formatLength||"short";var _39f=_39b.datePattern||_39d["dateFormat-"+_39e];var _3a0=_39b.timePattern||_39d["timeFormat-"+_39e];var _3a1;if(_39b.selector=="date"){_3a1=_39f;}else{if(_39b.selector=="time"){_3a1=_3a0;}else{_3a1=(typeof (_3a0)=="undefined")?_39f:_39f+" "+_3a0;}}var _3a2=[];var re=_397(_3a1,lang.hitch(this,_3a3,_3a2,_39d,_39b));return {regexp:re,tokens:_3a2,bundle:_39d};};_383.parse=function(_3a4,_3a5){_3a4=_3a4.replace(/[\u200E\u200F\u202A\u202E]/g,"");if(!_3a5){_3a5={};}var info=_383._parseInfo(_3a5);var _3a6=info.tokens,_382=info.bundle;var _3a7=info.regexp.replace(/[\u200E\u200F\u202A\u202E]/g,"");var re=new RegExp("^"+_3a7+"$");var _3a8=re.exec(_3a4);var _3a9=i18n.normalizeLocale(_3a5.locale);if(!_3a8){return null;}var date,_3aa;var _3ab=[1389,0,1,0,0,0,0];var amPm="";var _3ac=0;var _3ad=["abbr","wide","narrow"];var _3ae=arr.every(_3a8,function(v,i){if(!i){return true;}var _3af=_3a6[i-1];var l=_3af.length;switch(_3af.charAt(0)){case "y":_3ab[0]=Number(v);break;case "M":if(l>2){var _3b0=_382["months-format-"+_3ad[l-3]].concat();if(!_3a5.strict){v=v.replace(".","").toLowerCase();_3b0=arr.map(_3b0,function(s){return s?s.replace(".","").toLowerCase():s;});}v=arr.indexOf(_3b0,v);if(v==-1){return false;}_3ac=l;}else{v--;}_3ab[1]=Number(v);break;case "D":_3ab[1]=0;case "d":_3ab[2]=Number(v);break;case "a":var am=_3a5.am||_382["dayPeriods-format-wide-am"],pm=_3a5.pm||_382["dayPeriods-format-wide-pm"];if(!_3a5.strict){var _3b1=/\./g;v=v.replace(_3b1,"").toLowerCase();am=am.replace(_3b1,"").toLowerCase();pm=pm.replace(_3b1,"").toLowerCase();}if(_3a5.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":_3ab[3]=Number(v);break;case "m":_3ab[4]=Number(v);break;case "s":_3ab[5]=Number(v);break;case "S":_3ab[6]=Number(v);}return true;});var _3b2=+_3ab[3];if(amPm==="p"&&_3b2<12){_3ab[3]=_3b2+12;}else{if(amPm==="a"&&_3b2==12){_3ab[3]=0;}}var _3b3=new _381(_3ab[0],_3ab[1],_3ab[2],_3ab[3],_3ab[4],_3ab[5],_3ab[6]);return _3b3;};function _397(_3b4,_3b5,_3b6,_3b7){var _3b8=function(x){return x;};_3b5=_3b5||_3b8;_3b6=_3b6||_3b8;_3b7=_3b7||_3b8;var _3b9=_3b4.match(/(''|[^'])+/g);var _3ba=_3b4.charAt(0)=="'";arr.forEach(_3b9,function(_3bb,i){if(!_3bb){_3b9[i]="";}else{_3b9[i]=(_3ba?_3b6:_3b5)(_3bb);_3ba=!_3ba;}});return _3b7(_3b9.join(""));};function _3a3(_3bc,_3bd,_3be,_3bf){_3bf=_37f.escapeString(_3bf);var _3c0=i18n.normalizeLocale(_3be.locale);return _3bf.replace(/([a-z])\1*/ig,function(_3c1){var s;var c=_3c1.charAt(0);var l=_3c1.length;var p2="",p3="";if(_3be.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d+";break;case "M":s=(l>2)?"\\S+ ?\\S+":p2+"[1-9]|1[0-2]";break;case "d":s="[12]\\d|"+p2+"[1-9]|3[01]";break;case "E":s="\\S+";break;case "h":s=p2+"[1-9]|1[0-2]";break;case "k":s=p2+"\\d|1[01]";break;case "H":s=p2+"\\d|1\\d|2[0-3]";break;case "K":s=p2+"[1-9]|1\\d|2[0-4]";break;case "m":case "s":s=p2+"\\d|[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_3be.am||_3bd["dayPeriods-format-wide-am"],pm=_3be.pm||_3bd["dayPeriods-format-wide-pm"];if(_3be.strict){s=am+"|"+pm;}else{s=am+"|"+pm;if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}}break;default:s=".*";}if(_3bc){_3bc.push(_3c1);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};var _3c2=[];_383.addCustomFormats=function(_3c3,_3c4){_3c2.push({pkg:_3c3,name:_3c4});};_383._getIslamicBundle=function(_3c5){var _3c6={};arr.forEach(_3c2,function(desc){var _3c7=i18n.getLocalization(desc.pkg,desc.name,_3c5);_3c6=lang.mixin(_3c6,_3c7);},this);return _3c6;};_383.addCustomFormats("dojo.cldr","islamic");_383.getNames=function(item,type,_3c8,_3c9,date){var _3ca;var _3cb=_383._getIslamicBundle(_3c9);var _3cc=[item,_3c8,type];if(_3c8=="standAlone"){var key=_3cc.join("-");_3ca=_3cb[key];if(_3ca[0]==1){_3ca=undefined;}}_3cc[1]="format";return (_3ca||_3cb[_3cc.join("-")]).concat();};_383.weekDays=_383.getNames("days","wide","format");_383.months=_383.getNames("months","wide","format");return _383;});},"esri/layers/FeatureLayer":function(){define("esri/layers/FeatureLayer",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/_base/json","dojo/_base/Deferred","dojo/date/locale","dojo/sniff","dojo/io-query","dojo/dom-construct","dojo/i18n","esri/kernel","esri/lang","esri/request","esri/deferredUtils","esri/SpatialReference","esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/symbols/jsonUtils","esri/renderers/SimpleRenderer","esri/renderers/UniqueValueRenderer","esri/renderers/jsonUtils","esri/tasks/QueryTask","esri/tasks/query","esri/tasks/FeatureSet","esri/geometry/Extent","esri/geometry/jsonUtils","esri/geometry/normalizeUtils","esri/layers/GraphicsLayer","esri/layers/Field","esri/layers/TimeInfo","esri/layers/FeatureType","esri/layers/FeatureTemplate","esri/layers/FeatureEditResult","esri/layers/SnapshotMode","esri/layers/OnDemandMode","esri/layers/SelectionMode","esri/layers/TrackManager","dojo/i18n!esri/nls/jsapi","dojo/has!extend-esri?esri/layers/agscommon"],function(_3cd,_3ce,lang,_3cf,_3d0,_3d1,_3d2,has,ioq,_3d3,i18n,_3d4,_3d5,_3d6,_3d7,_3d8,_3d9,_3da,_3db,_3dc,_3dd,_3de,_3df,_3e0,_3e1,_3e2,_3e3,_3e4,_3e5,_3e6,_3e7,_3e8,_3e9,_3ea,_3eb,_3ec,_3ed,_3ee,_3ef){var _3f0=_3cd(_3e6,{declaredClass:"esri.layers.FeatureLayer",invalidParams:"query contains one or more unsupported parameters",_eventMap:{"add-attachment-complete":["result"],"before-apply-edits":["adds","updates","deletes"],"delete-attachments-complete":["results"],"edits-complete":["adds","updates","deletes"],"query-attachment-infos-complete":["results"],"query-count-complete":["count"],"query-features-complete":["featureSet"],"query-ids-complete":["objectIds"],"query-related-features-complete":["featureSets"],"selection-complete":["features","method"],"update-end":["error","info"]},constructor:function(url,_3f1){this.i18n=i18n.getLocalization("esri","jsapi");this._outFields=_3f1&&_3f1.outFields;this._loadCallback=_3f1&&_3f1.loadCallback;var _3f2=_3f1&&_3f1._usePatch;this._usePatch=(_3f2===null||_3f2===undefined)?true:_3f2;this._trackIdField=_3f1&&_3f1.trackIdField;this.objectIdField=_3f1&&_3f1.objectIdField;this._maxOffset=_3f1&&_3f1.maxAllowableOffset;this._optEditable=_3f1&&_3f1.editable;this._optAutoGen=_3f1&&_3f1.autoGeneralize;this.editSummaryCallback=_3f1&&_3f1.editSummaryCallback;this.userId=_3f1&&_3f1.userId;this.userIsAdmin=_3f1&&_3f1.userIsAdmin;this.useMapTime=(_3f1&&_3f1.hasOwnProperty("useMapTime"))?(!!_3f1.useMapTime):true;this.source=_3f1&&_3f1.source;this.gdbVersion=_3f1&&_3f1.gdbVersion;this._selectedFeatures={};this._selectedFeaturesArr=[];this._newFeatures=[];this._deletedFeatures={};this._ulid=this._getUniqueId();var ctor=this.constructor,mode=this.mode=(_3d5.isDefined(_3f1&&_3f1.mode)?_3f1.mode:ctor.MODE_ONDEMAND);switch(mode){case ctor.MODE_SNAPSHOT:this._mode=new _3ec(this);this._isSnapshot=true;break;case ctor.MODE_ONDEMAND:this._tileWidth=(_3f1&&_3f1.tileWidth)||512;this._tileHeight=(_3f1&&_3f1.tileHeight)||512;this._mode=new _3ed(this);var _3f3=_3f1&&_3f1.latticeTiling;this.latticeTiling=_3f3;break;case ctor.MODE_SELECTION:this._mode=new _3ee(this);this._isSelOnly=true;break;}this._initLayer=lang.hitch(this,this._initLayer);this._selectHandler=lang.hitch(this,this._selectHandler);this._editable=false;if(lang.isObject(url)&&url.layerDefinition){var json=url;this._collection=true;this.mode=ctor.MODE_SNAPSHOT;this._initLayer(json);return this;}this._task=new _3e0(this.url,{source:this.source,gdbVersion:this.gdbVersion});var _3f4=this._url.path;this._fserver=false;if(_3f4.search(/\/FeatureServer\//i)!==-1){this._fserver=true;}var _3f5=_3f1&&_3f1.resourceInfo;if(_3f5){this._initLayer(_3f5);}else{if(this.source){var _3f6={source:this.source.toJson()};this._url.query=lang.mixin(this._url.query,{layer:_3d0.toJson(_3f6)});}if(this.gdbVersion){this._url.query=lang.mixin(this._url.query,{gdbVersion:this.gdbVersion});}_3d6({url:_3f4,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:this._initLayer,error:this._errorHandler});}this.registerConnectEvents();},_initLayer:function(_3f7,io){if(_3f7||io){this._json=_3f7;this._findCredential();var ssl=(this.credential&&this.credential.ssl)||(_3f7&&_3f7._ssl);if(ssl){this._useSSL();this._task._useSSL();}if(this._collection){this._mode=new _3ec(this);this._isSnapshot=true;this._featureSet=_3f7.featureSet;this._nextId=_3f7.nextObjectId;_3f7=_3f7.layerDefinition;}if(_3f7.hasOwnProperty("capabilities")){var _3f8=(this.capabilities=_3f7.capabilities);if(_3f8&&_3f8.toLowerCase().indexOf("editing")!==-1){this._editable=true;}else{this._editable=false;}}else{if(!this._collection){this._editable=this._fserver;}}if(_3d5.isDefined(this._optEditable)){this._editable=this._optEditable;delete this._optEditable;}this._json=_3d0.toJson(this._json);if(this.isEditable()){delete this._maxOffset;}else{if(this.mode!==this.constructor.MODE_SNAPSHOT&&((_3f7.geometryType==="esriGeometryPolyline")||(_3f7.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_3d5.isDefined(this._optAutoGen)?this._optAutoGen:(this.mode===this.constructor.MODE_ONDEMAND);delete this._optAutoGen;}}var _3f9=_3f7.effectiveMinScale||_3f7.minScale,_3fa=_3f7.effectiveMaxScale||_3f7.maxScale;if(!this._hasMin&&_3f9){this.setMinScale(_3f9);}if(!this._hasMax&&_3fa){this.setMaxScale(_3fa);}this.layerId=_3f7.id;this.name=_3f7.name;this.description=_3f7.description;this.copyright=_3f7.copyrightText;this.type=_3f7.type;this.geometryType=_3f7.geometryType;this.displayField=_3f7.displayField;this.defaultDefinitionExpression=_3f7.definitionExpression;this.fullExtent=new _3e3(_3f7.extent);this.initialExtent=new _3e3(this.fullExtent.toJson());if(this.fullExtent.spatialReference){this.spatialReference=new _3d8(this.fullExtent.spatialReference.toJson());}this.defaultVisibility=_3f7.defaultVisibility;if((this.geometryType==="esriGeometryPoint")||(this.geometryType==="esriGeometryMultipoint")){this.latticeTiling=false;}this.indexedFields=_3f7.indexedFields;this.maxRecordCount=_3f7.maxRecordCount;this.canModifyLayer=_3f7.canModifyLayer;this.supportsStatistics=_3f7.supportsStatistics;this.supportsAdvancedQueries=_3f7.supportsAdvancedQueries;this.hasLabels=_3f7.hasLabels;this.canScaleSymbols=_3f7.canScaleSymbols;this.supportsRollbackOnFailure=_3f7.supportsRollbackOnFailure;this.syncCanReturnChanges=_3f7.syncCanReturnChanges;this.isDataVersioned=_3f7.isDataVersioned;this.editFieldsInfo=_3f7.editFieldsInfo;this.ownershipBasedAccessControlForFeatures=_3f7.ownershipBasedAccessControlForFeatures;if(this.editFieldsInfo&&this.ownershipBasedAccessControlForFeatures){this.creatorField=this.editFieldsInfo.creatorField;}this.relationships=_3f7.relationships;this.allowGeometryUpdates=_3d5.isDefined(_3f7.allowGeometryUpdates)?_3f7.allowGeometryUpdates:true;this._isTable=(this.type==="Table");var _3fb=(this.fields=[]),_3fc=_3f7.fields,i;for(i=0;i<_3fc.length;i++){_3fb.push(new _3e7(_3fc[i]));}if(!this.objectIdField){this.objectIdField=_3f7.objectIdField;if(!this.objectIdField){_3fc=_3f7.fields;for(i=0;i<_3fc.length;i++){var _3fd=_3fc[i];if(_3fd.type==="esriFieldTypeOID"){this.objectIdField=_3fd.name;break;}}}if(!this.objectIdField){console.debug("esri.layers.FeatureLayer: "+_3d5.substitute({url:this.url},"objectIdField is not set [url: ${url}]"));}}if(!_3d5.isDefined(this._nextId)){var _3fe=this.objectIdField,_3ff=-1;if(this._collection&&_3fe){var fset=this._featureSet,_400=fset&&fset.features,il=_400?_400.length:0,oid,attr;for(i=0;i<il;i++){attr=_400[i].attributes;oid=attr&&attr[_3fe];if(oid>_3ff){_3ff=oid;}}}this._nextId=(_3ff+1);}this.globalIdField=_3f7.globalIdField;var _401=(this.typeIdField=_3f7.typeIdField),_402;if(_401){_402=!this._getField(_401)&&this._getField(_401,true);if(_402){this.typeIdField=_402.name;}}this.visibilityField=_3f7.visibilityField;var _403=_3f7.defaultSymbol;if(_403){this.defaultSymbol=_3dc.fromJson(_403);}var _404=this.types=[],_405=_3f7.types,_406,_407,_408,_409=this.editFieldsInfo,_40a=_409&&_409.creatorField,_40b=_409&&_409.editorField,fix=(_40a||_40b),_40c=[];if(_405){for(i=0;i<_405.length;i++){_406=new _3e9(_405[i]);_407=_406.templates;if(fix&&_407&&_407.length){_40c=_40c.concat(_407);}_404.push(_406);}}var _40d=_3f7.templates,_40e,_40f=this.templates=[];if(_40d){for(i=0;i<_40d.length;i++){_40e=new _3ea(_40d[i]);if(fix){_40c.push(_40e);}_40f.push(_40e);}}for(i=0;i<_40c.length;i++){_408=lang.getObject("prototype.attributes",false,_40c[i]);if(_408){if(_40a){delete _408[_40a];}if(_40b){delete _408[_40b];}}}var _410=_3f7.timeInfo;if(_410){this.timeInfo=new _3e8(_410);this._startTimeField=_410.startTimeField;this._endTimeField=_410.endTimeField;if(this._startTimeField&&this._endTimeField){this._twoTimeFields=true;}if(this._trackIdField){_410.trackIdField=this._trackIdField;}else{this._trackIdField=_410.trackIdField;}}this.hasAttachments=(!this._collection&&_3f7.hasAttachments)?true:false;this.htmlPopupType=_3f7.htmlPopupType;var _411=_3f7.drawingInfo,_412;if(!this.renderer){if(_411&&_411.renderer){_412=_411.renderer;this.setRenderer(_3df.fromJson(_412));if(_412.type==="classBreaks"){this.renderer.setMaxInclusive(true);}if(!this._collection){var _413=_412.type,_414=[];_412=this.renderer;switch(_413){case "simple":_414.push(_412.symbol);break;case "uniqueValue":case "classBreaks":_414.push(_412.defaultSymbol);_414=_414.concat(_3cf.map(_412.infos,function(info){return info.symbol;}));break;}_414=_3cf.filter(_414,_3d5.isDefined);var _415=this._url.path+"/images/",_416=this._getToken();_3cf.forEach(_414,function(sym){var url=sym.url;if(url){if((url.search(/https?\:/)===-1)&&(url.indexOf("data:")===-1)){sym.url=_415+url;}if(_416&&sym.url.search(/https?\:/)!==-1){sym.url+=("?token="+_416);}}});}}else{if(_403){_405=this.types;if(_405.length>0){_412=new _3de(this.defaultSymbol,this.typeIdField);_3cf.forEach(_405,function(type){_412.addValue(type.id,type.symbol);});}else{_412=new _3dd(this.defaultSymbol);}this.setRenderer(_412);}else{if(!this._isTable){var _417;switch(this.geometryType){case "esriGeometryPoint":case "esriGeometryMultipoint":_417=new _3d9();break;case "esriGeometryPolyline":_417=new _3da();break;case "esriGeometryPolygon":_417=new _3db();break;}this.setRenderer(_417?new _3dd(_417):null);}}}}var _418=(_411&&_411.transparency)||0;if(!_3d5.isDefined(this.opacity)&&_418>0){this.opacity=1-(_418/100);}this.version=_3f7.currentVersion;if(!this.version){var ver;if("capabilities" in _3f7||"drawingInfo" in _3f7||"hasAttachments" in _3f7||"htmlPopupType" in _3f7||"relationships" in _3f7||"timeInfo" in _3f7||"typeIdField" in _3f7||"types" in _3f7){ver=10;}else{ver=9.3;}this.version=ver;}if((has("ie")||has("safari"))&&this.isEditable()&&this.version<10.02){this._ts=true;}this.loaded=true;this._fixRendererFields();this._checkFields();this._updateCaps();var _419=function(){this.onLoad(this);var _41a=this._loadCallback;if(_41a){delete this._loadCallback;_41a(this);}};if(this._collection){this._fireUpdateStart();var _41b=this._featureSet;delete this._featureSet;this._mode._drawFeatures(new _3e2(_41b));this._fcAdded=true;_419.call(this);}else{this._forceIdentity(_419);}}},setRenderer:function(ren){this.inherited("setRenderer",arguments);var _41c=this.renderer;if(_41c){this._ager=(_41c.declaredClass.indexOf("TemporalRenderer")!==-1&&_41c.observationAger&&_41c.observationRenderer);var _41d=_3cf.filter([_41c,_41c.observationRenderer,_41c.latestObservationRenderer,_41c.trackRenderer],_3d5.isDefined);var _41e=[];_3cf.forEach(_41d,function(rnd){if(!lang.isFunction(rnd.attributeField)){_41e.push(rnd.attributeField);}_41e.push(rnd.attributeField2);_41e.push(rnd.attributeField3);},this);this._rendererFields=_3cf.filter(_41e,_3d5.isDefined);}else{this._ager=false;this._rendererFields=[];}if(this.loaded&&this._rendererFields.length>0){this._fixRendererFields();this._checkFields(this._rendererFields);}if(this.loaded&&this._collection){this._typesDirty=true;}},_setMap:function(map){var div=this.inherited(arguments),mode=this._mode;if(mode){mode.initialize(map);}return div;},_unsetMap:function(map){var mode=this._mode;if(mode){mode.suspend();}if(this._trackManager){this._trackManager.destroy();this._trackManager=null;}_3ce.disconnect(this._zoomConnect);this._zoomConnect=null;this._toggleTime(false);this.inherited("_unsetMap",arguments);},refresh:function(){var mode=this._mode;if(mode){mode.refresh();}},getOutFields:function(){return _3cf.filter(this._getOutFields(),function(_41f){return (_41f==="*"||!!this._getField(_41f));},this);},setEditable:function(_420){if(!this._collection){console.log("FeatureLayer:setEditable - this functionality is not yet supported for layer in a feature service");return this;}if(!this.loaded){this._optEditable=_420;return this;}var _421=this._editable;this._editable=_420;this._updateCaps();if(_421!==_420){this.onCapabilitiesChange();}return this;},getEditCapabilities:function(_422){var _423={"canCreate":false,"canUpdate":false,"canDelete":false};if(!this.loaded||!this.isEditable()){return _423;}var _424=_422&&_422.feature,_425=_422&&_422.userId,caps=_3cf.map((this.capabilities?this.capabilities.toLowerCase().split(","):[]),lang.trim),_426=_3cf.indexOf(caps,"editing")>-1,_427=_426&&(_3cf.indexOf(caps,"create")>-1),_428=_426&&(_3cf.indexOf(caps,"update")>-1),_429=_426&&(_3cf.indexOf(caps,"delete")>-1),_42a=this.ownershipBasedAccessControlForFeatures,_42b=this.editFieldsInfo,_42c=_42b&&_42b.creatorField,_42d=_42b&&_42b.realm,_42e=_424&&_424.attributes,_42f=(_42e&&_42c)?_42e[_42c]:undefined,_430,_431=!!this.userIsAdmin,_432=!_42a||_431||!!(_42a.allowOthersToUpdate||_42a.allowUpdateToOthers),_433=!_42a||_431||!!(_42a.allowOthersToDelete||_42a.allowDeleteToOthers);if(_431||(_426&&!(_427||_428||_429))){_427=_428=_429=true;}_430={"canCreate":_427,"canUpdate":_428,"canDelete":_429};if(_42f===null){_430.canUpdate=_428&&_432;_430.canDelete=_429&&_433;}else{if(_42f===""){return _430;}else{if(_42f){_425=_425||this.getUserId();if(_425&&_42d){_425=_425+"@"+_42d;}if(_425.toLowerCase()===_42f.toLowerCase()){return _430;}else{_430.canUpdate=_428&&_432;_430.canDelete=_429&&_433;}}}}return _430;},getUserId:function(){var _434;if(this.loaded){_434=(this.credential&&this.credential.userId)||this.userId||"";}return _434;},setUserIsAdmin:function(_435){this.userIsAdmin=_435;},setEditSummaryCallback:function(_436){this.editSummaryCallback=_436;},getEditSummary:function(_437,_438,_439){_439=_3d5.isDefined(_439)?_439:(new Date()).getTime();var _43a="",info=this.getEditInfo(_437,_438,_439),_43b=(_438&&_438.callback)||this.editSummaryCallback;if(_43b){info=_43b(_437,info)||"";}if(lang.isString(info)){_43a=info;}else{if(info){var _43c=info.action,_43d=info.userId,_43e=info.timeValue,_43f=0;if(_43c){_43f++;}if(_43d){_43f++;}if(_3d5.isDefined(_43e)){_43f++;}if(_43f>1){_43a=(_43c==="edit"?"edit":"create")+(_43d?"User":"")+(_3d5.isDefined(_43e)?info.displayPattern:"");}}_43a=_43a&&_3d5.substitute(info,this.i18n.layers.FeatureLayer[_43a]);}return _43a;},getEditInfo:function(_440,_441,_442){if(!this.loaded){return;}_442=_3d5.isDefined(_442)?_442:(new Date()).getTime();var _443=(_441&&_441.action)||"last",_444=this.editFieldsInfo,_445=_444&&_444.creatorField,_446=_444&&_444.creationDateField,_447=_444&&_444.editorField,_448=_444&&_444.editDateField,_449=_444&&_444.realm,_44a=_440&&_440.attributes,_44b=(_44a&&_445)?_44a[_445]:undefined,_44c=(_44a&&_446)?_44a[_446]:null,_44d=(_44a&&_447)?_44a[_447]:undefined,_44e=(_44a&&_448)?_44a[_448]:null,_44f=this._getEditData(_44b,_44c,_442),_450=this._getEditData(_44d,_44e,_442),_451;switch(_443){case "creation":_451=_44f;break;case "edit":_451=_450;break;case "last":_451=_450||_44f;break;}if(_451){_451.action=(_451===_450)?"edit":"creation";}return _451;},_getEditData:function(_452,_453,_454){var data,_455,_456,_457=60000,_458=3600000,_459=2*_458,_45a=24*_458,_45b=7*_45a;if(_3d5.isDefined(_453)){_455=_454-_453;if(_455<0){_456="Full";}else{if(_455<_457){_456="Seconds";}else{if(_455<(2*_457)){_456="Minute";}else{if(_455<_458){_456="Minutes";}else{if(_455<_459){_456="Hour";}else{if(_455<_45a){_456="Hours";}else{if(_455<_45b){_456="WeekDay";}else{_456="Full";}}}}}}}}if((_452!==undefined)||_456){data=data||{};data.userId=_452;if(_456){var _45c=_3d2.format,_45d=new Date(_453);data.minutes=Math.floor(_455/_457);data.hours=Math.floor(_455/_458);data.weekDay=_45c(_45d,{datePattern:"EEEE",selector:"date"});data.formattedDate=_45c(_45d,{selector:"date"});data.formattedTime=_45c(_45d,{selector:"time"});data.displayPattern=_456;data.timeValue=_453;}}return data;},isEditable:function(){return !!(this._editable||this.userIsAdmin);},setMaxAllowableOffset:function(_45e){if(!this.isEditable()){this._maxOffset=_45e;}return this;},getMaxAllowableOffset:function(){return this._maxOffset;},setAutoGeneralize:function(_45f){if(!this.loaded){this._optAutoGen=_45f;}else{if(!this.isEditable()&&(this.mode!==this.constructor.MODE_SNAPSHOT)&&((this.geometryType==="esriGeometryPolyline")||(this.geometryType==="esriGeometryPolygon"))){this._autoGeneralize=_45f;if(_45f){var map=this._map;if(map&&map.loaded){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}else{delete this._maxOffset;}}}return this;},setGDBVersion:function(_460){if(!this._collection&&(_460!==this.gdbVersion)&&(_460||this.gdbVersion)){this.gdbVersion=_460;this._task.gdbVersion=_460;this._url.query=lang.mixin(this._url.query,{gdbVersion:_460});if(this.loaded){this.clearSelection();if(this._map){this.refresh();}}this.onGDBVersionChange();}return this;},setDefinitionExpression:function(expr){this._defnExpr=expr;var mode=this._mode;if(mode){mode.propertyChangeHandler(1);}return this;},getDefinitionExpression:function(){return this._defnExpr;},setTimeDefinition:function(_461){if(this._isSnapshot){this._timeDefn=_461;var mode=this._mode;if(mode){mode.propertyChangeHandler(2);}}else{console.log("FeatureLayer.setTimeDefinition: layer in on-demand or selection mode does not support time definitions. Layer id = "+this.id+", Layer URL = "+this.url);}return this;},getTimeDefinition:function(){return this._timeDefn;},setTimeOffset:function(_462,_463){this._timeOffset=_462;this._timeOffsetUnits=_463;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}return this;},setUseMapTime:function(use){this.useMapTime=use;this._toggleTime(!this.suspended);var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},selectFeatures:function(_464,_465,_466,_467){_465=_465||this.constructor.SELECTION_NEW;var _468=this._getShallowClone(_464),map=this._map,_469,dfd=_3d7._fixDfd(new _3d1(_3d7._dfdCanceller));_468.outFields=this.getOutFields();_468.returnGeometry=true;if(map){_468.outSpatialReference=new _3d8(map.spatialReference.toJson());}if(!this._applyQueryFilters(_468)){_469={features:[]};this._selectHandler(_469,_465,_466,_467,dfd);return dfd;}var _46a=this._canDoClientSideQuery(_468);if(_46a){_469={features:this._doQuery(_468,_46a)};this._selectHandler(_469,_465,_466,_467,dfd);return dfd;}else{if(this._collection){var err=new Error("FeatureLayer::selectFeatures - "+this.invalidParams);this._resolve([err],null,_467,dfd,true);return dfd;}var self=this;if(this._ts){_468._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task.execute(_468);temp.addCallbacks(function(_46b){self._selectHandler(_46b,_465,_466,_467,dfd);},function(err){self._resolve([err],null,_467,dfd,true);});return dfd;}},getSelectedFeatures:function(){var _46c=this._selectedFeatures,_46d=[],item;for(item in _46c){if(_46c.hasOwnProperty(item)){_46d.push(_46c[item]);}}return _46d;},clearSelection:function(_46e){var _46f=this._selectedFeatures,mode=this._mode,item;for(item in _46f){if(_46f.hasOwnProperty(item)){this._unSelectFeatureIIf(item,mode);mode._removeFeatureIIf(item);}}this._selectedFeatures={};if(this._isSelOnly){mode._applyTimeFilter(true);}if(!_46e){this.onSelectionClear();}return this;},setSelectionSymbol:function(_470){this._selectionSymbol=_470;if(_470){var _471=this._selectedFeatures,item;for(item in _471){if(_471.hasOwnProperty(item)){_471[item].setSymbol(_470);}}}return this;},getSelectionSymbol:function(){return this._selectionSymbol;},__msigns:[{n:"applyEdits",c:5,a:[{i:0},{i:1}],e:4,f:1}],applyEdits:function(adds,_472,_473,_474,_475,_476){var _477=_476.assembly,dfd=_476.dfd;this._applyNormalized(adds,_477&&_477[0]);this._applyNormalized(_472,_477&&_477[1]);this.onBeforeApplyEdits(adds,_472,_473);var i,_478={},_479=this.objectIdField,_47a={f:"json"},_47b=false;if(this._collection){var _47c={};_47c.addResults=adds?_3cf.map(adds,function(){_47b=true;return {objectId:this._nextId++,success:true};},this):null;_47c.updateResults=_472?_3cf.map(_472,function(_47d){_47b=true;var oid=_47d.attributes[_479];_478[oid]=_47d;return {objectId:oid,success:true};},this):null;_47c.deleteResults=_473?_3cf.map(_473,function(_47e){_47b=true;return {objectId:_47e.attributes[_479],success:true};},this):null;if(_47b){this._editHandler(_47c,adds,_478,_474,_475,dfd);}return;}if(adds&&adds.length>0){_47a.adds=this._convertFeaturesToJson(adds,0,1);_47b=true;}if(_472&&_472.length>0){for(i=0;i<_472.length;i++){var _47f=_472[i];_478[_47f.attributes[_479]]=_47f;}_47a.updates=this._convertFeaturesToJson(_472,0,0,1);_47b=true;}if(_473&&_473.length>0){var ids=[];for(i=0;i<_473.length;i++){ids.push(_473[i].attributes[_479]);}_47a.deletes=ids.join(",");_47b=true;}if(_47b){var self=this;return _3d6({url:this._url.path+"/applyEdits",content:lang.mixin(_47a,this._url.query),callbackParamName:"callback",load:function(_480){self._editHandler(_480,adds,_478,_474,_475,dfd);},error:function(err){self._resolve([err],null,_475,dfd,true);}},{usePost:true});}},queryFeatures:function(_481,_482,_483){return this._query("execute","onQueryFeaturesComplete",_481,_482,_483);},queryRelatedFeatures:function(_484,_485,_486){return this._query("executeRelationshipQuery","onQueryRelatedFeaturesComplete",_484,_485,_486);},queryIds:function(_487,_488,_489){return this._query("executeForIds","onQueryIdsComplete",_487,_488,_489);},queryCount:function(_48a,_48b,_48c){return this._query("executeForCount","onQueryCountComplete",_48a,_48b,_48c);},queryAttachmentInfos:function(_48d,_48e,_48f){var url=this._url.path+"/"+_48d+"/attachments",dfd=new _3d1(_3d7._dfdCanceller),self=this;dfd._pendingDfd=_3d6({url:url,content:lang.mixin({f:"json"},this._url.query),callbackParamName:"callback",load:function(_490){var _491=_490.attachmentInfos,_492;_3cf.forEach(_491,function(info){_492=ioq.objectToQuery({gdbVersion:self._url.query&&self._url.query.gdbVersion,layer:self._url.query&&self._url.query.layer,token:self._getToken()});info.url=url+"/"+info.id+(_492?("?"+_492):"");info.objectId=_48d;});self._resolve([_491],"onQueryAttachmentInfosComplete",_48e,dfd);},error:function(err){self._resolve([err],null,_48f,dfd,true);}});return dfd;},addAttachment:function(_493,_494,_495,_496){return this._sendAttachment("add",_493,_494,_495,_496);},updateAttachment:function(_497,_498,_499,_49a,_49b){_499.appendChild(_3d3.create("input",{type:"hidden",name:"attachmentId",value:_498}));return this._sendAttachment("update",_497,_499,_49a,_49b);},deleteAttachments:function(_49c,_49d,_49e,_49f){var url=this._url.path+"/"+_49c+"/deleteAttachments",dfd=new _3d1(_3d7._dfdCanceller),self=this,_4a0={f:"json",attachmentIds:_49d.join(",")};dfd._pendingDfd=_3d6({url:url,content:lang.mixin(_4a0,this._url.query),callbackParamName:"callback",load:lang.hitch(this,function(_4a1){var _4a2=_4a1.deleteAttachmentResults;_4a2=_3cf.map(_4a2,function(_4a3){var res=new _3eb(_4a3);res.attachmentId=res.objectId;res.objectId=_49c;return res;});self._resolve([_4a2],"onDeleteAttachmentsComplete",_49e,dfd);}),error:function(err){self._resolve([err],null,_49f,dfd,true);}},{usePost:true});return dfd;},addType:function(_4a4){var _4a5=this.types;if(_4a5){var _4a6=_3cf.some(_4a5,function(type){if(type.id==_4a4.id){return true;}return false;});if(_4a6){return false;}else{_4a5.push(_4a4);}}else{this.types=[_4a4];}this._typesDirty=true;return true;},deleteType:function(_4a7){if(!this._collection){return;}var _4a8=this.types;if(_4a8){var _4a9=-1;_3cf.some(_4a8,function(type,_4aa){if(type.id==_4a7){_4a9=_4aa;return true;}return false;});if(_4a9>-1){this._typesDirty=true;return _4a8.splice(_4a9,1)[0];}}},toJson:function(){var _4ab=this._json,json=lang.isString(_4ab)?_3d0.fromJson(_4ab):lang.clone(_4ab);if(!json){return;}json=json.layerDefinition?json:{layerDefinition:json};var _4ac=json.layerDefinition,_4ad=this._collection;if(_4ad&&this._typesDirty){_4ac.types=_3cf.map(this.types||[],function(type){return type.toJson();});var _4ae=this.renderer,_4af=_4ac.drawingInfo;if(_4af&&_4ae&&_4ae.declaredClass.indexOf("TemporalRenderer")===-1){_4af.renderer=_4ae.toJson();}}var _4b0=null;if(!(_4ad&&!this._fcAdded)){_4b0={geometryType:_4ac.geometryType,features:this._convertFeaturesToJson(this.graphics,true)};}json.featureSet=lang.mixin({},json.featureSet||{},_4b0);if(_4ad){json.nextObjectId=this._nextId;_4ac.capabilities=this.capabilities;}return json;},onSelectionComplete:function(){},onSelectionClear:function(){},onBeforeApplyEdits:function(){},onEditsComplete:function(){},onQueryFeaturesComplete:function(){},onQueryRelatedFeaturesComplete:function(){},onQueryIdsComplete:function(){},onQueryCountComplete:function(){},onQueryAttachmentInfosComplete:function(){},onAddAttachmentComplete:function(){},onUpdateAttachmentComplete:function(){},onDeleteAttachmentsComplete:function(){},onCapabilitiesChange:function(){},onGDBVersionChange:function(){},onQueryLimitExceeded:function(){},_forceIdentity:function(_4b1){var self=this,path=this._url&&this._url.path;if((this.ownershipBasedAccessControlForFeatures||this.userIsAdmin)&&!this._getToken()&&path&&_3d4.id&&_3d4.id._hasPortalSession()&&_3d4.id._doPortalSignIn(path)){_3d4.id.getCredential(path).then(function(){self._findCredential();_4b1.call(self);},function(){_4b1.call(self);});}else{_4b1.call(this);}},_updateCaps:function(){var _4b2=this._editable,_4b3=lang.trim(this.capabilities||""),_4b4=_3cf.map((_4b3?_4b3.split(","):[]),lang.trim),caps=_3cf.map((_4b3?_4b3.toLowerCase().split(","):[]),lang.trim),_4b5=_3cf.indexOf(caps,"editing"),cap,i,_4b6,_4b7={"Create":_3cf.indexOf(caps,"create"),"Update":_3cf.indexOf(caps,"update"),"Delete":_3cf.indexOf(caps,"delete")};if(_4b2&&_4b5===-1){_4b4.push("Editing");}else{if(!_4b2&&_4b5>-1){_4b6=[_4b5];for(cap in _4b7){if(_4b7[cap]>-1){_4b6.push(_4b7[cap]);}}_4b6.sort();for(i=_4b6.length-1;i>=0;i--){_4b4.splice(_4b6[i],1);}}}this.capabilities=_4b4.join(",");},_counter:{value:0},_getUniqueId:function(){return this._counter.value++;},onSuspend:function(){this.inherited(arguments);this._toggleTime(false);var mode=this._mode;if(mode){mode.suspend();}},onResume:function(evt){this.inherited(arguments);this._toggleTime(true);this._updateMaxOffset();var mode=this._mode,map=this._map,_4b8=this.renderer;if(evt.firstOccurrence){this.clearSelection();if(this.timeInfo){if(this._trackIdField||(_4b8&&(_4b8.latestObservationRenderer||_4b8.trackRenderer))){this._trackManager=new _3ef(this);this._trackManager.initialize(map);}}this._zoomConnect=_3ce.connect(map,"onZoomEnd",this,this._updateMaxOffset);}if(mode){evt.firstOccurrence?mode.startup():mode.resume();}},_updateMaxOffset:function(){var map=this._map;if(map&&map.loaded){if(this._autoGeneralize){this._maxOffset=Math.floor(map.extent.getWidth()/map.width);}}},_toggleTime:function(_4b9){var map=this._map;if(_4b9&&this.timeInfo&&this.useMapTime&&map){this._mapTimeExtent=map.timeExtent;if(!this._timeConnect){this._timeConnect=_3ce.connect(map,"onTimeExtentChange",this,this._timeChangeHandler);}}else{this._mapTimeExtent=null;_3ce.disconnect(this._timeConnect);this._timeConnect=null;}},_timeChangeHandler:function(_4ba){this._mapTimeExtent=_4ba;var mode=this._mode;if(mode){mode.propertyChangeHandler(0);}},_getOffsettedTE:function(_4bb){var _4bc=this._timeOffset,_4bd=this._timeOffsetUnits;return (_4bb&&_4bc&&_4bd)?_4bb.offset(-1*_4bc,_4bd):_4bb;},_getTimeOverlap:function(_4be,_4bf){if(_4be&&_4bf){return _4be.intersection(_4bf);}else{return _4be||_4bf;}},_getTimeFilter:function(_4c0){var _4c1=this.getTimeDefinition(),_4c2=null,_4c3;if(_4c1||_4c2){_4c3=this._getTimeOverlap(_4c1,_4c2);if(!_4c3){return [false];}}if(_4c0){_4c0=_4c3?this._getTimeOverlap(_4c0,_4c3):_4c0;if(!_4c0){return [false];}}else{_4c0=_4c3;}return [true,_4c0];},_getAttributeFilter:function(_4c4){var _4c5=this.getDefinitionExpression();if(_4c4){_4c4=_4c5?"("+_4c5+") AND ("+_4c4+")":_4c4;}else{_4c4=_4c5;}return _4c4;},_applyQueryFilters:function(_4c6){_4c6.where=this._getAttributeFilter(_4c6.where);_4c6.maxAllowableOffset=this._maxOffset;if(this.timeInfo){var _4c7=this._getTimeFilter(_4c6.timeExtent);if(!_4c7[0]){return false;}else{_4c6.timeExtent=_4c7[1];}}return true;},_add:function(_4c8){var _4c9=this._selectionSymbol,attr=_4c8.attributes,_4ca=this.visibilityField;if(_4c9&&this._isSelOnly){_4c8.setSymbol(_4c9);}if(_4ca&&attr&&attr.hasOwnProperty(_4ca)){_4c8[attr[_4ca]?"show":"hide"]();}return this.add.apply(this,arguments);},_remove:function(){return this.remove.apply(this,arguments);},_canDoClientSideQuery:function(_4cb){var _4cc=[],map=this._map;if(this._isTable||!map){return;}if(_4cb.text||(_4cb.where&&_4cb.where!==this.getDefinitionExpression())){return;}var _4cd=this._isSnapshot,_4ce=this._isSelOnly;var _4cf=_4cb.geometry;if(_4cf){if(!_4ce&&_4cb.spatialRelationship===_3e1.SPATIAL_REL_INTERSECTS&&(_4cf.type==="extent"&&(_4cd||map.extent.contains(_4cf)))){_4cc.push(1);}else{return;}}var ids=_4cb.objectIds;if(ids){if(_4cd){_4cc.push(2);}else{var len=ids.length,mode=this._mode,_4d0=0,i;for(i=0;i<len;i++){if(mode._getFeature(ids[i])){_4d0++;}}if(_4d0===len){_4cc.push(2);}else{return;}}}if(this.timeInfo){var _4d1=_4cb.timeExtent,_4d2=this._mapTimeExtent;if(_4cd){if(_4d1){_4cc.push(3);}}else{if(_4ce){if(_4d1){return;}}else{if(_4d2){if(_3cf.indexOf(_4cc,2)!==-1){if(_4d1){_4cc.push(3);}}else{return;}}else{if(_4cc.length>0){if(_4d1){_4cc.push(3);}}else{if(_4d1){return;}}}}}}return _4cc.length>0?_4cc:null;},_doQuery:function(_4d3,_4d4,_4d5){var _4d6=[],mode=this._mode,_4d7=this.objectIdField,i,len,_4d8;if(_3cf.indexOf(_4d4,2)!==-1){_4d6=[];var ids=_4d3.objectIds;len=ids.length;for(i=0;i<len;i++){var obj=mode._getFeature(ids[i]);if(obj){_4d6.push(obj);}}if(_4d6.length===0){return [];}}if(_3cf.indexOf(_4d4,1)!==-1){_4d8=_4d6.length>0?_4d6:this.graphics;len=_4d8.length;var _4d9=_4d3.geometry._normalize(null,true);_4d6=[];for(i=0;i<len;i++){var _4da=_4d8[i],_4db=_4da.geometry;if(_4db){if(this.normalization&&_4d9.length){if(_4d9[0].intersects(_4db)||_4d9[1].intersects(_4db)){_4d6.push(_4da);}}else{if(_4d9.intersects(_4db)){_4d6.push(_4da);}}}}if(_4d6.length===0){return [];}}if(_3cf.indexOf(_4d4,3)!==-1){if(this.timeInfo){_4d8=_4d6.length>0?_4d6:this.graphics;var time=_4d3.timeExtent,_4dc=this._filterByTime(_4d8,time.startTime,time.endTime);_4d6=_4dc.match;}}if(_4d5){return _3cf.map(_4d6,function(obj){return obj.attributes[_4d7];},this);}else{return _4d6;}},_filterByTime:function(_4dd,_4de,_4df){var _4e0=this._startTimeField,_4e1=this._endTimeField,_4e2;if(!this._twoTimeFields){_4e2=_4e0||_4e1;}var _4e3=_3d5.isDefined,yea=[],nay=[],i,len=_4dd.length,_4e4,_4e5;_4de=_4de?_4de.getTime():-Infinity;_4df=_4df?_4df.getTime():Infinity;if(_4e2){for(i=0;i<len;i++){_4e4=_4dd[i];_4e5=_4e4.attributes;var time=_4e5[_4e2];if(time>=_4de&&time<=_4df){yea.push(_4e4);}else{nay.push(_4e4);}}}else{for(i=0;i<len;i++){_4e4=_4dd[i];_4e5=_4e4.attributes;var _4e6=_4e5[_4e0],end=_4e5[_4e1];_4e6=_4e3(_4e6)?_4e6:-Infinity;end=_4e3(end)?end:Infinity;if((_4e6>=_4de&&_4e6<=_4df)||(end>=_4de&&end<=_4df)||(_4de>=_4e6&&_4df<=end)){yea.push(_4e4);}else{nay.push(_4e4);}}}return {match:yea,noMatch:nay};},_resolve:function(args,_4e7,_4e8,dfd,_4e9){if(_4e7){this[_4e7].apply(this,args);}if(_4e8){_4e8.apply(null,args);}if(dfd){_3d7._resDfd(dfd,args,_4e9);}},_getShallowClone:function(_4ea){var _4eb=new _3e1(),prop;for(prop in _4ea){if(_4ea.hasOwnProperty(prop)){_4eb[prop]=_4ea[prop];}}return _4eb;},_query:function(type,_4ec,_4ed,_4ee,_4ef){var that=this,map=this._map,dfd=new _3d1(_3d7._dfdCanceller),_4f0=_4ed;var _4f1=function(_4f2,_4f3){if(!_4f3&&type==="execute"&&!that._isTable){var _4f4=_4f2.features,mode=that._mode,_4f5=that.objectIdField,il=_4f4.length,i;for(i=il-1;i>=0;i--){var oid=_4f4[i].attributes[_4f5];var _4f6=mode._getFeature(oid);if(_4f6){_4f4.splice(i,1,_4f6);}}}that._resolve([_4f2],_4ec,_4ee,dfd);};if(type!=="executeRelationshipQuery"){_4f0=this._getShallowClone(_4ed);_4f0.outFields=this.getOutFields();_4f0.returnGeometry=_4ed.hasOwnProperty("returnGeometry")?_4ed.returnGeometry:true;var _4f7;if(map){_4f0.outSpatialReference=new _3d8(map.spatialReference.toJson());}if(!this._applyQueryFilters(_4f0)){switch(type){case "execute":_4f7=new _3e2({features:[]});break;case "executeForIds":_4f7=[];break;case "executeForCount":_4f7=0;break;}_4f1(_4f7,true);return dfd;}var _4f8=this._canDoClientSideQuery(_4f0);if(_4f8){var _4f9=this._doQuery(_4f0,_4f8,(type==="executeForIds"||type==="executeForCount"));switch(type){case "execute":_4f7=new _3e2();_4f7.features=_4f9;break;case "executeForIds":_4f7=_4f9;break;case "executeForCount":_4f7=_4f9.length;break;}_4f1(_4f7,true);return dfd;}}if(this._collection){var err=new Error("FeatureLayer::_query - "+this.invalidParams);this._resolve([err],null,_4ef,dfd,true);return dfd;}if(this._ts){_4f0._ts=(new Date()).getTime();}var temp=dfd._pendingDfd=this._task[type](_4f0);temp.addCallbacks(_4f1,function(err){that._resolve([err],null,_4ef,dfd,true);});return dfd;},_convertFeaturesToJson:function(_4fa,_4fb,_4fc,_4fd){var json=[],_4fe=this._selectionSymbol,_4ff=this.visibilityField,i,_500,_501=this.objectIdField;if(this.loaded&&(_4fc||_4fd)){_500=_3cf.filter(this.fields,function(_502){return (_502.editable===false)&&(!_4fd||(_502.name!==_501));});}for(i=0;i<_4fa.length;i++){var _503=_4fa[i],_504={},_505=_503.geometry,attr=_503.attributes,_506=_503.symbol;if(_505&&(!_4fd||!this.loaded||this.allowGeometryUpdates)){_504.geometry=_505.toJson();}if(_4ff){_504.attributes=attr=lang.mixin({},attr);attr[_4ff]=_503.visible?1:0;}else{if(attr){_504.attributes=lang.mixin({},attr);}}if(_504.attributes&&_500&&_500.length){_3cf.forEach(_500,function(_507){delete _504.attributes[_507.name];});}if(_506&&(_506!==_4fe)){_504.symbol=_506.toJson();}json.push(_504);}return _4fb?json:_3d0.toJson(json);},_selectHandler:function(_508,_509,_50a,_50b,dfd){var _50c,ctor=this.constructor;switch(_509){case ctor.SELECTION_NEW:this.clearSelection(true);_50c=true;break;case ctor.SELECTION_ADD:_50c=true;break;case ctor.SELECTION_SUBTRACT:_50c=false;break;}var i,_50d=_508.features,mode=this._mode,_50e=[],_50f=this.objectIdField,_510,oid;if(_50c){for(i=0;i<_50d.length;i++){_510=_50d[i];oid=_510.attributes[_50f];var _511=mode._addFeatureIIf(oid,_510);_50e.push(_511);this._selectFeatureIIf(oid,_511,mode);}}else{for(i=0;i<_50d.length;i++){_510=_50d[i];oid=_510.attributes[_50f];this._unSelectFeatureIIf(oid,mode);var _512=mode._removeFeatureIIf(oid);_50e.push(_512||_510);}}if(this._isSelOnly){mode._applyTimeFilter(true);}this._resolve([_50e,_509,_508.exceededTransferLimit?{queryLimitExceeded:true}:null],"onSelectionComplete",_50a,dfd);if(_508.exceededTransferLimit){this.onQueryLimitExceeded();}},_selectFeatureIIf:function(oid,_513,mode){var _514=this._selectedFeatures,_515=_514[oid];if(!_515){mode._incRefCount(oid);_514[oid]=_513;if(!this._isTable){this._setSelectSymbol(_513);}}return _515||_513;},_unSelectFeatureIIf:function(oid,mode){var _516=this._selectedFeatures[oid];if(_516){mode._decRefCount(oid);delete this._selectedFeatures[oid];if(!this._isTable){this._setUnSelectSymbol(_516);}}return _516;},_isSelected:function(_517){},_setSelectSymbol:function(_518){var _519=this._selectionSymbol;if(_519&&!this._isSelOnly){_518.setSymbol(_519);}},_setUnSelectSymbol:function(_51a){var _51b=this._selectionSymbol;if(_51b&&!this._isSelOnly){if(_51b===_51a.symbol){_51a.setSymbol(null,true);}}},_getOutFields:function(){var _51c=_3cf.filter([this.objectIdField,this.typeIdField,this.creatorField,this._startTimeField,this._endTimeField,this._trackIdField].concat(this._rendererFields),function(_51d,_51e,arr){return !!_51d&&(_3cf.indexOf(arr,_51d)===_51e);});var _51f=lang.clone(this._outFields);if(_51f){if(_3cf.indexOf(_51f,"*")!==-1){return _51f;}_3cf.forEach(_51c,function(_520){if(_3cf.indexOf(_51f,_520)===-1){_51f.push(_520);}});return _51f;}else{return _51c;}},_checkFields:function(_521){var _522=_521||this._getOutFields();_3cf.forEach(_522,function(_523){if(_523==="*"){return;}if(!this._getField(_523)){console.debug("esri.layers.FeatureLayer: "+_3d5.substitute({url:this.url,field:_523},"unable to find '${field}' field in the layer 'fields' information [url: ${url}]"));}},this);if(!_521&&!this._isTable&&!this._fserver&&!this._collection){var _524=_3cf.some(this.fields,function(_525){return (_525&&_525.type==="esriFieldTypeGeometry")?true:false;});if(!_524){console.debug("esri.layers.FeatureLayer: "+_3d5.substitute({url:this.url},"unable to find a field of type 'esriFieldTypeGeometry' in the layer 'fields' information. If you are using a map service layer, features will not have geometry [url: ${url}]"));}}},_fixRendererFields:function(){var _526=this.renderer;if(_526&&this.fields.length>0){var _527=_3cf.filter([_526,_526.observationRenderer,_526.latestObservationRenderer,_526.trackRenderer],_3d5.isDefined);var _528=[];_3cf.forEach(_527,function(rnd){var _529,_52a;_52a=rnd.attributeField;if(_52a&&!lang.isFunction(_52a)){_529=!this._getField(_52a)&&this._getField(_52a,true);if(_529){rnd.attributeField=_529.name;}}_52a=rnd.attributeField2;if(_52a){_529=!this._getField(_52a)&&this._getField(_52a,true);if(_529){rnd.attributeField2=_529.name;}}_52a=rnd.attributeField3;if(_52a){_529=!this._getField(_52a)&&this._getField(_52a,true);if(_529){rnd.attributeField3=_529.name;}}if(!lang.isFunction(rnd.attributeField)){_528.push(rnd.attributeField);}_528.push(rnd.attributeField2);_528.push(rnd.attributeField3);},this);this._rendererFields=_3cf.filter(_528,_3d5.isDefined);}},_getField:function(_52b,_52c){var _52d=this.fields;if(!_52d||_52d.length===0){return null;}var _52e;if(_52c){_52b=_52b.toLowerCase();}_3cf.some(_52d,function(_52f){var _530=false;if(_52c){_530=(_52f&&_52f.name.toLowerCase()===_52b)?true:false;}else{_530=(_52f&&_52f.name===_52b)?true:false;}if(_530){_52e=_52f;}return _530;});return _52e;},_getDateOpts:function(){if(!this._dtOpts){var _531=_3cf.map(_3cf.filter(this.fields,function(_532){return !!(_532&&_532.type==="esriFieldTypeDate");}),function(_533){return _533.name;});this._dtOpts={properties:_531};}return this._dtOpts;},_applyNormalized:function(_534,_535){if(_534&&_535){_3cf.forEach(_534,function(_536,_537){if(_536&&_535[_537]){_536.setGeometry(_535[_537]);}});}},_editHandler:function(_538,adds,_539,_53a,_53b,dfd){var _53c=_538.addResults,_53d=_538.updateResults,_53e=_538.deleteResults,i,_53f,oid,_540,attr,_541=this.objectIdField,mode=this._mode,_542=this._isTable;var _543=this.editFieldsInfo,_544=this.getOutFields()||[],_545=_543&&_543.creatorField,_546=_543&&_543.creationDateField,_547=_543&&_543.editorField,_548=_543&&_543.editDateField,_549=_543&&_543.realm;if(_3cf.indexOf(_544,"*")===-1){if(_545&&_3cf.indexOf(_544,_545)===-1){_545=null;}if(_546&&_3cf.indexOf(_544,_546)===-1){_546=null;}if(_547&&_3cf.indexOf(_544,_547)===-1){_547=null;}if(_548&&_3cf.indexOf(_544,_548)===-1){_548=null;}}var _54a=(_546||_548)?(new Date()).getTime():null,_54b=(_545||_547)?this.getUserId():undefined;if(_54b&&_549){_54b=_54b+"@"+_549;}if(_53c){for(i=0;i<_53c.length;i++){_53c[i]=new _3eb(_53c[i]);if(_542){continue;}_53f=_53c[i];if(_53f.success){oid=_53f.objectId;_540=adds[i];var gl=_540._graphicsLayer;if(gl&&gl!==this){gl.remove(_540);}attr=_540.attributes||{};attr[_541]=oid;if(_545){attr[_545]=_54b;}if(_547){attr[_547]=_54b;}if(_546){attr[_546]=_54a;}if(_548){attr[_548]=_54a;}_540.setAttributes(attr);if(mode._init){mode.drawFeature(_540);}}}}if(_53d){for(i=0;i<_53d.length;i++){_53d[i]=new _3eb(_53d[i]);if(_542){continue;}_53f=_53d[i];if(_53f.success){oid=_53f.objectId;_540=_539[oid];var _54c=mode._getFeature(oid);if(_54c){if(_54c.geometry!==_540.geometry){_54c.setGeometry(_3e4.fromJson(_540.geometry.toJson()));}this._repaint(_54c,oid);}_540=_54c||_540;attr=_540.attributes||{};if(_547){attr[_547]=_54b;}if(_548){attr[_548]=_54a;}_540.setAttributes(attr);}}}if(_53e){var _54d=[];for(i=0;i<_53e.length;i++){_53e[i]=new _3eb(_53e[i]);if(_542){continue;}_53f=_53e[i];if(_53f.success){oid=_53f.objectId;_540=mode._getFeature(oid);if(_540){if(this._unSelectFeatureIIf(oid,mode)){_54d.push(_540);}_540._count=0;mode._removeFeatureIIf(oid);}}}if(_54d.length>0){this.onSelectionComplete(_54d,this.constructor.SELECTION_SUBTRACT);}}this._resolve([_53c,_53d,_53e],"onEditsComplete",_53a,dfd);},_sendAttachment:function(type,_54e,_54f,_550,_551){var _552=(type==="add")?"addAttachment":"updateAttachment",url=this._url.path+"/"+_54e+"/"+_552,self=this;var dfd=_3d6({url:url,form:_54f,content:lang.mixin(this._url.query,{f:"json",token:this._getToken()||undefined}),callbackParamName:"callback.html",handleAs:"json"}).addCallback(function(_553){var _554=(type==="add")?"addAttachmentResult":"updateAttachmentResult",_555=(type==="add")?"onAddAttachmentComplete":"onUpdateAttachmentComplete",_556=new _3eb(_553[_554]);_556.attachmentId=_556.objectId;_556.objectId=_54e;self._resolve([_556],_555,_550);return _556;}).addErrback(function(_557){self._resolve([_557],null,_551,null,true);});return dfd;},_repaint:function(_558,oid,_559){oid=_3d5.isDefined(oid)?oid:_558.attributes[this.objectIdField];if(!(oid in this._selectedFeatures)||!this._selectionSymbol){_558.setSymbol(_558.symbol,_559);}},_getKind:function(_55a){var _55b=this._trackManager;if(_55b){return _55b.isLatestObservation(_55a)?1:0;}return 0;}});lang.mixin(_3f0,{MODE_SNAPSHOT:0,MODE_ONDEMAND:1,MODE_SELECTION:2,SELECTION_NEW:3,SELECTION_ADD:4,SELECTION_SUBTRACT:5,POPUP_NONE:"esriServerHTMLPopupTypeNone",POPUP_HTML_TEXT:"esriServerHTMLPopupTypeAsHTMLText",POPUP_URL:"esriServerHTMLPopupTypeAsURL"});_3e5._createWrappers(_3f0);if(has("extend-esri")){lang.setObject("layers.FeatureLayer",_3f0,_3d4);}return _3f0;});},"dijit/form/_ListMouseMixin":function(){define("dijit/form/_ListMouseMixin",["dojo/_base/declare","dojo/mouse","dojo/on","dojo/touch","./_ListBase"],function(_55c,_55d,on,_55e,_55f){return _55c("dijit.form._ListMouseMixin",_55f,{postCreate:function(){this.inherited(arguments);this.own(on(this.domNode,_55e.press,function(evt){evt.preventDefault();}));this._listConnect(_55e.press,"_onMouseDown");this._listConnect(_55e.release,"_onMouseUp");this._listConnect(_55d.enter,"_onMouseOver");this._listConnect(_55d.leave,"_onMouseOut");},_onMouseDown:function(evt,_560){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}this._isDragging=true;this._setSelectedAttr(_560);},_onMouseUp:function(evt,_561){this._isDragging=false;var _562=this.selected;var _563=this._hoveredNode;if(_562&&_561==_562){this.onClick(_562);}else{if(_563&&_561==_563){this._setSelectedAttr(_563);this.onClick(_563);}}},_onMouseOut:function(evt,_564){if(this._hoveredNode){this.onUnhover(this._hoveredNode);this._hoveredNode=null;}if(this._isDragging){this._cancelDrag=(new Date()).getTime()+1000;}},_onMouseOver:function(evt,_565){if(this._cancelDrag){var time=(new Date()).getTime();if(time>this._cancelDrag){this._isDragging=false;}this._cancelDrag=null;}this._hoveredNode=_565;this.onHover(_565);if(this._isDragging){this._setSelectedAttr(_565);}}});});},"dijit/_editor/RichText":function(){define("dijit/_editor/RichText",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/on","dojo/query","dojo/ready","dojo/sniff","dojo/topic","dojo/_base/unload","dojo/_base/url","dojo/_base/window","../_Widget","../_CssStateMixin","./selection","./range","./html","../focus","../main"],function(_566,_567,_568,_569,dom,_56a,_56b,_56c,_56d,_56e,_56f,_570,keys,lang,on,_571,_572,has,_573,_574,_575,win,_576,_577,_578,_579,_57a,_57b,_57c){var _57d=_568("dijit._editor.RichText",[_576,_577],{constructor:function(_57e){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_57e&&lang.isString(_57e.value)){this.value=_57e.value;}this.onLoadDeferred=new _569();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"===this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[lang.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(has("mozilla")){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(has("webkit")){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(has("ie")){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);this.contentDomPostFilters=[lang.hitch(this,this._stripBreakerNodes)].concat(this.contentDomPostFilters);}this.inherited(arguments);_573.publish(_57c._scopeName+"._editor.RichText::init",this);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=lang.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _57f={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!has("ie")){_57f.Z=exec("redo");}var key;for(key in _57f){this.addKeyHandler(key,true,false,_57f[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(_57d._editorCommandsLocalized){this._local2NativeFormatNames=_57d._local2NativeFormatNames;this._native2LocalFormatNames=_57d._native2LocalFormatNames;return;}_57d._editorCommandsLocalized=true;_57d._local2NativeFormatNames={};_57d._native2LocalFormatNames={};this._local2NativeFormatNames=_57d._local2NativeFormatNames;this._native2LocalFormatNames=_57d._native2LocalFormatNames;var _580=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _581="",_582,i=0;while((_582=_580[i++])){if(_582.charAt(1)!=="l"){_581+="<"+_582+"><span>content</span></"+_582+"><br/>";}else{_581+="<"+_582+"><li>content</li></"+_582+"><br/>";}}var _583={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=_56c.create("div",{style:_583,innerHTML:_581});this.ownerDocumentBody.appendChild(div);var _584=lang.hitch(this,function(){var node=div.firstChild;while(node){try{this._sCall("selectElement",[node.firstChild]);var _585=node.tagName.toLowerCase();this._local2NativeFormatNames[_585]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_585]]=_585;node=node.nextSibling.nextSibling;}catch(e){}}_56c.destroy(div);});this.defer(_584);},open:function(_586){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new _569();}if(!this.isClosed){this.close();}_573.publish(_57c._scopeName+"._editor.RichText::open",this);if(arguments.length===1&&_586.nodeName){this.domNode=_586;}var dn=this.domNode;var html;if(lang.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=this.ownerDocument.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;_56c.place(dn,ta,"before");var _587=lang.hitch(this,function(){_56e.set(ta,{display:"block",position:"absolute",top:"-1000px"});if(has("ie")){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(has("ie")){this.defer(_587,10);}else{_587();}if(ta.form){var _588=ta.value;this.reset=function(){var _589=this.getValue();if(_589!==_588){this.replaceValue(_588);}};on(ta.form,"submit",lang.hitch(this,function(){_56a.set(ta,"disabled",this.disabled);ta.value=this.getValue();}));}}else{html=_57a.getChildrenHtml(dn);dn.innerHTML="";}}this.value=html;if(dn.nodeName&&dn.nodeName==="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!_567["useXDomain"]||_567["allowXdRichTextSave"])){var _58a=dom.byId(_57c._scopeName+"._editor.RichText.value");if(_58a&&_58a.value!==""){var _58b=_58a.value.split(this._SEPARATOR),i=0,dat;while((dat=_58b[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]===this.name){html=data[1];_58b=_58b.splice(i,1);_58a.value=_58b.join(this._SEPARATOR);break;}}}if(!_57d._globalSaveHandler){_57d._globalSaveHandler={};_574.addOnUnload(function(){var id;for(id in _57d._globalSaveHandler){var f=_57d._globalSaveHandler[id];if(lang.isFunction(f)){f();}}});}_57d._globalSaveHandler[this.id]=lang.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=this.ownerDocument.createElement("iframe"));ifr.id=this.id+"_iframe";ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(has("ie")>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=lang.hitch(this,function(w){this.window=w;this.document=this.window.document;if(has("ie")){this._localizeEditorCommands();}this.onLoad(html);});var src=this._getIframeDocTxt(),s="javascript: '"+src.replace(/\\/g,"\\\\").replace(/'/g,"\\'")+"'";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(has("safari")<=4){src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")===-1){this.defer(function(){ifr.setAttribute("src",s);});}}if(dn.nodeName==="LI"){dn.lastChild.style.marginTop="-1.2em";}_56b.add(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _58c=_56e.getComputedStyle(this.domNode);var html="";var _58d=true;if(has("ie")||has("webkit")||(!this.height&&!has("mozilla"))){html="<div id='dijitEditorBody'></div>";_58d=false;}else{if(has("mozilla")){this._cursorToStart=true;html="&#160;";}}var font=[_58c.fontWeight,_58c.fontSize,_58c.fontFamily].join(" ");var _58e=_58c.lineHeight;if(_58e.indexOf("px")>=0){_58e=parseFloat(_58e)/parseFloat(_58c.fontSize);}else{if(_58e.indexOf("em")>=0){_58e=parseFloat(_58e);}else{_58e="normal";}}var _58f="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_590){_590=_590.replace(/^;/ig,"")+";";var s=_590.split(":")[0];if(s){s=lang.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}_56e.set(self.domNode,sC,"");}_58f+=_590+";";});var _591=_571("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(has("mozilla")&&_591.length?"<title>"+_591[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((has("webkit"))?"\t\twidth: 100%;\n":""),((has("webkit"))?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||has("opera"))?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_58e,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_58d&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!has("ie")?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_58d?"id='dijitEditorBody' ":""),"onload='frameElement && frameElement._loadFunc(window,document)' ","style='"+_58f+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _592=[];if(this.styleSheets){_592=this.styleSheets.split(";");this.styleSheets="";}_592=_592.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_592[i++])){var _593=(new _575(win.global.location,url)).toString();this.editingAreaStyleSheets.push(_593);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_593+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _575(win.global.location,url)).toString();}if(_566.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.then(lang.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _594=this.document.createElement("link");_594.rel="stylesheet";_594.type="text/css";_594.href=url;head.appendChild(_594);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)==="."||(url.charAt(0)!=="/"&&!uri.host)){url=(new _575(win.global.location,url)).toString();}var _595=_566.indexOf(this.editingAreaStyleSheets,url);if(_595===-1){return;}delete this.editingAreaStyleSheets[_595];_571("link:[href=\""+url+"\"]",this.window.document).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_596){_596=!!_596;this._set("disabled",_596);if(!this.isLoaded){return;}if(has("ie")||has("webkit")||has("opera")){var _597=has("ie")&&(this.isLoaded||!this.focusOnLoad);if(_597){this.editNode.unselectable="on";}this.editNode.contentEditable=!_596;if(_597){this.defer(function(){if(this.editNode){this.editNode.unselectable="off";}});}}else{try{this.document.designMode=(_596?"off":"on");}catch(e){return;}if(!_596&&this._mozSettingProps){var ps=this._mozSettingProps;var n;for(n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=_57b.registerIframe(this.iframe);}if(!has("ie")&&!has("webkit")&&(this.height||has("mozilla"))){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _598=this;if(has("ie")){this.tabStop=_56c.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_598.editNode.setActive();};}}this.focusNode=this.editNode;var _599=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;_566.forEach(_599,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(has("ie")){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(has("webkit")){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){this.defer("placeCursorAtEnd");}});}if(has("ie")){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _59a=lang.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.resolve(true);}this.onDisplayChanged();if(this.focusOnLoad){_572(lang.hitch(this,"defer","focus",this.updateInterval));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.then(_59a);}else{_59a();}},onKeyDown:function(e){if(e.keyCode===keys.TAB&&this.isTabIndent){_56f.stop(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(has("ie")){if(e.keyCode==keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===keys.BACKSPACE&&this.document.selection.type==="Control"){_56f.stop(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}if(has("ff")){if(e.keyCode===keys.PAGE_UP||e.keyCode===keys.PAGE_DOWN){if(this.editNode.clientHeight>=this.editNode.scrollHeight){e.preventDefault();}}}return true;},onKeyUp:function(){},setDisabled:function(_59b){_570.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_59b);},_setValueAttr:function(_59c){this.setValue(_59c);},_setDisableSpellCheckAttr:function(_59d){if(this.document){_56a.set(this.document.body,"spellcheck",!_59d);}else{this.onLoadDeferred.then(lang.hitch(this,function(){_56a.set(this.document.body,"spellcheck",!_59d);}));}this._set("disableSpellCheck",_59d);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_59e=this._keyHandlers[c],args=arguments;if(_59e&&!e.altKey){_566.some(_59e,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=lang.hitch(this,"onKeyPressed");}this.defer("_onKeyHitch",1);return true;},addKeyHandler:function(key,ctrl,_59f,_5a0){if(!lang.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_59f||false,ctrl:ctrl||false,handler:_5a0});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(){if(!this.focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _5a1=this.getValue(true);if(_5a1!==this.value){this.onChange(_5a1);}this._set("value",_5a1);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!has("ie")&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(this.ownerDocumentBody.focus){this.ownerDocumentBody.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!has("ie")){_57b.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(){if(this._updateTimer){this._updateTimer.remove();}this._updateTimer=this.defer("onNormalizedDisplayChanged",this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(){},_normalizeCommand:function(cmd,_5a2){var _5a3=cmd.toLowerCase();if(_5a3==="formatblock"){if(has("safari")&&_5a2===undefined){_5a3="heading";}}else{if(_5a3==="hilitecolor"&&!has("mozilla")){_5a3="backcolor";}}return _5a3;},_qcaCache:{},queryCommandAvailable:function(_5a4){var ca=this._qcaCache[_5a4];if(ca!==undefined){return ca;}return (this._qcaCache[_5a4]=this._queryCommandAvailable(_5a4));},_queryCommandAvailable:function(_5a5){var ie=1;var _5a6=1<<1;var _5a7=1<<2;var _5a8=1<<3;function _5a9(_5aa){return {ie:Boolean(_5aa&ie),mozilla:Boolean(_5aa&_5a6),webkit:Boolean(_5aa&_5a7),opera:Boolean(_5aa&_5a8)};};var _5ab=null;switch(_5a5.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_5ab=_5a9(_5a6|ie|_5a7|_5a8);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_5ab=_5a9(_5a6|ie|_5a8|_5a7);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_5ab=_5a9(ie);break;case "cut":case "copy":case "paste":_5ab=_5a9(ie|_5a6|_5a7|_5a8);break;case "inserttable":_5ab=_5a9(_5a6|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_5ab=_5a9(ie|_5a6);break;default:return false;}return (has("ie")&&_5ab.ie)||(has("mozilla")&&_5ab.mozilla)||(has("webkit")&&_5ab.webkit)||(has("opera")&&_5ab.opera);},execCommand:function(_5ac,_5ad){var _5ae;this.focus();_5ac=this._normalizeCommand(_5ac,_5ad);if(_5ad!==undefined){if(_5ac==="heading"){throw new Error("unimplemented");}else{if((_5ac==="formatblock")&&has("ie")){_5ad="<"+_5ad+">";}}}var _5af="_"+_5ac+"Impl";if(this[_5af]){_5ae=this[_5af](_5ad);}else{_5ad=arguments.length>1?_5ad:null;if(_5ad||_5ac!=="createlink"){_5ae=this.document.execCommand(_5ac,false,_5ad);}}this.onDisplayChanged();return _5ae;},queryCommandEnabled:function(_5b0){if(this.disabled||!this._disabledOK){return false;}_5b0=this._normalizeCommand(_5b0);var _5b1="_"+_5b0+"EnabledImpl";if(this[_5b1]){return this[_5b1](_5b0);}else{return this._browserQueryCommandEnabled(_5b0);}},queryCommandState:function(_5b2){if(this.disabled||!this._disabledOK){return false;}_5b2=this._normalizeCommand(_5b2);try{return this.document.queryCommandState(_5b2);}catch(e){return false;}},queryCommandValue:function(_5b3){if(this.disabled||!this._disabledOK){return false;}var r;_5b3=this._normalizeCommand(_5b3);if(has("ie")&&_5b3==="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_5b3)];}else{if(has("mozilla")&&_5b3==="hilitecolor"){var _5b4;try{_5b4=this.document.queryCommandValue("styleWithCSS");}catch(e){_5b4=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_5b3);this.document.execCommand("styleWithCSS",false,_5b4);}else{r=this.document.queryCommandValue(_5b3);}}return r;},_sCall:function(name,args){return win.withGlobal(this.window,name,_578,args);},placeCursorAtStart:function(){this.focus();var _5b5=false;if(has("mozilla")){var _5b6=this.editNode.firstChild;while(_5b6){if(_5b6.nodeType===3){if(_5b6.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_5b5=true;this._sCall("selectElement",[_5b6]);break;}}else{if(_5b6.nodeType===1){_5b5=true;var tg=_5b6.tagName?_5b6.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_5b6]);}else{this._sCall("selectElementChildren",[_5b6]);}break;}}_5b6=_5b6.nextSibling;}}else{_5b5=true;this._sCall("selectElementChildren",[this.editNode]);}if(_5b5){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _5b7=false;if(has("mozilla")){var last=this.editNode.lastChild;while(last){if(last.nodeType===3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_5b7=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType===1){_5b7=true;this._sCall("selectElement",[last.lastChild||last]);break;}}last=last.previousSibling;}}else{_5b7=true;this._sCall("selectElementChildren",[this.editNode]);}if(_5b7){this._sCall("collapse",[false]);}},getValue:function(_5b8){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_5b8);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.then(lang.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&has("mozilla")&&html.toLowerCase()==="<p></p>"){html="<p>&#160;</p>";}if(!html&&has("webkit")){html="&#160;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!has("mozilla")){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&#160;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;_566.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;_566.forEach(this.contentDomPreFilters,function(ef){if(ef&&lang.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_5b9){var ec;if(!lang.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_5b9){dom=lang.clone(dom);}_566.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=_57a.getChildrenHtml(dom);}else{ec=dom;}if(!lang.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}_566.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(){var _5ba=dom.byId(_57c._scopeName+"._editor.RichText.value");if(_5ba){if(_5ba.value){_5ba.value+=this._SEPARATOR;}_5ba.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);}},escapeXml:function(str,_5bb){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_5bb){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){_570.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit/_editor/html::getNodeHtml instead",2);return _57a.getNodeHtml(node);},getNodeChildrenHtml:function(dom){_570.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit/_editor/html::getChildrenHtml instead",2);return _57a.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(has("ie")){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){this._iframeRegHandle.remove();delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(has("ie")){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;_56c.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;_56b.remove(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}if(this._updateTimer){this._updateTimer.remove();}this.inherited(arguments);if(_57d._globalSaveHandler){delete _57d._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_browserQueryCommandEnabled:function(_5bc){if(!_5bc){return false;}var elem=has("ie")?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_5bc);}catch(e){return false;}},_createlinkEnabledImpl:function(){var _5bd=true;if(has("opera")){var sel=this.window.getSelection();if(sel.isCollapsed){_5bd=true;}else{_5bd=this.document.queryCommandEnabled("createlink");}}else{_5bd=this._browserQueryCommandEnabled("createlink");}return _5bd;},_unlinkEnabledImpl:function(){var _5be=true;if(has("mozilla")||has("webkit")){_5be=this._sCall("hasAncestorElement",["a"]);}else{_5be=this._browserQueryCommandEnabled("unlink");}return _5be;},_inserttableEnabledImpl:function(){var _5bf=true;if(has("mozilla")||has("webkit")){_5bf=true;}else{_5bf=this._browserQueryCommandEnabled("inserttable");}return _5bf;},_cutEnabledImpl:function(){var _5c0=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_5c0=!!sel;}else{_5c0=this._browserQueryCommandEnabled("cut");}return _5c0;},_copyEnabledImpl:function(){var _5c1=true;if(has("webkit")){var sel=this.window.getSelection();if(sel){sel=sel.toString();}_5c1=!!sel;}else{_5c1=this._browserQueryCommandEnabled("copy");}return _5c1;},_pasteEnabledImpl:function(){var _5c2=true;if(has("webkit")){return true;}else{_5c2=this._browserQueryCommandEnabled("paste");}return _5c2;},_inserthorizontalruleImpl:function(_5c3){if(has("ie")){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_5c3);},_unlinkImpl:function(_5c4){if((this.queryCommandEnabled("unlink"))&&(has("mozilla")||has("webkit"))){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_5c4);},_hilitecolorImpl:function(_5c5){var _5c6;var _5c7=this._handleTextColorOrProperties("hilitecolor",_5c5);if(!_5c7){if(has("mozilla")){this.document.execCommand("styleWithCSS",false,true);console.log("Executing color command.");_5c6=this.document.execCommand("hilitecolor",false,_5c5);this.document.execCommand("styleWithCSS",false,false);}else{_5c6=this.document.execCommand("hilitecolor",false,_5c5);}}return _5c6;},_backcolorImpl:function(_5c8){if(has("ie")){_5c8=_5c8?_5c8:null;}var _5c9=this._handleTextColorOrProperties("backcolor",_5c8);if(!_5c9){_5c9=this.document.execCommand("backcolor",false,_5c8);}return _5c9;},_forecolorImpl:function(_5ca){if(has("ie")){_5ca=_5ca?_5ca:null;}var _5cb=false;_5cb=this._handleTextColorOrProperties("forecolor",_5ca);if(!_5cb){_5cb=this.document.execCommand("forecolor",false,_5ca);}return _5cb;},_inserthtmlImpl:function(_5cc){_5cc=this._preFilterContent(_5cc);var rv=true;if(has("ie")){var _5cd=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()==="CONTROL"){var n=_5cd.item(0);while(_5cd.length){_5cd.remove(_5cd.item(0));}n.outerHTML=_5cc;}else{_5cd.pasteHTML(_5cc);}_5cd.select();}else{if(has("mozilla")&&!_5cc.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_5cc);}}return rv;},_boldImpl:function(_5ce){var _5cf=false;if(has("ie")){this._adaptIESelection();_5cf=this._adaptIEFormatAreaAndExec("bold");}if(!_5cf){_5cf=this.document.execCommand("bold",false,_5ce);}return _5cf;},_italicImpl:function(_5d0){var _5d1=false;if(has("ie")){this._adaptIESelection();_5d1=this._adaptIEFormatAreaAndExec("italic");}if(!_5d1){_5d1=this.document.execCommand("italic",false,_5d0);}return _5d1;},_underlineImpl:function(_5d2){var _5d3=false;if(has("ie")){this._adaptIESelection();_5d3=this._adaptIEFormatAreaAndExec("underline");}if(!_5d3){_5d3=this.document.execCommand("underline",false,_5d2);}return _5d3;},_strikethroughImpl:function(_5d4){var _5d5=false;if(has("ie")){this._adaptIESelection();_5d5=this._adaptIEFormatAreaAndExec("strikethrough");}if(!_5d5){_5d5=this.document.execCommand("strikethrough",false,_5d4);}return _5d5;},_superscriptImpl:function(_5d6){var _5d7=false;if(has("ie")){this._adaptIESelection();_5d7=this._adaptIEFormatAreaAndExec("superscript");}if(!_5d7){_5d7=this.document.execCommand("superscript",false,_5d6);}return _5d7;},_subscriptImpl:function(_5d8){var _5d9=false;if(has("ie")){this._adaptIESelection();_5d9=this._adaptIEFormatAreaAndExec("subscript");}if(!_5d9){_5d9=this.document.execCommand("subscript",false,_5d8);}return _5d9;},_fontnameImpl:function(_5da){var _5db;if(has("ie")){_5db=this._handleTextColorOrProperties("fontname",_5da);}if(!_5db){_5db=this.document.execCommand("fontname",false,_5da);}return _5db;},_fontsizeImpl:function(_5dc){var _5dd;if(has("ie")){_5dd=this._handleTextColorOrProperties("fontsize",_5dc);}if(!_5dd){_5dd=this.document.execCommand("fontsize",false,_5dc);}return _5dd;},_insertorderedlistImpl:function(_5de){var _5df=false;if(has("ie")){_5df=this._adaptIEList("insertorderedlist",_5de);}if(!_5df){_5df=this.document.execCommand("insertorderedlist",false,_5de);}return _5df;},_insertunorderedlistImpl:function(_5e0){var _5e1=false;if(has("ie")){_5e1=this._adaptIEList("insertunorderedlist",_5e0);}if(!_5e1){_5e1=this.document.execCommand("insertunorderedlist",false,_5e0);}return _5e1;},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=_56d.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_5e2){if(node.nodeType===1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_5e2);}return true;}else{if(node.nodeType===3){return (node.nodeValue.substring(_5e2)==="");}}return false;},_removeStartingRangeFromRange:function(node,_5e3){if(node.nextSibling){_5e3.setStart(node.nextSibling,0);}else{var _5e4=node.parentNode;while(_5e4&&_5e4.nextSibling==null){_5e4=_5e4.parentNode;}if(_5e4){_5e3.setStart(_5e4.nextSibling,0);}}return _5e3;},_adaptIESelection:function(){var _5e5=_579.getSelection(this.window);if(_5e5&&_5e5.rangeCount&&!_5e5.isCollapsed){var _5e6=_5e5.getRangeAt(0);var _5e7=_5e6.startContainer;var _5e8=_5e6.startOffset;while(_5e7.nodeType===3&&_5e8>=_5e7.length&&_5e7.nextSibling){_5e8=_5e8-_5e7.length;_5e7=_5e7.nextSibling;}var _5e9=null;while(this._isNodeEmpty(_5e7,_5e8)&&_5e7!==_5e9){_5e9=_5e7;_5e6=this._removeStartingRangeFromRange(_5e7,_5e6);_5e7=_5e6.startContainer;_5e8=0;}_5e5.removeAllRanges();_5e5.addRange(_5e6);}},_adaptIEFormatAreaAndExec:function(_5ea){var _5eb=_579.getSelection(this.window);var doc=this.document;var rs,ret,_5ec,txt,_5ed,_5ee,_5ef,_5f0;if(_5ea&&_5eb&&_5eb.isCollapsed){var _5f1=this.queryCommandValue(_5ea);if(_5f1){var _5f2=this._tagNamesForCommand(_5ea);_5ec=_5eb.getRangeAt(0);var fs=_5ec.startContainer;if(fs.nodeType===3){var _5f3=_5ec.endOffset;if(fs.length<_5f3){ret=this._adjustNodeAndOffset(rs,_5f3);fs=ret.node;_5f3=ret.offset;}}var _5f4;while(fs&&fs!==this.editNode){var _5f5=fs.tagName?fs.tagName.toLowerCase():"";if(_566.indexOf(_5f2,_5f5)>-1){_5f4=fs;break;}fs=fs.parentNode;}if(_5f4){rs=_5ec.startContainer;var _5f6=doc.createElement(_5f4.tagName);_56c.place(_5f6,_5f4,"after");if(rs&&rs.nodeType===3){var _5f7,_5f8;var _5f9=_5ec.endOffset;if(rs.length<_5f9){ret=this._adjustNodeAndOffset(rs,_5f9);rs=ret.node;_5f9=ret.offset;}txt=rs.nodeValue;_5ed=doc.createTextNode(txt.substring(0,_5f9));var _5fa=txt.substring(_5f9,txt.length);if(_5fa){_5ee=doc.createTextNode(_5fa);}_56c.place(_5ed,rs,"before");if(_5ee){_5ef=doc.createElement("span");_5ef.className="ieFormatBreakerSpan";_56c.place(_5ef,rs,"after");_56c.place(_5ee,_5ef,"after");_5ee=_5ef;}_56c.destroy(rs);var _5fb=_5ed.parentNode;var _5fc=[];var _5fd;while(_5fb!==_5f4){var tg=_5fb.tagName;_5fd={tagName:tg};_5fc.push(_5fd);var _5fe=doc.createElement(tg);if(_5fb.style){if(_5fe.style){if(_5fb.style.cssText){_5fe.style.cssText=_5fb.style.cssText;_5fd.cssText=_5fb.style.cssText;}}}if(_5fb.tagName==="FONT"){if(_5fb.color){_5fe.color=_5fb.color;_5fd.color=_5fb.color;}if(_5fb.face){_5fe.face=_5fb.face;_5fd.face=_5fb.face;}if(_5fb.size){_5fe.size=_5fb.size;_5fd.size=_5fb.size;}}if(_5fb.className){_5fe.className=_5fb.className;_5fd.className=_5fb.className;}if(_5ee){_5f7=_5ee;while(_5f7){_5f8=_5f7.nextSibling;_5fe.appendChild(_5f7);_5f7=_5f8;}}if(_5fe.tagName==_5fb.tagName){_5ef=doc.createElement("span");_5ef.className="ieFormatBreakerSpan";_56c.place(_5ef,_5fb,"after");_56c.place(_5fe,_5ef,"after");}else{_56c.place(_5fe,_5fb,"after");}_5ed=_5fb;_5ee=_5fe;_5fb=_5fb.parentNode;}if(_5ee){_5f7=_5ee;if(_5f7.nodeType===1||(_5f7.nodeType===3&&_5f7.nodeValue)){_5f6.innerHTML="";}while(_5f7){_5f8=_5f7.nextSibling;_5f6.appendChild(_5f7);_5f7=_5f8;}}var _5ff;if(_5fc.length){_5fd=_5fc.pop();var _600=doc.createElement(_5fd.tagName);if(_5fd.cssText&&_600.style){_600.style.cssText=_5fd.cssText;}if(_5fd.className){_600.className=_5fd.className;}if(_5fd.tagName==="FONT"){if(_5fd.color){_600.color=_5fd.color;}if(_5fd.face){_600.face=_5fd.face;}if(_5fd.size){_600.size=_5fd.size;}}_56c.place(_600,_5f6,"before");while(_5fc.length){_5fd=_5fc.pop();var _601=doc.createElement(_5fd.tagName);if(_5fd.cssText&&_601.style){_601.style.cssText=_5fd.cssText;}if(_5fd.className){_601.className=_5fd.className;}if(_5fd.tagName==="FONT"){if(_5fd.color){_601.color=_5fd.color;}if(_5fd.face){_601.face=_5fd.face;}if(_5fd.size){_601.size=_5fd.size;}}_600.appendChild(_601);_600=_601;}_5f0=doc.createTextNode(".");_5ef.appendChild(_5f0);_600.appendChild(_5f0);_5ff=_579.create(this.window);_5ff.setStart(_5f0,0);_5ff.setEnd(_5f0,_5f0.length);_5eb.removeAllRanges();_5eb.addRange(_5ff);this._sCall("collapse",[false]);_5f0.parentNode.innerHTML="";}else{_5ef=doc.createElement("span");_5ef.className="ieFormatBreakerSpan";_5f0=doc.createTextNode(".");_5ef.appendChild(_5f0);_56c.place(_5ef,_5f6,"before");_5ff=_579.create(this.window);_5ff.setStart(_5f0,0);_5ff.setEnd(_5f0,_5f0.length);_5eb.removeAllRanges();_5eb.addRange(_5ff);this._sCall("collapse",[false]);_5f0.parentNode.innerHTML="";}if(!_5f6.firstChild){_56c.destroy(_5f6);}return true;}}return false;}else{_5ec=_5eb.getRangeAt(0);rs=_5ec.startContainer;if(rs&&rs.nodeType===3){var _5f3=_5ec.startOffset;if(rs.length<_5f3){ret=this._adjustNodeAndOffset(rs,_5f3);rs=ret.node;_5f3=ret.offset;}txt=rs.nodeValue;_5ed=doc.createTextNode(txt.substring(0,_5f3));var _5fa=txt.substring(_5f3);if(_5fa!==""){_5ee=doc.createTextNode(txt.substring(_5f3));}_5ef=doc.createElement("span");_5f0=doc.createTextNode(".");_5ef.appendChild(_5f0);if(_5ed.length){_56c.place(_5ed,rs,"after");}else{_5ed=rs;}_56c.place(_5ef,_5ed,"after");if(_5ee){_56c.place(_5ee,_5ef,"after");}_56c.destroy(rs);var _5ff=_579.create(this.window);_5ff.setStart(_5f0,0);_5ff.setEnd(_5f0,_5f0.length);_5eb.removeAllRanges();_5eb.addRange(_5ff);doc.execCommand(_5ea);_56c.place(_5ef.firstChild,_5ef,"before");_56c.destroy(_5ef);_5ff.setStart(_5f0,0);_5ff.setEnd(_5f0,_5f0.length);_5eb.removeAllRanges();_5eb.addRange(_5ff);this._sCall("collapse",[false]);_5f0.parentNode.innerHTML="";return true;}}}else{return false;}},_adaptIEList:function(_602){var _603=_579.getSelection(this.window);if(_603.isCollapsed){if(_603.rangeCount&&!this.queryCommandValue(_602)){var _604=_603.getRangeAt(0);var sc=_604.startContainer;if(sc&&sc.nodeType==3){if(!_604.startOffset){var _605="ul";if(_602==="insertorderedlist"){_605="ol";}var list=this.document.createElement(_605);var li=_56c.create("li",null,list);_56c.place(list,sc,"before");li.appendChild(sc);_56c.create("br",null,list,"after");var _606=_579.create(this.window);_606.setStart(sc,0);_606.setEnd(sc,sc.length);_603.removeAllRanges();_603.addRange(_606);this._sCall("collapse",[true]);return true;}}}}return false;},_handleTextColorOrProperties:function(_607,_608){var _609=_579.getSelection(this.window);var doc=this.document;var rs,ret,_60a,txt,_60b,_60c,_60d,_60e;_608=_608||null;if(_607&&_609&&_609.isCollapsed){if(_609.rangeCount){_60a=_609.getRangeAt(0);rs=_60a.startContainer;if(rs&&rs.nodeType===3){var _60f=_60a.startOffset;if(rs.length<_60f){ret=this._adjustNodeAndOffset(rs,_60f);rs=ret.node;_60f=ret.offset;}txt=rs.nodeValue;_60b=doc.createTextNode(txt.substring(0,_60f));var _610=txt.substring(_60f);if(_610!==""){_60c=doc.createTextNode(txt.substring(_60f));}_60d=doc.createElement("span");_60e=doc.createTextNode(".");_60d.appendChild(_60e);var _611=doc.createElement("span");_60d.appendChild(_611);if(_60b.length){_56c.place(_60b,rs,"after");}else{_60b=rs;}_56c.place(_60d,_60b,"after");if(_60c){_56c.place(_60c,_60d,"after");}_56c.destroy(rs);var _612=_579.create(this.window);_612.setStart(_60e,0);_612.setEnd(_60e,_60e.length);_609.removeAllRanges();_609.addRange(_612);if(has("webkit")){var _613="color";if(_607==="hilitecolor"||_607==="backcolor"){_613="backgroundColor";}_56e.set(_60d,_613,_608);this._sCall("remove",[]);_56c.destroy(_611);_60d.innerHTML="&#160;";this._sCall("selectElement",[_60d]);this.focus();}else{this.execCommand(_607,_608);_56c.place(_60d.firstChild,_60d,"before");_56c.destroy(_60d);_612.setStart(_60e,0);_612.setEnd(_60e,_60e.length);_609.removeAllRanges();_609.addRange(_612);this._sCall("collapse",[false]);_60e.parentNode.removeChild(_60e);}return true;}}}return false;},_adjustNodeAndOffset:function(node,_614){while(node.length<_614&&node.nextSibling&&node.nextSibling.nodeType===3){_614=_614-node.length;node=node.nextSibling;}return {"node":node,"offset":_614};},_tagNamesForCommand:function(_615){if(_615==="bold"){return ["b","strong"];}else{if(_615==="italic"){return ["i","em"];}else{if(_615==="strikethrough"){return ["s","strike"];}else{if(_615==="superscript"){return ["sup"];}else{if(_615==="subscript"){return ["sub"];}else{if(_615==="underline"){return ["u"];}}}}}}return [];},_stripBreakerNodes:function(node){if(!this.isLoaded){return;}_571(".ieFormatBreakerSpan",node).forEach(function(b){while(b.firstChild){_56c.place(b.firstChild,b,"before");}_56c.destroy(b);});return node;}});return _57d;});},"esri/layers/SelectionMode":function(){define("esri/layers/SelectionMode",["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/layers/RenderMode"],function(_616,lang,has,_617,_618){var _619=_616([_618],{declaredClass:"esri.layers._SelectionMode",constructor:function(_61a){this.featureLayer=_61a;this._featureMap={};},propertyChangeHandler:function(type){if(this._init&&type===0){this._applyTimeFilter();}},resume:function(){this.propertyChangeHandler(0);}});if(has("extend-esri")){lang.setObject("layers._SelectionMode",_619,_617);}return _619;});},"dijit/form/_AutoCompleterMixin":function(){define("dijit/form/_AutoCompleterMixin",["dojo/data/util/filter","dojo/_base/declare","dojo/dom-attr","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/query","dojo/regexp","dojo/sniff","dojo/string","./DataList","../registry","./_TextBoxMixin","./_SearchMixin"],function(_61b,_61c,_61d,_61e,keys,lang,_61f,_620,has,_621,_622,_623,_624,_625){return _61c("dijit.form._AutoCompleterMixin",_625,{item:null,autoComplete:true,highlightMatch:"first",labelAttr:"",labelType:"text",maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_626){var pos=0;if(typeof (_626.selectionStart)=="number"){pos=_626.selectionStart;}else{if(has("ie")){var tr=_626.ownerDocument.selection.createRange().duplicate();var ntr=_626.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_627,_628){_628=parseInt(_628);_624.selectInputText(_627,_628,_628);},_setDisabledAttr:function(_629){this.inherited(arguments);this.domNode.setAttribute("aria-disabled",_629?"true":"false");},_onKey:function(evt){if(evt.charCode>=32){return;}var key=evt.charCode||evt.keyCode;if(key==keys.ALT||key==keys.CTRL||key==keys.META||key==keys.SHIFT){return;}var pw=this.dropDown;var _62a=null;this._abortQuery();this.inherited(arguments);if(evt.altKey||evt.ctrlKey||evt.metaKey){return;}if(this._opened){_62a=pw.getHighlightedOption();}switch(key){case keys.PAGE_DOWN:case keys.DOWN_ARROW:case keys.PAGE_UP:case keys.UP_ARROW:if(this._opened){this._announceOption(_62a);}_61e.stop(evt);break;case keys.ENTER:if(_62a){if(_62a==pw.nextButton){this._nextSearch(1);_61e.stop(evt);break;}else{if(_62a==pw.previousButton){this._nextSearch(-1);_61e.stop(evt);break;}}_61e.stop(evt);}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}case keys.TAB:var _62b=this.get("displayedValue");if(pw&&(_62b==pw._messages["previousMessage"]||_62b==pw._messages["nextMessage"])){break;}if(_62a){this._selectOption(_62a);}case keys.ESCAPE:if(this._opened){this._lastQuery=null;this.closeDropDown();}break;}},_autoCompleteText:function(text){var fn=this.focusNode;_624.selectInputText(fn,fn.value.length);var _62c=this.ignoreCase?"toLowerCase":"substr";if(text[_62c](0).indexOf(this.focusNode.value[_62c](0))==0){var cpos=this.autoComplete?this._getCaretPos(fn):fn.value.length;if((cpos+1)>fn.value.length){fn.value=text;_624.selectInputText(fn,cpos);}}else{fn.value=text;_624.selectInputText(fn);}},_openResultList:function(_62d,_62e,_62f){var _630=this.dropDown.getHighlightedOption();this.dropDown.clearResultList();if(!_62d.length&&_62f.start==0){this.closeDropDown();return;}this._nextSearch=this.dropDown.onPage=lang.hitch(this,function(_631){_62d.nextPage(_631!==-1);this.focus();});this.dropDown.createOptions(_62d,_62f,lang.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if("direction" in _62f){if(_62f.direction){this.dropDown.highlightFirstOption();}else{if(!_62f.direction){this.dropDown.highlightLastOption();}}if(_630){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_62e[this.searchAttr].toString())){this._announceOption(this.dropDown.containerNode.firstChild.nextSibling);}}},_showResultList:function(){this.closeDropDown(true);this.openDropDown();this.domNode.setAttribute("aria-expanded","true");},loadDropDown:function(){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);this.domNode.setAttribute("aria-expanded","false");this.focusNode.removeAttribute("aria-activedescendant");}},_setBlurValue:function(){var _632=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_632==pw._messages["previousMessage"]||_632==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_632);}else{if(this.value!=this._lastValueReported){this._handleOnChange(this.value,true);}this._refreshState();}}},_setItemAttr:function(item,_633,_634){var _635="";if(item){if(!_634){_634=this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr];}_635=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_634;}this.set("value",_635,_633,_634,item);},_announceOption:function(node){if(!node){return;}var _636;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_636=node.innerHTML;this.item=undefined;this.value="";}else{var item=this.dropDown.items[node.getAttribute("item")];_636=(this.store._oldAPI?this.store.getValue(item,this.searchAttr):item[this.searchAttr]).toString();this.set("item",item,false,_636);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);this.focusNode.setAttribute("aria-activedescendant",_61d.get(node,"id"));this._autoCompleteText(_636);},_selectOption:function(_637){this.closeDropDown();if(_637){this._announceOption(_637);}this._setCaretPos(this.focusNode,this.focusNode.value.length);this._handleOnChange(this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this.item=undefined;this.inherited(arguments);},_startSearch:function(key){if(!this.dropDown){var _638=this.id+"_popup",_639=lang.isString(this.dropDownClass)?lang.getObject(this.dropDownClass,false):this.dropDownClass;this.dropDown=new _639({onChange:lang.hitch(this,this._selectOption),id:_638,dir:this.dir,textDir:this.textDir});this.focusNode.removeAttribute("aria-activedescendant");this.textbox.setAttribute("aria-owns",_638);}this._lastInput=key;this.inherited(arguments);},_getValueField:function(){return this.searchAttr;},postMixInProperties:function(){this.inherited(arguments);if(!this.store){var _63a=this.srcNodeRef;this.store=new _622({},_63a);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _63b=this._getValueField();this.value=this.store._oldAPI?this.store.getValue(item,_63b):item[_63b];}}}},postCreate:function(){var _63c=_61f("label[for=\""+this.id+"\"]");if(_63c.length){if(!_63c[0].id){_63c[0].id=this.id+"_label";}this.domNode.setAttribute("aria-labelledby",_63c[0].id);}this.inherited(arguments);this.connect(this,"onSearch","_openResultList");},_getMenuLabelFromItem:function(item){var _63d=this.labelFunc(item,this.store),_63e=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_63d=this.doHighlight(_63d,this._lastInput);_63e="html";}return {html:_63e=="html",label:_63d};},doHighlight:function(_63f,find){var _640=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=_620.escapeString(find);return this._escapeHtml(_63f.replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_640),"\uffff$1\uffff")).replace(/\uFFFF([^\uFFFF]+)\uFFFF/g,"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_641){return (_641._oldAPI?_641.getValue(item,this.labelAttr||this.searchAttr):item[this.labelAttr||this.searchAttr]).toString();},_setValueAttr:function(_642,_643,_644,item){this._set("item",item||null);if(_642==null){_642="";}this.inherited(arguments);},_setTextDirAttr:function(_645){this.inherited(arguments);if(this.dropDown){this.dropDown._set("textDir",_645);}}});});},"esri/layers/TrackManager":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/graphic","esri/geometry/Polyline","esri/layers/GraphicsLayer"],function(_646,lang,_647,has,_648,_649,_64a,_64b){var _64c=_646(null,{declaredClass:"esri.layers._TrackManager",constructor:function(_64d){this.layer=_64d;this.trackMap={};},initialize:function(map){this.map=map;var _64e=this.layer,_64f=_64e.renderer.trackRenderer;if(_64f&&(_64e.geometryType==="esriGeometryPoint")){var _650=(this.container=new _64b._GraphicsLayer({id:_64e.id+"_tracks",_child:true}));_650.loaded=true;_650.onLoad(_650);_650._setMap(map,_64e._div);_650.setRenderer(_64f);}},addFeatures:function(_651){var tkid,_652=this.trackMap,_653=this.layer,_654=_653._trackIdField;_647.forEach(_651,function(_655){var _656=_655.attributes;tkid=_656[_654];var ary=(_652[tkid]=(_652[tkid]||[]));ary.push(_655);});var _657=_653._startTimeField,_658=_653.objectIdField;var _659=function(a,b){var _65a=a.attributes[_657],_65b=b.attributes[_657];if(_65a===_65b){return (a.attributes[_658]<b.attributes[_658])?-1:1;}else{return (_65a<_65b)?-1:1;}};for(tkid in _652){_652[tkid].sort(_659);}},drawTracks:function(){var _65c=this.container;if(!_65c){return;}var _65d=this.trackMap,sr=this.map.spatialReference,tkid,ary,path,i,_65e,_65f=this.layer._trackIdField,_660;for(tkid in _65d){ary=_65d[tkid];path=[];for(i=ary.length-1;i>=0;i--){_65e=ary[i].geometry;if(_65e){path.push([_65e.x,_65e.y]);}}_660={};_660[_65f]=tkid;if(path.length>0){_65c.add(new _649(new _64a({paths:[path],spatialReference:sr}),null,_660));}}},moveLatestToFront:function(){_647.forEach(this.getLatestObservations(),function(_661){var _662=_661._shape;_662&&_662._moveToFront();this._repaint(_661,null,true);},this.layer);},getLatestObservations:function(){var _663=[];if(!this.layer.renderer.latestObservationRenderer){return _663;}var _664=this.trackMap,tkid;for(tkid in _664){var ary=_664[tkid];_663.push(ary[ary.length-1]);}return _663;},clearTracks:function(){var _665=this.getLatestObservations();this.trackMap={};var _666=this.container;if(_666){_666.clear();}_647.forEach(_665,function(_667){this._repaint(_667,null,true);},this.layer);},isLatestObservation:function(_668){var _669=this.layer._trackIdField;var _66a=this.trackMap[_668.attributes[_669]];if(_66a){return (_66a[_66a.length-1]===_668);}return false;},destroy:function(){var _66b=this.container;if(_66b){_66b.clear();_66b._unsetMap(this.map,this.layer._div);this.container=null;}this.map=null;this.layer=null;this.trackMap=null;}});if(has("extend-esri")){lang.setObject("layers._TrackManager",_64c,_648);}return _64c;});},"dijit/a11y":function(){define("dijit/a11y",["dojo/_base/array","dojo/_base/config","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-style","dojo/sniff","./main"],function(_66c,_66d,_66e,dom,_66f,_670,has,_671){var _672=(_671._isElementShown=function(elem){var s=_670.get(elem);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_66f.get(elem,"type")!="hidden");});_671.hasDefaultTabStop=function(elem){switch(elem.nodeName.toLowerCase()){case "a":return _66f.has(elem,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var body;try{var _673=elem.contentDocument;if("designMode" in _673&&_673.designMode=="on"){return true;}body=_673.body;}catch(e1){try{body=elem.contentWindow.document.body;}catch(e2){return false;}}return body&&(body.contentEditable=="true"||(body.firstChild&&body.firstChild.contentEditable=="true"));default:return elem.contentEditable=="true";}};var _674=(_671.isTabNavigable=function(elem){if(_66f.get(elem,"disabled")){return false;}else{if(_66f.has(elem,"tabIndex")){return _66f.get(elem,"tabIndex")>=0;}else{return _671.hasDefaultTabStop(elem);}}});_671._getTabNavigable=function(root){var _675,last,_676,_677,_678,_679,_67a={};function _67b(node){return node&&node.tagName.toLowerCase()=="input"&&node.type&&node.type.toLowerCase()=="radio"&&node.name&&node.name.toLowerCase();};var _67c=function(_67d){for(var _67e=_67d.firstChild;_67e;_67e=_67e.nextSibling){if(_67e.nodeType!=1||(has("ie")<=9&&_67e.scopeName!=="HTML")||!_672(_67e)){continue;}if(_674(_67e)){var _67f=+_66f.get(_67e,"tabIndex");if(!_66f.has(_67e,"tabIndex")||_67f==0){if(!_675){_675=_67e;}last=_67e;}else{if(_67f>0){if(!_676||_67f<_677){_677=_67f;_676=_67e;}if(!_678||_67f>=_679){_679=_67f;_678=_67e;}}}var rn=_67b(_67e);if(_66f.get(_67e,"checked")&&rn){_67a[rn]=_67e;}}if(_67e.nodeName.toUpperCase()!="SELECT"){_67c(_67e);}}};if(_672(root)){_67c(root);}function rs(node){return _67a[_67b(node)]||node;};return {first:rs(_675),last:rs(last),lowest:rs(_676),highest:rs(_678)};};_671.getFirstInTabbingOrder=function(root,doc){var _680=_671._getTabNavigable(dom.byId(root,doc));return _680.lowest?_680.lowest:_680.first;};_671.getLastInTabbingOrder=function(root,doc){var _681=_671._getTabNavigable(dom.byId(root,doc));return _681.last?_681.last:_681.highest;};return {hasDefaultTabStop:_671.hasDefaultTabStop,isTabNavigable:_671.isTabNavigable,_getTabNavigable:_671._getTabNavigable,getFirstInTabbingOrder:_671.getFirstInTabbingOrder,getLastInTabbingOrder:_671.getLastInTabbingOrder};});},"dojox/date/islamic":function(){define("dojox/date/islamic",["..","dojo/_base/lang","dojo/date","./islamic/Date"],function(_682,lang,dd,_683){var _684=lang.getObject("date.islamic",true,_682);_684.getDaysInMonth=function(_685){return _685.getDaysInIslamicMonth(_685.getMonth(),_685.getFullYear());};_684.compare=function(_686,_687,_688){if(_686 instanceof _683){_686=_686.toGregorian();}if(_687 instanceof _683){_687=_687.toGregorian();}return dd.compare.apply(null,arguments);};_684.add=function(date,_689,_68a){var _68b=new _683(date);switch(_689){case "day":_68b.setDate(date.getDate()+_68a);break;case "weekday":var day=date.getDay();if(((day+_68a)<5)&&((day+_68a)>0)){_68b.setDate(date.getDate()+_68a);}else{var _68c=0,_68d=0;if(day==5){day=4;_68d=(_68a>0)?-1:1;}else{if(day==6){day=4;_68d=(_68a>0)?-2:2;}}var add=(_68a>0)?(5-day-1):-day;var _68e=_68a-add;var div=parseInt(_68e/5);if(_68e%5!=0){_68c=(_68a>0)?2:-2;}_68c=_68c+div*7+_68e%5+add;_68b.setDate(date.getDate()+_68c+_68d);}break;case "year":_68b.setFullYear(date.getFullYear()+_68a);break;case "week":_68a*=7;_68b.setDate(date.getDate()+_68a);break;case "month":var _68f=date.getMonth();_68b.setMonth(_68f+_68a);break;case "hour":_68b.setHours(date.getHours()+_68a);break;case "minute":_68b._addMinutes(_68a);break;case "second":_68b._addSeconds(_68a);break;case "millisecond":_68b._addMilliseconds(_68a);break;}return _68b;};_684.difference=function(_690,_691,_692){_691=_691||new _683();_692=_692||"day";var _693=_691.getFullYear()-_690.getFullYear();var _694=1;switch(_692){case "weekday":var days=Math.round(_684.difference(_690,_691,"day"));var _695=parseInt(_684.difference(_690,_691,"week"));var mod=days%7;if(mod==0){days=_695*5;}else{var adj=0;var aDay=_690.getDay();var bDay=_691.getDay();_695=parseInt(days/7);mod=days%7;var _696=new _683(_690);_696.setDate(_696.getDate()+(_695*7));var _697=_696.getDay();if(days>0){switch(true){case aDay==5:adj=-1;break;case aDay==6:adj=0;break;case bDay==5:adj=-1;break;case bDay==6:adj=-2;break;case (_697+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==5:adj=0;break;case aDay==6:adj=1;break;case bDay==5:adj=2;break;case bDay==6:adj=1;break;case (_697+mod)<0:adj=2;}}}days+=adj;days-=(_695*2);}_694=days;break;case "year":_694=_693;break;case "month":var _698=(_691.toGregorian()>_690.toGregorian())?_691:_690;var _699=(_691.toGregorian()>_690.toGregorian())?_690:_691;var _69a=_698.getMonth();var _69b=_699.getMonth();if(_693==0){_694=_698.getMonth()-_699.getMonth();}else{_694=12-_69b;_694+=_69a;var i=_699.getFullYear()+1;var e=_698.getFullYear();for(i;i<e;i++){_694+=12;}}if(_691.toGregorian()<_690.toGregorian()){_694=-_694;}break;case "week":_694=parseInt(_684.difference(_690,_691,"day")/7);break;case "day":_694/=24;case "hour":_694/=60;case "minute":_694/=60;case "second":_694/=1000;case "millisecond":_694*=_691.toGregorian().getTime()-_690.toGregorian().getTime();}return Math.round(_694);};return _684;});},"esri/tasks/QueryTask":function(){define("esri/tasks/QueryTask",["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/_base/Deferred","dojo/_base/json","dojo/has","esri/kernel","esri/request","esri/deferredUtils","esri/geometry/normalizeUtils","esri/tasks/Task","esri/tasks/FeatureSet"],function(_69c,lang,_69d,_69e,_69f,has,_6a0,_6a1,_6a2,_6a3,Task,_6a4){var _6a5=_69c(Task,{declaredClass:"esri.tasks.QueryTask",_eventMap:{"complete":["featureSet"],"execute-for-count-complete":["count"],"execute-for-ids-complete":["objectIds"],"execute-relationship-query-complete":["featureSets"]},constructor:function(url,_6a6){this._handler=lang.hitch(this,this._handler);this._relationshipQueryHandler=lang.hitch(this,this._relationshipQueryHandler);this._executeForIdsHandler=lang.hitch(this,this._executeForIdsHandler);this._countHandler=lang.hitch(this,this._countHandler);this.source=_6a6&&_6a6.source;this.gdbVersion=_6a6&&_6a6.gdbVersion;this.registerConnectEvents();},__msigns:[{n:"execute",c:4,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForIds",c:3,a:[{i:0,p:["geometry"]}],e:2},{n:"executeForCount",c:3,a:[{i:0,p:["geometry"]}],e:2}],onComplete:function(){},onExecuteRelationshipQueryComplete:function(){},onExecuteForIdsComplete:function(){},onExecuteForCountComplete:function(){},execute:function(_6a7,_6a8,_6a9,_6aa,_6ab){var _6ac=_6ab.assembly,_6ad=this._encode(lang.mixin({},this._url.query,{f:"json"},_6a7.toJson(_6ac&&_6ac[0]))),_6ae=this._handler,_6af=this._errorHandler;if(this.source){var _6b0={source:this.source.toJson()};_6ad.layer=_69f.toJson(_6b0);}if(this.gdbVersion){_6ad.gdbVersion=this.gdbVersion;}return _6a1({url:this._url.path+"/query",content:_6ad,callbackParamName:"callback",load:function(r,i){_6ae(r,i,_6a8,_6a9,_6ab.dfd);},error:function(r){_6af(r,_6a9,_6ab.dfd);},callbackSuffix:_6aa});},executeRelationshipQuery:function(_6b1,_6b2,_6b3){var _6b4=this._encode(lang.mixin({},this._url.query,{f:"json"},_6b1.toJson())),_6b5=this._relationshipQueryHandler,_6b6=this._errorHandler;if(this.gdbVersion){_6b4.gdbVersion=this.gdbVersion;}var dfd=new _69e(_6a2._dfdCanceller);dfd._pendingDfd=_6a1({url:this._url.path+"/queryRelatedRecords",content:_6b4,callbackParamName:"callback",load:function(r,i){_6b5(r,i,_6b2,_6b3,dfd);},error:function(r){_6b6(r,_6b3,dfd);}});return dfd;},executeForIds:function(_6b7,_6b8,_6b9,_6ba){var _6bb=_6ba.assembly,_6bc=this._encode(lang.mixin({},this._url.query,{f:"json",returnIdsOnly:true},_6b7.toJson(_6bb&&_6bb[0]))),_6bd=this._executeForIdsHandler,_6be=this._errorHandler;if(this.source){var _6bf={source:this.source.toJson()};_6bc.layer=_69f.toJson(_6bf);}if(this.gdbVersion){_6bc.gdbVersion=this.gdbVersion;}return _6a1({url:this._url.path+"/query",content:_6bc,callbackParamName:"callback",load:function(r,i){_6bd(r,i,_6b8,_6b9,_6ba.dfd);},error:function(r){_6be(r,_6b9,_6ba.dfd);}});},executeForCount:function(_6c0,_6c1,_6c2,_6c3){var _6c4=_6c3.assembly,_6c5=this._encode(lang.mixin({},this._url.query,{f:"json",returnIdsOnly:true,returnCountOnly:true},_6c0.toJson(_6c4&&_6c4[0]))),_6c6=this._countHandler,_6c7=this._errorHandler;if(this.source){var _6c8={source:this.source.toJson()};_6c5.layer=_69f.toJson(_6c8);}if(this.gdbVersion){_6c5.gdbVersion=this.gdbVersion;}return _6a1({url:this._url.path+"/query",content:_6c5,callbackParamName:"callback",load:function(r,i){_6c6(r,i,_6c1,_6c2,_6c3.dfd);},error:function(r){_6c7(r,_6c2,_6c3.dfd);}});},_handler:function(_6c9,io,_6ca,_6cb,dfd){try{var _6cc=new _6a4(_6c9);this._successHandler([_6cc],"onComplete",_6ca,dfd);}catch(err){this._errorHandler(err,_6cb,dfd);}},_relationshipQueryHandler:function(_6cd,io,_6ce,_6cf,dfd){try{var gt=_6cd.geometryType,sr=_6cd.spatialReference,_6d0={};_69d.forEach(_6cd.relatedRecordGroups,function(gr){var _6d1={};_6d1.geometryType=gt;_6d1.spatialReference=sr;_6d1.features=gr.relatedRecords;var fset=new _6a4(_6d1);_6d0[gr.objectId]=fset;});this._successHandler([_6d0],"onExecuteRelationshipQueryComplete",_6ce,dfd);}catch(err){this._errorHandler(err,_6cf,dfd);}},_executeForIdsHandler:function(_6d2,io,_6d3,_6d4,dfd){try{this._successHandler([_6d2.objectIds],"onExecuteForIdsComplete",_6d3,dfd);}catch(err){this._errorHandler(err,_6d4,dfd);}},_countHandler:function(_6d5,io,_6d6,_6d7,dfd){try{var _6d8,_6d9=_6d5.features,ids=_6d5.objectIds;if(ids){_6d8=ids.length;}else{if(_6d9){throw new Error("Unable to perform query. Please check your parameters.");}else{_6d8=_6d5.count;}}this._successHandler([_6d8],"onExecuteForCountComplete",_6d6,dfd);}catch(err){this._errorHandler(err,_6d7,dfd);}}});_6a3._createWrappers(_6a5);if(has("extend-esri")){lang.setObject("tasks.QueryTask",_6a5,_6a0);}return _6a5;});},"url:dijit/form/templates/Button.html":"<span class=\"dijit dijitReset dijitInline\" role=\"presentation\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" role=\"presentation\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" data-dojo-attach-point=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\"\n\t\ttabIndex=\"-1\" role=\"presentation\" data-dojo-attach-point=\"valueNode\"\n/></span>\n","url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n","dijit/typematic":function(){define("dijit/typematic",["dojo/_base/array","dojo/_base/connect","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","./main"],function(_6da,_6db,_6dc,_6dd,lang,on,has,_6de){var _6df=(_6de.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(lang.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_6e0,node,_6e1,obj,_6e2,_6e3,_6e4){if(obj!=this._obj){this.stop();this._initialDelay=_6e3||500;this._subsequentDelay=_6e2||0.9;this._minDelay=_6e4||10;this._obj=obj;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=lang.hitch(_6e0,_6e1);this._evt={faux:true};for(var attr in evt){if(attr!="layerX"&&attr!="layerY"){var v=evt[attr];if(typeof v!="function"&&typeof v!="undefined"){this._evt[attr]=v;}}}this._fireEventAndReload();}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_6e5,_6e6,_6e7,_6e8,_6e9,_6ea){if(_6e5.keyCode){_6e5.charOrCode=_6e5.keyCode;_6dd.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_6e5.charCode){_6e5.charOrCode=String.fromCharCode(_6e5.charCode);_6dd.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}var _6eb=[on(node,_6db._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==_6e5.charOrCode&&(_6e5.ctrlKey===undefined||_6e5.ctrlKey==evt.ctrlKey)&&(_6e5.altKey===undefined||_6e5.altKey==evt.altKey)&&(_6e5.metaKey===undefined||_6e5.metaKey==(evt.metaKey||false))&&(_6e5.shiftKey===undefined||_6e5.shiftKey==evt.shiftKey)){_6dc.stop(evt);_6df.trigger(evt,_6e6,node,_6e7,_6e5,_6e8,_6e9,_6ea);}else{if(_6df._obj==_6e5){_6df.stop();}}})),on(node,"keyup",lang.hitch(this,function(){if(_6df._obj==_6e5){_6df.stop();}}))];return {remove:function(){_6da.forEach(_6eb,function(h){h.remove();});}};},addMouseListener:function(node,_6ec,_6ed,_6ee,_6ef,_6f0){var _6f1=[on(node,"mousedown",lang.hitch(this,function(evt){evt.preventDefault();_6df.trigger(evt,_6ec,node,_6ed,node,_6ee,_6ef,_6f0);})),on(node,"mouseup",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_6df.stop();})),on(node,"mouseout",lang.hitch(this,function(evt){if(this._obj){evt.preventDefault();}_6df.stop();})),on(node,"dblclick",lang.hitch(this,function(evt){evt.preventDefault();if(has("ie")<9){_6df.trigger(evt,_6ec,node,_6ed,node,_6ee,_6ef,_6f0);setTimeout(lang.hitch(this,_6df.stop),50);}}))];return {remove:function(){_6da.forEach(_6f1,function(h){h.remove();});}};},addListener:function(_6f2,_6f3,_6f4,_6f5,_6f6,_6f7,_6f8,_6f9){var _6fa=[this.addKeyListener(_6f3,_6f4,_6f5,_6f6,_6f7,_6f8,_6f9),this.addMouseListener(_6f2,_6f5,_6f6,_6f7,_6f8,_6f9)];return {remove:function(){_6da.forEach(_6fa,function(h){h.remove();});}};}});return _6df;});},"dijit/form/DropDownButton":function(){require({cache:{"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n"}});define("dijit/form/DropDownButton",["dojo/_base/declare","dojo/_base/lang","dojo/query","../registry","../popup","./Button","../_Container","../_HasDropDown","dojo/text!./templates/DropDownButton.html"],function(_6fb,lang,_6fc,_6fd,_6fe,_6ff,_700,_701,_702){return _6fb("dijit.form.DropDownButton",[_6ff,_700,_701],{baseClass:"dijitDropDownButton",templateString:_702,_fillContent:function(){if(this.srcNodeRef){var _703=_6fc("*",this.srcNodeRef);this.inherited(arguments,[_703[0]]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _704=_6fc("[widgetId]",this.dropDownContainer)[0];this.dropDown=_6fd.byNode(_704);delete this.dropDownContainer;}if(this.dropDown){_6fe.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _705=this.dropDown;return (!!_705&&(!_705.href||_705.isLoaded));},loadDropDown:function(_706){var _707=this.dropDown;var _708=_707.on("load",lang.hitch(this,function(){_708.remove();_706();}));_707.refresh();},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});});},"esri/layers/GridLayout":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/SpatialReference","esri/geometry/Extent","esri/geometry/Polyline"],function(_709,lang,_70a,has,_70b,_70c,_70d,_70e){var _70f=_709(null,{declaredClass:"esri.layers._GridLayout",constructor:function(_710,_711,_712,_713){this.origin=_710;this.cellWidth=_711.width;this.cellHeight=_711.height;this.mapWidth=_712.width;this.mapHeight=_712.height;this.srInfo=_713;},setResolution:function(_714){this._resolution=(_714.xmax-_714.xmin)/this.mapWidth;if(this.srInfo){var _715=Math.round((2*this.srInfo.valid[1])/this._resolution),_716=Math.round(_715/this.cellWidth);this._frameStats=[_716,0,_716-1];}},getCellCoordinates:function(_717){var res=this._resolution,_718=this.origin;return {row:Math.floor((_718.y-_717.y)/(this.cellHeight*res)),col:Math.floor((_717.x-_718.x)/(this.cellWidth*res))};},normalize:function(col){var _719=this._frameStats;if(_719){var _71a=_719[0],m180=_719[1],p180=_719[2];if(col<m180){col=col%_71a;col=col<m180?col+_71a:col;}else{if(col>p180){col=col%_71a;}}}return col;},intersects:function(_71b,_71c){var _71d=this.srInfo;if(_71d){return _70a.some(_71c._getParts(_71d),function(_71e){return _71b.intersects(_71e.extent);});}else{return _71b.intersects(_71c);}},getCellExtent:function(row,col){var res=this._resolution,_71f=this.origin,_720=this.cellWidth,_721=this.cellHeight;return new _70d((col*_720*res)+_71f.x,_71f.y-((row+1)*_721*res),((col+1)*_720*res)+_71f.x,_71f.y-(row*_721*res),new _70c(_71f.spatialReference.toJson()));},getLatticeID:function(_722){var _723=this.getCellCoordinates({x:_722.xmin,y:_722.ymax}),_724=this.getCellCoordinates({x:_722.xmax,y:_722.ymin}),_725=_723.row,_726=_724.row,_727=this.normalize(_723.col),_728=this.normalize(_724.col);return _725+"_"+_726+"_"+_727+"_"+_728;},sorter:function(a,b){return (a<b)?-1:1;},getCellsInExtent:function(_729,_72a){var _72b=this.getCellCoordinates({x:_729.xmin,y:_729.ymax}),_72c=this.getCellCoordinates({x:_729.xmax,y:_729.ymin}),_72d=_72b.row,_72e=_72c.row,_72f=_72b.col,_730=_72c.col,_731=[],i,j,nj,_732=[],_733=[],len,xmin,xmax,ymin,ymax,_734=[],_735,_736;for(i=_72d;i<=_72e;i++){for(j=_72f;j<=_730;j++){nj=this.normalize(j);_729=this.getCellExtent(i,nj);_731.push({row:i,col:nj,extent:_729,resolution:this._resolution});if(_72a){_732.push(_729.xmin,_729.xmax);_733.push(_729.ymin,_729.ymax);}}}_72f=this.normalize(_72f);_730=this.normalize(_730);_732.sort(this.sorter);_733.sort(this.sorter);len=_732.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_732[i]===_732[i+1]){_732.splice(i,1);}}}len=_733.length;for(i=len-1;i>=0;i--){if(i<(len-1)){if(_733[i]===_733[i+1]){_733.splice(i,1);}}}if(_732.length&&_733.length){xmin=_732[0];xmax=_732[_732.length-1];ymin=_733[0];ymax=_733[_733.length-1];len=_732.length;for(i=0;i<len;i++){_734.push([[_732[i],ymax],[_732[i],ymin]]);}len=_733.length;for(i=0;i<len;i++){_734.push([[xmin,_733[i]],[xmax,_733[i]]]);}_735=new _70e({paths:_734,spatialReference:this.origin.spatialReference.toJson()});_736=_72d+"_"+_72e+"_"+_72f+"_"+_730;_731.push({latticeID:_736,lattice:_735,resolution:this._resolution});}return {minRow:_72d,maxRow:_72e,minCol:_72f,maxCol:_730,cells:_731};}});if(has("extend-esri")){lang.setObject("layers._GridLayout",_70f,_70b);}return _70f;});},"dijit/_base/focus":function(){define("dijit/_base/focus",["dojo/_base/array","dojo/dom","dojo/_base/lang","dojo/topic","dojo/_base/window","../focus","../main"],function(_737,dom,lang,_738,win,_739,_73a){var _73b={_curFocus:null,_prevFocus:null,isCollapsed:function(){return _73a.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=win.doc.selection,cf=_739.curNode;if(win.global.getSelection){sel=win.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_73c){var _73d=win.doc,mark=_73c.mark;if(mark){if(win.global.getSelection){var sel=win.global.getSelection();if(sel&&sel.removeAllRanges){if(mark.pRange){var n=mark.node;n.selectionStart=mark.start;n.selectionEnd=mark.end;}else{sel.removeAllRanges();sel.addRange(mark);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_73d.selection&&mark){var rg;if(mark.pRange){rg=mark.range;}else{if(lang.isArray(mark)){rg=_73d.body.createControlRange();_737.forEach(mark,function(n){rg.addElement(n);});}else{rg=_73d.body.createTextRange();rg.moveToBookmark(mark);}}rg.select();}}}},getFocus:function(menu,_73e){var node=!_739.curNode||(menu&&dom.isDescendant(_739.curNode,menu.domNode))?_73a._prevFocus:_739.curNode;return {node:node,bookmark:node&&(node==_739.curNode)&&win.withGlobal(_73e||win.global,_73a.getBookmark),openedForWindow:_73e};},_activeStack:[],registerIframe:function(_73f){return _739.registerIframe(_73f);},unregisterIframe:function(_740){_740&&_740.remove();},registerWin:function(_741,_742){return _739.registerWin(_741,_742);},unregisterWin:function(_743){_743&&_743.remove();}};_739.focus=function(_744){if(!_744){return;}var node="node" in _744?_744.node:_744,_745=_744.bookmark,_746=_744.openedForWindow,_747=_745?_745.isCollapsed:false;if(node){var _748=(node.tagName.toLowerCase()=="iframe")?node.contentWindow:node;if(_748&&_748.focus){try{_748.focus();}catch(e){}}_739._onFocusNode(node);}if(_745&&win.withGlobal(_746||win.global,_73a.isCollapsed)&&!_747){if(_746){_746.focus();}try{win.withGlobal(_746||win.global,_73a.moveToBookmark,null,[_745]);}catch(e2){}}};_739.watch("curNode",function(name,_749,_74a){_73a._curFocus=_74a;_73a._prevFocus=_749;if(_74a){_738.publish("focusNode",_74a);}});_739.watch("activeStack",function(name,_74b,_74c){_73a._activeStack=_74c;});_739.on("widget-blur",function(_74d,by){_738.publish("widgetBlur",_74d,by);});_739.on("widget-focus",function(_74e,by){_738.publish("widgetFocus",_74e,by);});lang.mixin(_73a,_73b);return _73a;});},"dijit/place":function(){define("dijit/place",["dojo/_base/array","dojo/dom-geometry","dojo/dom-style","dojo/_base/kernel","dojo/_base/window","dojo/window","./main"],function(_74f,_750,_751,_752,win,_753,_754){function _755(node,_756,_757,_758){var view=_753.getBox(node.ownerDocument);if(!node.parentNode||String(node.parentNode.tagName).toLowerCase()!="body"){win.body(node.ownerDocument).appendChild(node);}var best=null;_74f.some(_756,function(_759){var _75a=_759.corner;var pos=_759.pos;var _75b=0;var _75c={w:{"L":view.l+view.w-pos.x,"R":pos.x-view.l,"M":view.w}[_75a.charAt(1)],h:{"T":view.t+view.h-pos.y,"B":pos.y-view.t,"M":view.h}[_75a.charAt(0)]};var s=node.style;s.left=s.right="auto";if(_757){var res=_757(node,_759.aroundCorner,_75a,_75c,_758);_75b=typeof res=="undefined"?0:res;}var _75d=node.style;var _75e=_75d.display;var _75f=_75d.visibility;if(_75d.display=="none"){_75d.visibility="hidden";_75d.display="";}var bb=_750.position(node);_75d.display=_75e;_75d.visibility=_75f;var _760={"L":pos.x,"R":pos.x-bb.w,"M":Math.max(view.l,Math.min(view.l+view.w,pos.x+(bb.w>>1))-bb.w)}[_75a.charAt(1)],_761={"T":pos.y,"B":pos.y-bb.h,"M":Math.max(view.t,Math.min(view.t+view.h,pos.y+(bb.h>>1))-bb.h)}[_75a.charAt(0)],_762=Math.max(view.l,_760),_763=Math.max(view.t,_761),endX=Math.min(view.l+view.w,_760+bb.w),endY=Math.min(view.t+view.h,_761+bb.h),_764=endX-_762,_765=endY-_763;_75b+=(bb.w-_764)+(bb.h-_765);if(best==null||_75b<best.overflow){best={corner:_75a,aroundCorner:_759.aroundCorner,x:_762,y:_763,w:_764,h:_765,overflow:_75b,spaceAvailable:_75c};}return !_75b;});if(best.overflow&&_757){_757(node,best.aroundCorner,best.corner,best.spaceAvailable,_758);}var l=_750.isBodyLtr(node.ownerDocument),s=node.style;s.top=best.y+"px";s[l?"left":"right"]=(l?best.x:view.w-best.x-best.w)+"px";s[l?"right":"left"]="auto";return best;};var _766={at:function(node,pos,_767,_768){var _769=_74f.map(_767,function(_76a){var c={corner:_76a,pos:{x:pos.x,y:pos.y}};if(_768){c.pos.x+=_76a.charAt(1)=="L"?_768.x:-_768.x;c.pos.y+=_76a.charAt(0)=="T"?_768.y:-_768.y;}return c;});return _755(node,_769);},around:function(node,_76b,_76c,_76d,_76e){var _76f=(typeof _76b=="string"||"offsetWidth" in _76b)?_750.position(_76b,true):_76b;if(_76b.parentNode){var _770=_751.getComputedStyle(_76b).position=="absolute";var _771=_76b.parentNode;while(_771&&_771.nodeType==1&&_771.nodeName!="BODY"){var _772=_750.position(_771,true),pcs=_751.getComputedStyle(_771);if(/relative|absolute/.test(pcs.position)){_770=false;}if(!_770&&/hidden|auto|scroll/.test(pcs.overflow)){var _773=Math.min(_76f.y+_76f.h,_772.y+_772.h);var _774=Math.min(_76f.x+_76f.w,_772.x+_772.w);_76f.x=Math.max(_76f.x,_772.x);_76f.y=Math.max(_76f.y,_772.y);_76f.h=_773-_76f.y;_76f.w=_774-_76f.x;}if(pcs.position=="absolute"){_770=true;}_771=_771.parentNode;}}var x=_76f.x,y=_76f.y,_775="w" in _76f?_76f.w:(_76f.w=_76f.width),_776="h" in _76f?_76f.h:(_752.deprecated("place.around: dijit/place.__Rectangle: { x:"+x+", y:"+y+", height:"+_76f.height+", width:"+_775+" } has been deprecated.  Please use { x:"+x+", y:"+y+", h:"+_76f.height+", w:"+_775+" }","","2.0"),_76f.h=_76f.height);var _777=[];function push(_778,_779){_777.push({aroundCorner:_778,corner:_779,pos:{x:{"L":x,"R":x+_775,"M":x+(_775>>1)}[_778.charAt(1)],y:{"T":y,"B":y+_776,"M":y+(_776>>1)}[_778.charAt(0)]}});};_74f.forEach(_76c,function(pos){var ltr=_76d;switch(pos){case "above-centered":push("TM","BM");break;case "below-centered":push("BM","TM");break;case "after-centered":ltr=!ltr;case "before-centered":push(ltr?"ML":"MR",ltr?"MR":"ML");break;case "after":ltr=!ltr;case "before":push(ltr?"TL":"TR",ltr?"TR":"TL");push(ltr?"BL":"BR",ltr?"BR":"BL");break;case "below-alt":ltr=!ltr;case "below":push(ltr?"BL":"BR",ltr?"TL":"TR");push(ltr?"BR":"BL",ltr?"TR":"TL");break;case "above-alt":ltr=!ltr;case "above":push(ltr?"TL":"TR",ltr?"BL":"BR");push(ltr?"TR":"TL",ltr?"BR":"BL");break;default:push(pos.aroundCorner,pos.corner);}});var _77a=_755(node,_777,_76e,{w:_775,h:_776});_77a.aroundNodePos=_76f;return _77a;}};return _754.place=_766;});},"esri/tasks/Task":function(){define("esri/tasks/Task",["dojo/_base/declare","dojo/_base/lang","dojo/_base/json","dojo/has","esri/kernel","esri/deferredUtils","esri/urlUtils","esri/Evented"],function(_77b,lang,_77c,has,_77d,_77e,_77f,_780){var Task=_77b(_780,{declaredClass:"esri.tasks._Task",_eventMap:{"error":["error"],"complete":["result"]},constructor:function(url){if(url&&lang.isString(url)){this._url=_77f.urlToObject(this.url=url);}this.normalization=true;this._errorHandler=lang.hitch(this,this._errorHandler);this.registerConnectEvents();},_useSSL:function(){var _781=this._url,re=/^http:/i,rep="https:";if(this.url){this.url=this.url.replace(re,rep);}if(_781&&_781.path){_781.path=_781.path.replace(re,rep);}},_encode:function(_782,_783,_784){var _785,type,_786={},i,p,pl;for(i in _782){if(i==="declaredClass"){continue;}_785=_782[i];type=typeof _785;if(_785!==null&&_785!==undefined&&type!=="function"){if(lang.isArray(_785)){_786[i]=[];pl=_785.length;for(p=0;p<pl;p++){_786[i][p]=this._encode(_785[p]);}}else{if(type==="object"){if(_785.toJson){var json=_785.toJson(_784&&_784[i]);if(_785.declaredClass==="esri.tasks.FeatureSet"){if(json.spatialReference){json.sr=json.spatialReference;delete json.spatialReference;}}_786[i]=_783?json:_77c.toJson(json);}}else{_786[i]=_785;}}}}return _786;},_successHandler:function(args,_787,_788,dfd){if(_787){this[_787].apply(this,args);}if(_788){_788.apply(null,args);}if(dfd){_77e._resDfd(dfd,args);}},_errorHandler:function(err,_789,dfd){this.onError(err);if(_789){_789(err);}if(dfd){dfd.errback(err);}},setNormalization:function(_78a){this.normalization=_78a;},onError:function(){}});if(has("extend-esri")){_77d.Task=Task;}return Task;});},"dijit/form/NumberTextBox":function(){define("dijit/form/NumberTextBox",["dojo/_base/declare","dojo/_base/lang","dojo/number","./RangeBoundTextBox"],function(_78b,lang,_78c,_78d){var _78e=_78b("dijit.form.NumberTextBoxMixin",null,{pattern:_78c.regexp,value:NaN,editOptions:{pattern:"#.######"},_formatter:_78c.format,postMixInProperties:function(){this.inherited(arguments);this._set("type","text");},_setConstraintsAttr:function(_78f){var _790=typeof _78f.places=="number"?_78f.places:0;if(_790){_790++;}if(typeof _78f.max!="number"){_78f.max=9*Math.pow(10,15-_790);}if(typeof _78f.min!="number"){_78f.min=-9*Math.pow(10,15-_790);}this.inherited(arguments,[_78f]);if(this.focusNode&&this.focusNode.value&&!isNaN(this.value)){this.set("value",this.value);}},_onFocus:function(){if(this.disabled){return;}var val=this.get("value");if(typeof val=="number"&&!isNaN(val)){var _791=this.format(val,this.constraints);if(_791!==undefined){this.textbox.value=_791;}}this.inherited(arguments);},format:function(_792,_793){var _794=String(_792);if(typeof _792!="number"){return _794;}if(isNaN(_792)){return "";}if(!("rangeCheck" in this&&this.rangeCheck(_792,_793))&&_793.exponent!==false&&/\de[-+]?\d/i.test(_794)){return _794;}if(this.editOptions&&this.focused){_793=lang.mixin({},_793,this.editOptions);}return this._formatter(_792,_793);},_parser:_78c.parse,parse:function(_795,_796){var v=this._parser(_795,lang.mixin({},_796,(this.editOptions&&this.focused)?this.editOptions:{}));if(this.editOptions&&this.focused&&isNaN(v)){v=this._parser(_795,_796);}return v;},_getDisplayedValueAttr:function(){var v=this.inherited(arguments);return isNaN(v)?this.textbox.value:v;},filter:function(_797){return (_797==null||_797==="")?NaN:this.inherited(arguments);},serialize:function(_798,_799){return (typeof _798!="number"||isNaN(_798))?"":this.inherited(arguments);},_setBlurValue:function(){var val=lang.hitch(lang.mixin({},this,{focused:true}),"get")("value");this._setValueAttr(val,true);},_setValueAttr:function(_79a,_79b,_79c){if(_79a!==undefined&&_79c===undefined){_79c=String(_79a);if(typeof _79a=="number"){if(isNaN(_79a)){_79c="";}else{if(("rangeCheck" in this&&this.rangeCheck(_79a,this.constraints))||this.constraints.exponent===false||!/\de[-+]?\d/i.test(_79c)){_79c=undefined;}}}else{if(!_79a){_79c="";_79a=NaN;}else{_79a=undefined;}}}this.inherited(arguments,[_79a,_79b,_79c]);},_getValueAttr:function(){var v=this.inherited(arguments);if(isNaN(v)&&this.textbox.value!==""){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)&&(new RegExp("^"+_78c._realNumberRegexp(lang.mixin({},this.constraints))+"$").test(this.textbox.value))){var n=Number(this.textbox.value);return isNaN(n)?undefined:n;}else{return undefined;}}else{return v;}},isValid:function(_79d){if(!this.focused||this._isEmpty(this.textbox.value)){return this.inherited(arguments);}else{var v=this.get("value");if(!isNaN(v)&&this.rangeCheck(v,this.constraints)){if(this.constraints.exponent!==false&&/\de[-+]?\d/i.test(this.textbox.value)){return true;}else{return this.inherited(arguments);}}else{return false;}}}});var _79e=_78b("dijit.form.NumberTextBox",[_78d,_78e],{baseClass:"dijitTextBox dijitNumberTextBox"});_79e.Mixin=_78e;return _79e;});},"esri/tasks/FeatureSet":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/lang","esri/graphic","esri/SpatialReference","esri/graphicsUtils","esri/geometry/jsonUtils","esri/symbols/jsonUtils"],function(_79f,lang,_7a0,has,_7a1,_7a2,_7a3,_7a4,_7a5,_7a6,_7a7){var _7a8=_79f(null,{declaredClass:"esri.tasks.FeatureSet",constructor:function(json){if(json){lang.mixin(this,json);var _7a9=this.features,sr=json.spatialReference,_7aa=_7a6.getGeometryType(json.geometryType);sr=(this.spatialReference=new _7a4(sr));this.geometryType=json.geometryType;if(json.fields){this.fields=json.fields;}_7a0.forEach(_7a9,function(_7ab,i){var _7ac=_7ab.geometry&&_7ab.geometry.spatialReference;_7a9[i]=new _7a3((_7aa&&_7ab.geometry)?new _7aa(_7ab.geometry):null,_7ab.symbol&&_7a7.fromJson(_7ab.symbol),_7ab.attributes);if(_7a9[i].geometry&&!_7ac){_7a9[i].geometry.setSpatialReference(sr);}});}else{this.features=[];}},displayFieldName:null,geometryType:null,spatialReference:null,fieldAliases:null,toJson:function(_7ad){var json={};if(this.displayFieldName){json.displayFieldName=this.displayFieldName;}if(this.fields){json.fields=this.fields;}if(this.spatialReference){json.spatialReference=this.spatialReference.toJson();}else{if(this.features[0]&&this.features[0].geometry){json.spatialReference=this.features[0].geometry.spatialReference.toJson();}}if(this.features[0]){if(this.features[0].geometry){json.geometryType=_7a6.getJsonType(this.features[0].geometry);}json.features=_7a5._encodeGraphics(this.features,_7ad);}json.exceededTransferLimit=this.exceededTransferLimit;return _7a2.fixJson(json);}});if(has("extend-esri")){lang.setObject("tasks.FeatureSet",_7a8,_7a1);}return _7a8;});},"dijit/_Widget":function(){define("dijit/_Widget",["dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/query","dojo/ready","./registry","./_WidgetBase","./_OnDijitClickMixin","./_FocusMixin","dojo/uacss","./hccss"],function(_7ae,_7af,_7b0,_7b1,has,_7b2,lang,_7b3,_7b4,_7b5,_7b6,_7b7,_7b8){function _7b9(){};function _7ba(_7bb){return function(obj,_7bc,_7bd,_7be){if(obj&&typeof _7bc=="string"&&obj[_7bc]==_7b9){return obj.on(_7bc.substring(2).toLowerCase(),lang.hitch(_7bd,_7be));}return _7bb.apply(_7b0,arguments);};};_7ae.around(_7b0,"connect",_7ba);if(_7b2.connect){_7ae.around(_7b2,"connect",_7ba);}var _7bf=_7b1("dijit._Widget",[_7b6,_7b7,_7b8],{onClick:_7b9,onDblClick:_7b9,onKeyDown:_7b9,onKeyPress:_7b9,onKeyUp:_7b9,onMouseDown:_7b9,onMouseMove:_7b9,onMouseOut:_7b9,onMouseOver:_7b9,onMouseLeave:_7b9,onMouseEnter:_7b9,onMouseUp:_7b9,constructor:function(_7c0){this._toConnect={};for(var name in _7c0){if(this[name]===_7b9){this._toConnect[name.replace(/^on/,"").toLowerCase()]=_7c0[name];delete _7c0[name];}}},postCreate:function(){this.inherited(arguments);for(var name in this._toConnect){this.on(name,this._toConnect[name]);}delete this._toConnect;},on:function(type,func){if(this[this._onMap(type)]===_7b9){return _7b0.connect(this.domNode,type.toLowerCase(),this,func);}return this.inherited(arguments);},_setFocusedAttr:function(val){this._focused=val;this._set("focused",val);},setAttribute:function(attr,_7c1){_7b2.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_7c1);},attr:function(name,_7c2){if(_7af.isDebug){var _7c3=arguments.callee._ach||(arguments.callee._ach={}),_7c4=(arguments.callee.caller||"unknown caller").toString();if(!_7c3[_7c4]){_7b2.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_7c4,"","2.0");_7c3[_7c4]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},getDescendants:function(){_7b2.deprecated(this.declaredClass+"::getDescendants() is deprecated. Use getChildren() instead.","","2.0");return this.containerNode?_7b3("[widgetId]",this.containerNode).map(_7b5.byNode):[];},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});if(has("dijit-legacy-requires")){_7b4(0,function(){var _7c5=["dijit/_base"];require(_7c5);});}return _7bf;});},"dojo/cache":function(){define(["./_base/kernel","./text"],function(dojo){return dojo.cache;});},"dijit/_OnDijitClickMixin":function(){define("dijit/_OnDijitClickMixin",["dojo/on","dojo/_base/array","dojo/keys","dojo/_base/declare","dojo/has","dojo/_base/unload","dojo/_base/window","./a11yclick"],function(on,_7c6,keys,_7c7,has,_7c8,win,_7c9){var ret=_7c7("dijit._OnDijitClickMixin",null,{connect:function(obj,_7ca,_7cb){return this.inherited(arguments,[obj,_7ca=="ondijitclick"?_7c9:_7ca,_7cb]);}});ret.a11yclick=_7c9;return ret;});},"dijit/_FocusMixin":function(){define("dijit/_FocusMixin",["./focus","./_WidgetBase","dojo/_base/declare","dojo/_base/lang"],function(_7cc,_7cd,_7ce,lang){lang.extend(_7cd,{focused:false,onFocus:function(){},onBlur:function(){},_onFocus:function(){this.onFocus();},_onBlur:function(){this.onBlur();}});return _7ce("dijit._FocusMixin",null,{_focusManager:_7cc});});},"dojox/date/islamic/Date":function(){define("dojox/date/islamic/Date",["dojo/_base/lang","dojo/_base/declare","dojo/date"],function(lang,_7cf,dd){var _7d0=_7cf("dojox.date.islamic.Date",null,{_date:0,_month:0,_year:0,_hours:0,_minutes:0,_seconds:0,_milliseconds:0,_day:0,_GREGORIAN_EPOCH:1721425.5,_ISLAMIC_EPOCH:1948439.5,constructor:function(){var len=arguments.length;if(!len){this.fromGregorian(new Date());}else{if(len==1){var arg0=arguments[0];if(typeof arg0=="number"){arg0=new Date(arg0);}if(arg0 instanceof Date){this.fromGregorian(arg0);}else{if(arg0==""){this._date=new Date("");}else{this._year=arg0._year;this._month=arg0._month;this._date=arg0._date;this._hours=arg0._hours;this._minutes=arg0._minutes;this._seconds=arg0._seconds;this._milliseconds=arg0._milliseconds;}}}else{if(len>=3){this._year+=arguments[0];this._month+=arguments[1];this._date+=arguments[2];this._hours+=arguments[3]||0;this._minutes+=arguments[4]||0;this._seconds+=arguments[5]||0;this._milliseconds+=arguments[6]||0;}}}},getDate:function(){return this._date;},getMonth:function(){return this._month;},getFullYear:function(){return this._year;},getDay:function(){return this.toGregorian().getDay();},getHours:function(){return this._hours;},getMinutes:function(){return this._minutes;},getSeconds:function(){return this._seconds;},getMilliseconds:function(){return this._milliseconds;},setDate:function(date){date=parseInt(date);if(date>0&&date<=this.getDaysInIslamicMonth(this._month,this._year)){this._date=date;}else{var _7d1;if(date>0){for(_7d1=this.getDaysInIslamicMonth(this._month,this._year);date>_7d1;date-=_7d1,_7d1=this.getDaysInIslamicMonth(this._month,this._year)){this._month++;if(this._month>=12){this._year++;this._month-=12;}}this._date=date;}else{for(_7d1=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1);date<=0;_7d1=this.getDaysInIslamicMonth((this._month-1)>=0?(this._month-1):11,((this._month-1)>=0)?this._year:this._year-1)){this._month--;if(this._month<0){this._year--;this._month+=12;}date+=_7d1;}this._date=date;}}return this;},setFullYear:function(year){this._year=+year;},setMonth:function(_7d2){this._year+=Math.floor(_7d2/12);if(_7d2>0){this._month=Math.floor(_7d2%12);}else{this._month=Math.floor(((_7d2%12)+12)%12);}},setHours:function(){var _7d3=arguments.length;var _7d4=0;if(_7d3>=1){_7d4=parseInt(arguments[0]);}if(_7d3>=2){this._minutes=parseInt(arguments[1]);}if(_7d3>=3){this._seconds=parseInt(arguments[2]);}if(_7d3==4){this._milliseconds=parseInt(arguments[3]);}while(_7d4>=24){this._date++;var _7d5=this.getDaysInIslamicMonth(this._month,this._year);if(this._date>_7d5){this._month++;if(this._month>=12){this._year++;this._month-=12;}this._date-=_7d5;}_7d4-=24;}this._hours=_7d4;},_addMinutes:function(_7d6){_7d6+=this._minutes;this.setMinutes(_7d6);this.setHours(this._hours+parseInt(_7d6/60));return this;},_addSeconds:function(_7d7){_7d7+=this._seconds;this.setSeconds(_7d7);this._addMinutes(parseInt(_7d7/60));return this;},_addMilliseconds:function(_7d8){_7d8+=this._milliseconds;this.setMilliseconds(_7d8);this._addSeconds(parseInt(_7d8/1000));return this;},setMinutes:function(_7d9){this._minutes=_7d9%60;return this;},setSeconds:function(_7da){this._seconds=_7da%60;return this;},setMilliseconds:function(_7db){this._milliseconds=_7db%1000;return this;},toString:function(){if(isNaN(this._date)){return "Invalidate Date";}else{var x=new Date();x.setHours(this._hours);x.setMinutes(this._minutes);x.setSeconds(this._seconds);x.setMilliseconds(this._milliseconds);return this._month+" "+this._date+" "+this._year+" "+x.toTimeString();}},toGregorian:function(){var _7dc=this._year;var _7dd=this._month;var _7de=this._date;var _7df=_7de+Math.ceil(29.5*_7dd)+(_7dc-1)*354+Math.floor((3+(11*_7dc))/30)+this._ISLAMIC_EPOCH-1;var wjd=Math.floor(_7df-0.5)+0.5,_7e0=wjd-this._GREGORIAN_EPOCH,_7e1=Math.floor(_7e0/146097),dqc=this._mod(_7e0,146097),cent=Math.floor(dqc/36524),_7e2=this._mod(dqc,36524),quad=Math.floor(_7e2/1461),_7e3=this._mod(_7e2,1461),_7e4=Math.floor(_7e3/365),year=(_7e1*400)+(cent*100)+(quad*4)+_7e4;if(!(cent==4||_7e4==4)){year++;}var _7e5=this._GREGORIAN_EPOCH+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400);var _7e6=wjd-_7e5;var tjd=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((739/12)+((dd.isLeapYear(new Date(year,3,1))?-1:-2))+1);var _7e7=((wjd<tjd)?0:(dd.isLeapYear(new Date(year,3,1))?1:2));var _7e8=Math.floor((((_7e6+_7e7)*12)+373)/367);var tjd2=(this._GREGORIAN_EPOCH-1)+(365*(year-1))+Math.floor((year-1)/4)-(Math.floor((year-1)/100))+Math.floor((year-1)/400)+Math.floor((((367*_7e8)-362)/12)+((_7e8<=2)?0:(dd.isLeapYear(new Date(year,_7e8,1))?-1:-2))+1);var day=(wjd-tjd2)+1;var _7e9=new Date(year,(_7e8-1),day,this._hours,this._minutes,this._seconds,this._milliseconds);return _7e9;},fromGregorian:function(_7ea){var date=new Date(_7ea);var _7eb=date.getFullYear(),_7ec=date.getMonth(),gDay=date.getDate();var _7ed=(this._GREGORIAN_EPOCH-1)+(365*(_7eb-1))+Math.floor((_7eb-1)/4)+(-Math.floor((_7eb-1)/100))+Math.floor((_7eb-1)/400)+Math.floor((((367*(_7ec+1))-362)/12)+(((_7ec+1)<=2)?0:(dd.isLeapYear(date)?-1:-2))+gDay);_7ed=Math.floor(_7ed)+0.5;var days=_7ed-this._ISLAMIC_EPOCH;var _7ee=Math.floor((30*days+10646)/10631);var _7ef=Math.ceil((days-29-this._yearStart(_7ee))/29.5);_7ef=Math.min(_7ef,11);var hDay=Math.ceil(days-this._monthStart(_7ee,_7ef))+1;this._date=hDay;this._month=_7ef;this._year=_7ee;this._hours=date.getHours();this._minutes=date.getMinutes();this._seconds=date.getSeconds();this._milliseconds=date.getMilliseconds();this._day=date.getDay();return this;},valueOf:function(){return this.toGregorian().valueOf();},_yearStart:function(year){return (year-1)*354+Math.floor((3+11*year)/30);},_monthStart:function(year,_7f0){return Math.ceil(29.5*_7f0)+(year-1)*354+Math.floor((3+11*year)/30);},_civilLeapYear:function(year){return (14+11*year)%30<11;},getDaysInIslamicMonth:function(_7f1,year){var _7f2=0;_7f2=29+((_7f1+1)%2);if(_7f1==11&&this._civilLeapYear(year)){_7f2++;}return _7f2;},_mod:function(a,b){return a-(b*Math.floor(a/b));}});_7d0.getDaysInIslamicMonth=function(_7f3){return new _7d0().getDaysInIslamicMonth(_7f3.getMonth(),_7f3.getFullYear());};return _7d0;});},"dijit/_Templated":function(){define("dijit/_Templated",["./_WidgetBase","./_TemplatedMixin","./_WidgetsInTemplateMixin","dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/kernel"],function(_7f4,_7f5,_7f6,_7f7,_7f8,lang,_7f9){lang.extend(_7f4,{waiRole:"",waiState:""});return _7f8("dijit._Templated",[_7f5,_7f6],{widgetsInTemplate:false,constructor:function(){_7f9.deprecated(this.declaredClass+": dijit._Templated deprecated, use dijit._TemplatedMixin and if necessary dijit._WidgetsInTemplateMixin","","2.0");},_attachTemplateNodes:function(_7fa,_7fb){this.inherited(arguments);var _7fc=lang.isArray(_7fa)?_7fa:(_7fa.all||_7fa.getElementsByTagName("*"));var x=lang.isArray(_7fa)?0:-1;for(;x<_7fc.length;x++){var _7fd=(x==-1)?_7fa:_7fc[x];var role=_7fb(_7fd,"waiRole");if(role){_7fd.setAttribute("role",role);}var _7fe=_7fb(_7fd,"waiState");if(_7fe){_7f7.forEach(_7fe.split(/\s*,\s*/),function(_7ff){if(_7ff.indexOf("-")!=-1){var pair=_7ff.split("-");_7fd.setAttribute("aria-"+pair[0],pair[1]);}});}}}});});},"dijit/form/_ToggleButtonMixin":function(){define("dijit/form/_ToggleButtonMixin",["dojo/_base/declare","dojo/dom-attr"],function(_800,_801){return _800("dijit.form._ToggleButtonMixin",null,{checked:false,_aria_attr:"aria-pressed",_onClick:function(evt){var _802=this.checked;this._set("checked",!_802);var ret=this.inherited(arguments);this.set("checked",ret?this.checked:_802);return ret;},_setCheckedAttr:function(_803,_804){this._set("checked",_803);var node=this.focusNode||this.domNode;if(this._created){if(_801.get(node,"checked")!=!!_803){_801.set(node,"checked",!!_803);}}node.setAttribute(this._aria_attr,String(_803));this._handleOnChange(_803,_804);},postCreate:function(){this.inherited(arguments);var node=this.focusNode||this.domNode;if(this.checked){node.setAttribute("checked","checked");}},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});});},"dijit/focus":function(){define("dijit/focus",["dojo/aspect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/Evented","dojo/_base/lang","dojo/on","dojo/ready","dojo/sniff","dojo/Stateful","dojo/_base/unload","dojo/_base/window","dojo/window","./a11y","./registry","./main"],function(_805,_806,dom,_807,_808,_809,lang,on,_80a,has,_80b,_80c,win,_80d,a11y,_80e,_80f){var _810=_806([_80b,_809],{curNode:null,activeStack:[],constructor:function(){var _811=lang.hitch(this,function(node){if(dom.isDescendant(this.curNode,node)){this.set("curNode",null);}if(dom.isDescendant(this.prevNode,node)){this.set("prevNode",null);}});_805.before(_808,"empty",_811);_805.before(_808,"destroy",_811);},registerIframe:function(_812){return this.registerWin(_812.contentWindow,_812);},registerWin:function(_813,_814){var _815=this;var _816=function(evt){_815._justMouseDowned=true;setTimeout(function(){_815._justMouseDowned=false;},0);if(has("ie")&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}_815._onTouchNode(_814||evt.target||evt.srcElement,"mouse");};var doc=has("ie")?_813.document.documentElement:_813.document;if(doc){if(has("ie")){_813.document.body.attachEvent("onmousedown",_816);var _817=function(evt){var tag=evt.srcElement.tagName.toLowerCase();if(tag=="#document"||tag=="body"){return;}if(a11y.isTabNavigable(evt.srcElement)){_815._onFocusNode(_814||evt.srcElement);}else{_815._onTouchNode(_814||evt.srcElement);}};doc.attachEvent("onfocusin",_817);var _818=function(evt){_815._onBlurNode(_814||evt.srcElement);};doc.attachEvent("onfocusout",_818);return {remove:function(){_813.document.detachEvent("onmousedown",_816);doc.detachEvent("onfocusin",_817);doc.detachEvent("onfocusout",_818);doc=null;}};}else{doc.body.addEventListener("mousedown",_816,true);doc.body.addEventListener("touchstart",_816,true);var _819=function(evt){_815._onFocusNode(_814||evt.target);};doc.addEventListener("focus",_819,true);var _81a=function(evt){_815._onBlurNode(_814||evt.target);};doc.addEventListener("blur",_81a,true);return {remove:function(){doc.body.removeEventListener("mousedown",_816,true);doc.body.removeEventListener("touchstart",_816,true);doc.removeEventListener("focus",_819,true);doc.removeEventListener("blur",_81a,true);doc=null;}};}}},_onBlurNode:function(node){if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);}this._clearFocusTimer=setTimeout(lang.hitch(this,function(){this.set("prevNode",this.curNode);this.set("curNode",null);}),0);if(this._justMouseDowned){return;}if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);}this._clearActiveWidgetsTimer=setTimeout(lang.hitch(this,function(){delete this._clearActiveWidgetsTimer;this._setStack([]);}),0);},_onTouchNode:function(node,by){if(this._clearActiveWidgetsTimer){clearTimeout(this._clearActiveWidgetsTimer);delete this._clearActiveWidgetsTimer;}var _81b=[];try{while(node){var _81c=_807.get(node,"dijitPopupParent");if(_81c){node=_80e.byId(_81c).domNode;}else{if(node.tagName&&node.tagName.toLowerCase()=="body"){if(node===win.body()){break;}node=_80d.get(node.ownerDocument).frameElement;}else{var id=node.getAttribute&&node.getAttribute("widgetId"),_81d=id&&_80e.byId(id);if(_81d&&!(by=="mouse"&&_81d.get("disabled"))){_81b.unshift(id);}node=node.parentNode;}}}}catch(e){}this._setStack(_81b,by);},_onFocusNode:function(node){if(!node){return;}if(node.nodeType==9){return;}if(this._clearFocusTimer){clearTimeout(this._clearFocusTimer);delete this._clearFocusTimer;}this._onTouchNode(node);if(node==this.curNode){return;}this.set("prevNode",this.curNode);this.set("curNode",node);},_setStack:function(_81e,by){var _81f=this.activeStack;this.set("activeStack",_81e);for(var _820=0;_820<Math.min(_81f.length,_81e.length);_820++){if(_81f[_820]!=_81e[_820]){break;}}var _821;for(var i=_81f.length-1;i>=_820;i--){_821=_80e.byId(_81f[i]);if(_821){_821._hasBeenBlurred=true;_821.set("focused",false);if(_821._focusManager==this){_821._onBlur(by);}this.emit("widget-blur",_821,by);}}for(i=_820;i<_81e.length;i++){_821=_80e.byId(_81e[i]);if(_821){_821.set("focused",true);if(_821._focusManager==this){_821._onFocus(by);}this.emit("widget-focus",_821,by);}}},focus:function(node){if(node){try{node.focus();}catch(e){}}}});var _822=new _810();_80a(function(){var _823=_822.registerWin(_80d.get(win.doc));if(has("ie")){_80c.addOnWindowUnload(function(){if(_823){_823.remove();_823=null;}});}});_80f.focus=function(node){_822.focus(node);};for(var attr in _822){if(!/^_/.test(attr)){_80f.focus[attr]=typeof _822[attr]=="function"?lang.hitch(_822,attr):_822[attr];}}_822.watch(function(attr,_824,_825){_80f.focus[attr]=_825;});return _822;});},"esri/dijit/editing/Util":function(){define(["dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel"],function(lang,_826,has,_827){var util={};util={findFeatures:function(ids,_828,_829){var _82a=_828.objectIdField;var _82b=_828.graphics;var _82c=_826.filter(_82b,function(_82d){return _826.some(ids,function(id){return _82d.attributes[_82a]===id.objectId;});});if(_829){_829(_82c);}else{return _82c;}},getSelection:function(_82e){var _82f=[];_826.forEach(_82e,function(_830){var _831=_830.getSelectedFeatures();_826.forEach(_831,function(_832){_82f.push(_832);});});return _82f;}};if(has("extend-esri")){lang.setObject("dijit.editing.Util.LayerHelper",util,_827);}return util;});},"dijit/form/_ListBase":function(){define("dijit/form/_ListBase",["dojo/_base/declare","dojo/on","dojo/window"],function(_833,on,_834){return _833("dijit.form._ListBase",null,{selected:null,_listConnect:function(_835,_836){var self=this;return self.own(on(self.containerNode,on.selector(function(_837,_838,_839){return _837.parentNode==_839;},_835),function(evt){evt.preventDefault();self[_836](evt,this);}));},selectFirstNode:function(){var _83a=this.containerNode.firstChild;while(_83a&&_83a.style.display=="none"){_83a=_83a.nextSibling;}this._setSelectedAttr(_83a);},selectLastNode:function(){var last=this.containerNode.lastChild;while(last&&last.style.display=="none"){last=last.previousSibling;}this._setSelectedAttr(last);},selectNextNode:function(){var _83b=this.selected;if(!_83b){this.selectFirstNode();}else{var next=_83b.nextSibling;while(next&&next.style.display=="none"){next=next.nextSibling;}if(!next){this.selectFirstNode();}else{this._setSelectedAttr(next);}}},selectPreviousNode:function(){var _83c=this.selected;if(!_83c){this.selectLastNode();}else{var prev=_83c.previousSibling;while(prev&&prev.style.display=="none"){prev=prev.previousSibling;}if(!prev){this.selectLastNode();}else{this._setSelectedAttr(prev);}}},_setSelectedAttr:function(node){if(this.selected!=node){var _83d=this.selected;if(_83d){this.onDeselect(_83d);this.selected=null;}if(node){this.selected=node;_834.scrollIntoView(node);this.onSelect(node);}}else{if(node){this.onSelect(node);}}}});});},"dojo/store/Memory":function(){define(["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(_83e,_83f,_840){var base=null;return _83e("dojo.store.Memory",base,{constructor:function(_841){for(var i in _841){this[i]=_841[i];}this.setData(this.data||[]);},data:null,idProperty:"id",index:null,queryEngine:_840,get:function(id){return this.data[this.index[id]];},getIdentity:function(_842){return _842[this.idProperty];},put:function(_843,_844){var data=this.data,_845=this.index,_846=this.idProperty;var id=_843[_846]=(_844&&"id" in _844)?_844.id:_846 in _843?_843[_846]:Math.random();if(id in _845){if(_844&&_844.overwrite===false){throw new Error("Object already exists");}data[_845[id]]=_843;}else{_845[id]=data.push(_843)-1;}return id;},add:function(_847,_848){(_848=_848||{}).overwrite=false;return this.put(_847,_848);},remove:function(id){var _849=this.index;var data=this.data;if(id in _849){data.splice(_849[id],1);this.setData(data);return true;}},query:function(_84a,_84b){return _83f(this.queryEngine(_84a,_84b)(this.data));},setData:function(data){if(data.items){this.idProperty=data.identifier;data=this.data=data.items;}else{this.data=data;}this.index={};for(var i=0,l=data.length;i<l;i++){this.index[data[i][this.idProperty]]=i;}}});});},"dijit/_editor/plugins/LinkDialog":function(){define("dijit/_editor/plugins/LinkDialog",["require","dojo/_base/declare","dojo/dom-attr","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/query","dojo/string","../../_Widget","../_Plugin","../../form/DropDownButton","../range"],function(_84c,_84d,_84e,keys,lang,has,_84f,_850,_851,_852,_853,_854){var _855=_84d("dijit._editor.plugins.LinkDialog",_852,{buttonClass:_853,useDefaultCommand:false,urlRegExp:"((https?|ftps?|file)\\://|./|../|/|)(/[a-zA-Z]{1,1}:/|)(((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)*(?:[a-zA-Z](?:[-\\da-zA-Z]{0,80}[\\da-zA-Z])?)\\.?)|(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])|(0[xX]0*[\\da-fA-F]?[\\da-fA-F]\\.){3}0[xX]0*[\\da-fA-F]?[\\da-fA-F]|(0+[0-3][0-7][0-7]\\.){3}0+[0-3][0-7][0-7]|(0|[1-9]\\d{0,8}|[1-3]\\d{9}|4[01]\\d{8}|42[0-8]\\d{7}|429[0-3]\\d{6}|4294[0-8]\\d{5}|42949[0-5]\\d{4}|429496[0-6]\\d{3}|4294967[01]\\d{2}|42949672[0-8]\\d|429496729[0-5])|0[xX]0*[\\da-fA-F]{1,8}|([\\da-fA-F]{1,4}\\:){7}[\\da-fA-F]{1,4}|([\\da-fA-F]{1,4}\\:){6}((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.){3}(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])))(\\:\\d+)?(/(?:[^?#\\s/]+/)*(?:[^?#\\s/]{0,}(?:\\?[^?#\\s/]*)?(?:#.*)?)?)?",emailRegExp:"<?(mailto\\:)([!#-'*+\\-\\/-9=?A-Z^-~]+[.])*[!#-'*+\\-\\/-9=?A-Z^-~]+"+"@"+"((?:(?:[\\da-zA-Z](?:[-\\da-zA-Z]{0,61}[\\da-zA-Z])?)\\.)+(?:[a-zA-Z](?:[-\\da-zA-Z]{0,6}[\\da-zA-Z])?)\\.?)|localhost|^[^-][a-zA-Z0-9_-]*>?",htmlTemplate:"<a href=\"${urlInput}\" _djrealurl=\"${urlInput}\""+" target=\"${targetSelect}\""+">${textInput}</a>",tag:"a",_hostRxp:/^((([^\[:]+):)?([^@]+)@)?(\[([^\]]+)\]|([^\[:]*))(:([0-9]+))?$/,_userAtRxp:/^([!#-'*+\-\/-9=?A-Z^-~]+[.])*[!#-'*+\-\/-9=?A-Z^-~]+@/i,linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' "+"id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='true' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_targetSelect'>${target}</label>","</td><td>","<select id='${id}_targetSelect' name='targetSelect' data-dojo-type='dijit.form.Select'>","<option selected='selected' value='_self'>${currentWindow}</option>","<option value='_blank'>${newWindow}</option>","<option value='_top'>${topWindow}</option>","<option value='_parent'>${parentWindow}</option>","</select>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),_initButton:function(){this.inherited(arguments);this.button.loadDropDown=lang.hitch(this,"_loadDropDown");this._connectTagEvents();},_loadDropDown:function(_856){_84c(["dojo/i18n","../../TooltipDialog","../../registry","../../form/Button","../../form/Select","../../form/ValidationTextBox","dojo/i18n!../../nls/common","dojo/i18n!../nls/LinkDialog"],lang.hitch(this,function(i18n,_857,_858){var _859=this;this.tag=this.command=="insertImage"?"img":"a";var _85a=lang.delegate(i18n.getLocalization("dijit","common",this.lang),i18n.getLocalization("dijit._editor","LinkDialog",this.lang));var _85b=(this.dropDown=this.button.dropDown=new _857({title:_85a[this.command+"Title"],ownerDocument:this.editor.ownerDocument,dir:this.editor.dir,execute:lang.hitch(this,"setValue"),onOpen:function(){_859._onOpenDialog();_857.prototype.onOpen.apply(this,arguments);},onCancel:function(){setTimeout(lang.hitch(_859,"_onCloseDialog"),0);}}));_85a.urlRegExp=this.urlRegExp;_85a.id=_858.getUniqueId(this.editor.id);this._uniqueId=_85a.id;this._setContent(_85b.title+"<div style='border-bottom: 1px black solid;padding-bottom:2pt;margin-bottom:4pt'></div>"+_850.substitute(this.linkDialogTemplate,_85a));_85b.startup();this._urlInput=_858.byId(this._uniqueId+"_urlInput");this._textInput=_858.byId(this._uniqueId+"_textInput");this._setButton=_858.byId(this._uniqueId+"_setButton");this.connect(_858.byId(this._uniqueId+"_cancelButton"),"onClick",function(){this.dropDown.onCancel();});if(this._urlInput){this.connect(this._urlInput,"onChange","_checkAndFixInput");}if(this._textInput){this.connect(this._textInput,"onChange","_checkAndFixInput");}this._urlRegExp=new RegExp("^"+this.urlRegExp+"$","i");this._emailRegExp=new RegExp("^"+this.emailRegExp+"$","i");this._urlInput.isValid=lang.hitch(this,function(){var _85c=this._urlInput.get("value");return this._urlRegExp.test(_85c)||this._emailRegExp.test(_85c);});this.connect(_85b.domNode,"onkeypress",function(e){if(e&&e.charOrCode==keys.ENTER&&!e.shiftKey&&!e.metaKey&&!e.ctrlKey&&!e.altKey){if(!this._setButton.get("disabled")){_85b.onExecute();_85b.execute(_85b.get("value"));}}});_856();}));},_checkAndFixInput:function(){var self=this;var url=this._urlInput.get("value");var _85d=function(url){var _85e=false;var _85f=false;if(url&&url.length>1){url=lang.trim(url);if(url.indexOf("mailto:")!==0){if(url.indexOf("/")>0){if(url.indexOf("://")===-1){if(url.charAt(0)!=="/"&&url.indexOf("./")&&url.indexOf("../")!==0){if(self._hostRxp.test(url)){_85e=true;}}}}else{if(self._userAtRxp.test(url)){_85f=true;}}}}if(_85e){self._urlInput.set("value","http://"+url);}if(_85f){self._urlInput.set("value","mailto:"+url);}self._setButton.set("disabled",!self._isValid());};if(this._delayedCheck){clearTimeout(this._delayedCheck);this._delayedCheck=null;}this._delayedCheck=setTimeout(function(){_85d(url);},250);},_connectTagEvents:function(){this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"ondblclick",this._onDblClick);}));},_isValid:function(){return this._urlInput.isValid()&&this._textInput.isValid();},_setContent:function(_860){this.dropDown.set({parserScope:"dojo",content:_860});},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}return args;},setValue:function(args){this._onCloseDialog();if(has("ie")<9){var sel=_854.getSelection(this.editor.window);var _861=sel.getRangeAt(0);var a=_861.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(a&&(a.nodeName&&a.nodeName.toLowerCase()===this.tag)){if(this.editor.queryCommandEnabled("unlink")){this.editor._sCall("selectElementChildren",[a]);this.editor.execCommand("unlink");}}}args=this._checkValues(args);this.editor.execCommand("inserthtml",_850.substitute(this.htmlTemplate,args));_84f("a",this.editor.document).forEach(function(a){if(!a.innerHTML&&!_84e.has(a,"name")){a.parentNode.removeChild(a);}},this);},_onCloseDialog:function(){this.editor.focus();},_getCurrentValues:function(a){var url,text,_862;if(a&&a.tagName.toLowerCase()===this.tag){url=a.getAttribute("_djrealurl")||a.getAttribute("href");_862=a.getAttribute("target")||"_self";text=a.textContent||a.innerText;this.editor._sCall("selectElement",[a,true]);}else{text=this.editor._sCall("getSelectedText");}return {urlInput:url||"",textInput:text||"",targetSelect:_862||""};},_onOpenDialog:function(){var a,b,fc;if(has("ie")){var sel=_854.getSelection(this.editor.window);if(sel.rangeCount){var _863=sel.getRangeAt(0);a=_863.endContainer;if(a.nodeType===3){a=a.parentNode;}if(a&&(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){a=this.editor._sCall("getSelectedElement",[this.tag]);}if(!a||(a.nodeName&&a.nodeName.toLowerCase()!==this.tag)){b=this.editor._sCall("getAncestorElement",[this.tag]);if(b&&(b.nodeName&&b.nodeName.toLowerCase()==this.tag)){a=b;this.editor._sCall("selectElement",[a]);}else{if(_863.startContainer===_863.endContainer){fc=_863.startContainer.firstChild;if(fc&&(fc.nodeName&&fc.nodeName.toLowerCase()==this.tag)){a=fc;this.editor._sCall("selectElement",[a]);}}}}}}else{a=this.editor._sCall("getAncestorElement",[this.tag]);}this.dropDown.reset();this._setButton.set("disabled",true);this.dropDown.set("value",this._getCurrentValues(a));},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_84e.get(t,"href")){var _864=this.editor;this.editor._sCall("selectElement",[t]);_864.onDisplayChanged();if(_864._updateTimer){_864._updateTimer.remove();delete _864._updateTimer;}_864.onNormalizedDisplayChanged();var _865=this.button;setTimeout(function(){_865.set("disabled",false);_865.loadAndOpenDropDown().then(function(){if(_865.dropDown.focus){_865.dropDown.focus();}});},10);}}}});var _866=_84d("dijit._editor.plugins.ImgLinkDialog",[_855],{linkDialogTemplate:["<table role='presentation'><tr><td>","<label for='${id}_urlInput'>${url}</label>","</td><td>","<input dojoType='dijit.form.ValidationTextBox' regExp='${urlRegExp}' "+"required='true' id='${id}_urlInput' name='urlInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","<label for='${id}_textInput'>${text}</label>","</td><td>","<input data-dojo-type='dijit.form.ValidationTextBox' required='false' id='${id}_textInput' "+"name='textInput' data-dojo-props='intermediateChanges:true'/>","</td></tr><tr><td>","</td><td>","</td></tr><tr><td colspan='2'>","<button data-dojo-type='dijit.form.Button' type='submit' id='${id}_setButton'>${set}</button>","<button data-dojo-type='dijit.form.Button' type='button' id='${id}_cancelButton'>${buttonCancel}</button>","</td></tr></table>"].join(""),htmlTemplate:"<img src=\"${urlInput}\" _djrealurl=\"${urlInput}\" alt=\"${textInput}\" />",tag:"img",_getCurrentValues:function(img){var url,text;if(img&&img.tagName.toLowerCase()===this.tag){url=img.getAttribute("_djrealurl")||img.getAttribute("src");text=img.getAttribute("alt");this.editor._sCall("selectElement",[img,true]);}else{text=this.editor._sCall("getSelectedText",[]);}return {urlInput:url||"",textInput:text||""};},_isValid:function(){return this._urlInput.isValid();},_connectTagEvents:function(){this.inherited(arguments);this.editor.onLoadDeferred.then(lang.hitch(this,function(){this.connect(this.editor.editNode,"onmousedown",this._selectTag);}));},_selectTag:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag){this.editor._sCall("selectElement",[t]);}}},_checkValues:function(args){if(args&&args.urlInput){args.urlInput=args.urlInput.replace(/"/g,"&quot;");}if(args&&args.textInput){args.textInput=args.textInput.replace(/"/g,"&quot;");}return args;},_onDblClick:function(e){if(e&&e.target){var t=e.target;var tg=t.tagName?t.tagName.toLowerCase():"";if(tg===this.tag&&_84e.get(t,"src")){var _867=this.editor;this.editor._sCall("selectElement",[t]);_867.onDisplayChanged();if(_867._updateTimer){_867._updateTimer.remove();delete _867._updateTimer;}_867.onNormalizedDisplayChanged();var _868=this.button;setTimeout(function(){_868.set("disabled",false);_868.loadAndOpenDropDown().then(function(){if(_868.dropDown.focus){_868.dropDown.focus();}});},10);}}}});_852.registry["createLink"]=function(){return new _855({command:"createLink"});};_852.registry["insertImage"]=function(){return new _866({command:"insertImage"});};_855.ImgLinkDialog=_866;return _855;});},"dojo/date/stamp":function(){define(["../_base/lang","../_base/array"],function(lang,_869){var _86a={};lang.setObject("dojo.date.stamp",_86a);_86a.fromISOString=function(_86b,_86c){if(!_86a._isoRegExp){_86a._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _86d=_86a._isoRegExp.exec(_86b),_86e=null;if(_86d){_86d.shift();if(_86d[1]){_86d[1]--;}if(_86d[6]){_86d[6]*=1000;}if(_86c){_86c=new Date(_86c);_869.forEach(_869.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _86c["get"+prop]();}),function(_86f,_870){_86d[_870]=_86d[_870]||_86f;});}_86e=new Date(_86d[0]||1970,_86d[1]||0,_86d[2]||1,_86d[3]||0,_86d[4]||0,_86d[5]||0,_86d[6]||0);if(_86d[0]<100){_86e.setFullYear(_86d[0]||1970);}var _871=0,_872=_86d[7]&&_86d[7].charAt(0);if(_872!="Z"){_871=((_86d[8]||0)*60)+(Number(_86d[9])||0);if(_872!="-"){_871*=-1;}}if(_872){_871-=_86e.getTimezoneOffset();}if(_871){_86e.setTime(_86e.getTime()+_871*60000);}}return _86e;};_86a.toISOString=function(_873,_874){var _875=function(n){return (n<10)?"0"+n:n;};_874=_874||{};var _876=[],_877=_874.zulu?"getUTC":"get",date="";if(_874.selector!="time"){var year=_873[_877+"FullYear"]();date=["0000".substr((year+"").length)+year,_875(_873[_877+"Month"]()+1),_875(_873[_877+"Date"]())].join("-");}_876.push(date);if(_874.selector!="date"){var time=[_875(_873[_877+"Hours"]()),_875(_873[_877+"Minutes"]()),_875(_873[_877+"Seconds"]())].join(":");var _878=_873[_877+"Milliseconds"]();if(_874.milliseconds){time+="."+(_878<100?"0":"")+_875(_878);}if(_874.zulu){time+="Z";}else{if(_874.selector!="time"){var _879=_873.getTimezoneOffset();var _87a=Math.abs(_879);time+=(_879>0?"-":"+")+_875(Math.floor(_87a/60))+":"+_875(_87a%60);}}_876.push(time);}return _876.join("T");};return _86a;});},"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n","dijit/form/MappedTextBox":function(){define("dijit/form/MappedTextBox",["dojo/_base/declare","dojo/dom-construct","./ValidationTextBox"],function(_87b,_87c,_87d){return _87b("dijit.form.MappedTextBox",_87d,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},_setNameAttr:null,serialize:function(val){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=_87c.place("<input type='hidden'"+(this.name?" name=\""+this.name.replace(/"/g,"&quot;")+"\"":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});});},"dijit/form/DataList":function(){define("dijit/form/DataList",["dojo/_base/declare","dojo/dom","dojo/_base/lang","dojo/query","dojo/store/Memory","../registry"],function(_87e,dom,lang,_87f,_880,_881){function _882(_883){return {id:_883.value,value:_883.value,name:lang.trim(_883.innerText||_883.textContent||"")};};return _87e("dijit.form.DataList",_880,{constructor:function(_884,_885){this.domNode=dom.byId(_885);lang.mixin(this,_884);if(this.id){_881.add(this);}this.domNode.style.display="none";this.inherited(arguments,[{data:_87f("option",this.domNode).map(_882)}]);},destroy:function(){_881.remove(this.id);},fetchSelectedItem:function(){var _886=_87f("> option[selected]",this.domNode)[0]||_87f("> option",this.domNode)[0];return _886&&_882(_886);}});});},"dijit/form/_Spinner":function(){require({cache:{"url:dijit/form/templates/Spinner.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitButtonNode dijitSpinnerButtonContainer\"\n\t\t><input class=\"dijitReset dijitInputField dijitSpinnerButtonInner\" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t/><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitUpArrowButton\"\n\t\t\tdata-dojo-attach-point=\"upArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9650; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t\t><div class=\"dijitReset dijitLeft dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\tdata-dojo-attach-point=\"downArrowNode\"\n\t\t\t><div class=\"dijitArrowButtonInner\"\n\t\t\t\t><input class=\"dijitReset dijitInputField\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t\t\t${_buttonInputDisabled}\n\t\t\t/></div\n\t\t></div\n\t></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' data-dojo-attach-point=\"textbox,focusNode\" type=\"${type}\" data-dojo-attach-event=\"onkeypress:_onKeyPress\"\n\t\t\trole=\"spinbutton\" autocomplete=\"off\" ${!nameAttrSetting}\n\t/></div\n></div>\n"}});define("dijit/form/_Spinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/mouse","../typematic","./RangeBoundTextBox","dojo/text!./templates/Spinner.html","./_TextBoxMixin"],function(_887,_888,keys,lang,has,_889,_88a,_88b,_88c,_88d){return _887("dijit.form._Spinner",_88b,{defaultTimeout:500,minimumTimeout:10,timeoutChangeRate:0.9,smallDelta:1,largeDelta:10,templateString:_88c,baseClass:"dijitTextBox dijitSpinner",cssStateNodes:{"upArrowNode":"dijitUpArrowButton","downArrowNode":"dijitDownArrowButton"},adjust:function(val){return val;},_arrowPressed:function(_88e,_88f,_890){if(this.disabled||this.readOnly){return;}this._setValueAttr(this.adjust(this.get("value"),_88f*_890),false);_88d.selectInputText(this.textbox,this.textbox.value.length);},_arrowReleased:function(){this._wheelTimer=null;},_typematicCallback:function(_891,node,evt){var inc=this.smallDelta;if(node==this.textbox){var key=evt.charOrCode;inc=(key==keys.PAGE_UP||key==keys.PAGE_DOWN)?this.largeDelta:this.smallDelta;node=(key==keys.UP_ARROW||key==keys.PAGE_UP)?this.upArrowNode:this.downArrowNode;}if(_891==-1){this._arrowReleased(node);}else{this._arrowPressed(node,(node==this.upArrowNode)?1:-1,inc);}},_wheelTimer:null,_mouseWheeled:function(evt){_888.stop(evt);var _892=evt.wheelDelta/120;if(Math.floor(_892)!=_892){_892=evt.wheelDelta>0?1:-1;}var _893=evt.detail?(evt.detail*-1):_892;if(_893!==0){var node=this[(_893>0?"upArrowNode":"downArrowNode")];this._arrowPressed(node,_893,this.smallDelta);if(this._wheelTimer){this._wheelTimer.remove();}this._wheelTimer=this.defer(function(){this._arrowReleased(node);},50);}},_setConstraintsAttr:function(_894){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){this.focusNode.setAttribute("aria-valuemin",this.constraints.min);}else{this.focusNode.removeAttribute("aria-valuemin");}if(this.constraints.max!==undefined){this.focusNode.setAttribute("aria-valuemax",this.constraints.max);}else{this.focusNode.removeAttribute("aria-valuemax");}}},_setValueAttr:function(_895,_896){this.focusNode.setAttribute("aria-valuenow",_895);this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,_889.wheel,"_mouseWheeled");this.own(_88a.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.UP_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_88a.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.DOWN_ARROW,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_88a.addListener(this.upArrowNode,this.textbox,{charOrCode:keys.PAGE_UP,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout),_88a.addListener(this.downArrowNode,this.textbox,{charOrCode:keys.PAGE_DOWN,ctrlKey:false,altKey:false,shiftKey:false,metaKey:false},this,"_typematicCallback",this.timeoutChangeRate,this.defaultTimeout,this.minimumTimeout));}});});},"esri/layers/SnapshotMode":function(){define(["dojo/_base/declare","dojo/_base/lang","dojo/has","esri/kernel","esri/SpatialReference","esri/tasks/query","esri/layers/RenderMode"],function(_897,lang,has,_898,_899,_89a,_89b){var _89c=_897([_89b],{declaredClass:"esri.layers._SnapshotMode",constructor:function(_89d){this.featureLayer=_89d;this._featureMap={};this._drawFeatures=lang.hitch(this,this._drawFeatures);this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},startup:function(){if(this.featureLayer._collection){this._applyTimeFilter();}else{this._fetchAll();}},propertyChangeHandler:function(type){if(this._init){if(type){if(this.featureLayer._collection){console.log("FeatureLayer: layer created by value (from a feature collection) does not support definition expressions and time definitions. Layer id = "+this.featureLayer.id);}else{this._fetchAll();}}else{this._applyTimeFilter();}}},drawFeature:function(_89e){var _89f=this.featureLayer,_8a0=_89f.objectIdField,oid=_89e.attributes[_8a0];this._addFeatureIIf(oid,_89e);this._incRefCount(oid);},resume:function(){this.propertyChangeHandler(0);},refresh:function(){var _8a1=this.featureLayer;if(_8a1._collection){_8a1._fireUpdateStart();_8a1._refresh(true);_8a1._fireUpdateEnd();}else{this._fetchAll();}},_getRequestId:function(_8a2){var id="_"+_8a2.name+_8a2.layerId+_8a2._ulid;return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_fetchAll:function(){var _8a3=this.featureLayer;if(_8a3._collection){return;}_8a3._fireUpdateStart();this._clearIIf();this._sendRequest();},_sendRequest:function(){var map=this.map,_8a4=this.featureLayer,_8a5=_8a4.getDefinitionExpression();var _8a6=new _89a();_8a6.outFields=_8a4.getOutFields();_8a6.where=_8a5||"1=1";_8a6.returnGeometry=true;_8a6.outSpatialReference=new _899(map.spatialReference.toJson());_8a6.timeExtent=_8a4.getTimeDefinition();_8a6.maxAllowableOffset=_8a4._maxOffset;if(_8a4._ts){_8a6._ts=(new Date()).getTime();}var _8a7;if(_8a4._usePatch){_8a7=this._getRequestId(_8a4);this._cancelPendingRequest(null,_8a7);}_8a4._task.execute(_8a6,this._drawFeatures,this._queryErrorHandler,_8a7);},_drawFeatures:function(_8a8){this._purgeRequests();var _8a9=_8a8.features,_8aa=this.featureLayer,_8ab=_8aa.objectIdField,i,len=_8a9.length,_8ac,oid;for(i=0;i<len;i++){_8ac=_8a9[i];oid=_8ac.attributes[_8ab];this._addFeatureIIf(oid,_8ac);this._incRefCount(oid);}this._applyTimeFilter(true);_8aa._fireUpdateEnd(null,_8a8.exceededTransferLimit?{queryLimitExceeded:true}:null);if(_8a8.exceededTransferLimit){_8aa.onQueryLimitExceeded();}},_queryErrorHandler:function(err){this._purgeRequests();var _8ad=this.featureLayer;_8ad._errorHandler(err);_8ad._fireUpdateEnd(err);}});if(has("extend-esri")){lang.setObject("layers._SnapshotMode",_89c,_898);}return _89c;});},"dijit/form/_ButtonMixin":function(){define("dijit/form/_ButtonMixin",["dojo/_base/declare","dojo/dom","dojo/_base/event","../registry"],function(_8ae,dom,_8af,_8b0){return _8ae("dijit.form._ButtonMixin",null,{label:"",type:"button",_onClick:function(e){if(this.disabled){_8af.stop(e);return false;}var _8b1=this.onClick(e)===false;if(!_8b1&&this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _8b2=_8b0.byNode(node);if(_8b2&&typeof _8b2._onSubmit=="function"){_8b2._onSubmit(e);_8b1=true;break;}}}if(_8b1){e.preventDefault();}return !_8b1;},postCreate:function(){this.inherited(arguments);dom.setSelectable(this.focusNode,false);},onClick:function(){return true;},_setLabelAttr:function(_8b3){this._set("label",_8b3);(this.containerNode||this.focusNode).innerHTML=_8b3;}});});},"dijit/form/_FormWidget":function(){define("dijit/form/_FormWidget",["dojo/_base/declare","dojo/has","dojo/_base/kernel","dojo/ready","../_Widget","../_CssStateMixin","../_TemplatedMixin","./_FormWidgetMixin"],function(_8b4,has,_8b5,_8b6,_8b7,_8b8,_8b9,_8ba){if(has("dijit-legacy-requires")){_8b6(0,function(){var _8bb=["dijit/form/_FormValueWidget"];require(_8bb);});}return _8b4("dijit.form._FormWidget",[_8b7,_8b9,_8b8,_8ba],{setDisabled:function(_8bc){_8b5.deprecated("setDisabled("+_8bc+") is deprecated. Use set('disabled',"+_8bc+") instead.","","2.0");this.set("disabled",_8bc);},setValue:function(_8bd){_8b5.deprecated("dijit.form._FormWidget:setValue("+_8bd+") is deprecated.  Use set('value',"+_8bd+") instead.","","2.0");this.set("value",_8bd);},getValue:function(){_8b5.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/"/g,"&quot;")+"\""):"";this.inherited(arguments);},_setTypeAttr:null});});},"dijit/form/NumberSpinner":function(){define("dijit/form/NumberSpinner",["dojo/_base/declare","dojo/_base/event","dojo/keys","./_Spinner","./NumberTextBox"],function(_8be,_8bf,keys,_8c0,_8c1){return _8be("dijit.form.NumberSpinner",[_8c0,_8c1.Mixin],{baseClass:"dijitTextBox dijitSpinner dijitNumberTextBox",adjust:function(val,_8c2){var tc=this.constraints,v=isNaN(val),_8c3=!isNaN(tc.max),_8c4=!isNaN(tc.min);if(v&&_8c2!=0){val=(_8c2>0)?_8c4?tc.min:_8c3?tc.max:0:_8c3?this.constraints.max:_8c4?tc.min:0;}var _8c5=val+_8c2;if(v||isNaN(_8c5)){return val;}if(_8c3&&(_8c5>tc.max)){_8c5=tc.max;}if(_8c4&&(_8c5<tc.min)){_8c5=tc.min;}return _8c5;},_onKeyPress:function(e){if((e.charOrCode==keys.HOME||e.charOrCode==keys.END)&&!(e.ctrlKey||e.altKey||e.metaKey)&&typeof this.get("value")!="undefined"){var _8c6=this.constraints[(e.charOrCode==keys.HOME?"min":"max")];if(typeof _8c6=="number"){this._setValueAttr(_8c6,false);}_8bf.stop(e);}}});});},"dijit/form/FilteringSelect":function(){define("dijit/form/FilteringSelect",["dojo/data/util/filter","dojo/_base/declare","dojo/_base/lang","dojo/when","./MappedTextBox","./ComboBoxMixin"],function(_8c7,_8c8,lang,when,_8c9,_8ca){return _8c8("dijit.form.FilteringSelect",[_8c9,_8ca],{required:true,_lastDisplayedValue:"",_isValidSubset:function(){return this._opened;},isValid:function(){return !!this.item||(!this.required&&this.get("displayedValue")=="");},_refreshState:function(){if(!this.searchTimer){this.inherited(arguments);}},_callbackSetLabel:function(_8cb,_8cc,_8cd,_8ce){if((_8cc&&_8cc[this.searchAttr]!==this._lastQuery)||(!_8cc&&_8cb.length&&this.store.getIdentity(_8cb[0])!=this._lastQuery)){return;}if(!_8cb.length){this.set("value","",_8ce||(_8ce===undefined&&!this.focused),this.textbox.value,null);}else{this.set("item",_8cb[0],_8ce);}},_openResultList:function(_8cf,_8d0,_8d1){if(_8d0[this.searchAttr]!==this._lastQuery){return;}this.inherited(arguments);if(this.item===undefined){this.validate(true);}},_getValueAttr:function(){return this.valueNode.value;},_getValueField:function(){return "value";},_setValueAttr:function(_8d2,_8d3,_8d4,item){if(!this._onChangeActive){_8d3=null;}if(item===undefined){if(_8d2===null||_8d2===""){_8d2="";if(!lang.isString(_8d4)){this._setDisplayedValueAttr(_8d4||"",_8d3);return;}}var self=this;this._lastQuery=_8d2;when(this.store.get(_8d2),function(item){self._callbackSetLabel(item?[item]:[],undefined,undefined,_8d3);});}else{this.valueNode.value=_8d2;this.inherited(arguments);}},_setItemAttr:function(item,_8d5,_8d6){this.inherited(arguments);this._lastDisplayedValue=this.textbox.value;},_getDisplayQueryString:function(text){return text.replace(/([\\\*\?])/g,"\\$1");},_setDisplayedValueAttr:function(_8d7,_8d8){if(_8d7==null){_8d7="";}if(!this._created){if(!("displayedValue" in this.params)){return;}_8d8=false;}if(this.store){this.closeDropDown();var _8d9=lang.clone(this.query);var qs=this._getDisplayQueryString(_8d7),q;if(this.store._oldAPI){q=qs;}else{q=_8c7.patternToRegExp(qs,this.ignoreCase);q.toString=function(){return qs;};}this._lastQuery=_8d9[this.searchAttr]=q;this.textbox.value=_8d7;this._lastDisplayedValue=_8d7;this._set("displayedValue",_8d7);var _8da=this;var _8db={ignoreCase:this.ignoreCase,deep:true};lang.mixin(_8db,this.fetchProperties);this._fetchHandle=this.store.query(_8d9,_8db);when(this._fetchHandle,function(_8dc){_8da._fetchHandle=null;_8da._callbackSetLabel(_8dc||[],_8d9,_8db,_8d8);},function(err){_8da._fetchHandle=null;if(!_8da._cancelingQuery){console.error("dijit.form.FilteringSelect: "+err.toString());}});}},undo:function(){this.set("displayedValue",this._lastDisplayedValue);}});});},"dijit/form/SimpleTextarea":function(){define("dijit/form/SimpleTextarea",["dojo/_base/declare","dojo/dom-class","dojo/sniff","./TextBox"],function(_8dd,_8de,has,_8df){return _8dd("dijit.form.SimpleTextarea",_8df,{baseClass:"dijitTextBox dijitTextArea",rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} data-dojo-attach-point='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(has("ie")&&this.cols){_8de.add(this.textbox,"dijitTextAreaCols");}},filter:function(_8e0){if(_8e0){_8e0=_8e0.replace(/\r/g,"");}return this.inherited(arguments);},_onInput:function(e){if(this.maxLength){var _8e1=parseInt(this.maxLength);var _8e2=this.textbox.value.replace(/\r/g,"");var _8e3=_8e2.length-_8e1;if(_8e3>0){var _8e4=this.textbox;if(_8e4.selectionStart){var pos=_8e4.selectionStart;var cr=0;if(has("opera")){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_8e2.substring(0,pos-_8e3-cr)+_8e2.substring(pos-cr);_8e4.setSelectionRange(pos-_8e3,pos-_8e3);}else{if(this.ownerDocument.selection){_8e4.focus();var _8e5=this.ownerDocument.selection.createRange();_8e5.moveStart("character",-_8e3);_8e5.text="";_8e5.select();}}}}this.inherited(arguments);}});});},"esri/tasks/SpatialRelationship":function(){define("esri/tasks/SpatialRelationship",["dojo/_base/lang","dojo/has","esri/kernel"],function(lang,has,_8e6){var _8e7={SPATIAL_REL_INTERSECTS:"esriSpatialRelIntersects",SPATIAL_REL_CONTAINS:"esriSpatialRelContains",SPATIAL_REL_CROSSES:"esriSpatialRelCrosses",SPATIAL_REL_ENVELOPEINTERSECTS:"esriSpatialRelEnvelopeIntersects",SPATIAL_REL_INDEXINTERSECTS:"esriSpatialRelIndexIntersects",SPATIAL_REL_OVERLAPS:"esriSpatialRelOverlaps",SPATIAL_REL_TOUCHES:"esriSpatialRelTouches",SPATIAL_REL_WITHIN:"esriSpatialRelWithin",SPATIAL_REL_RELATION:"esriSpatialRelRelation"};if(has("extend-esri")){lang.setObject("tasks._SpatialRelationship",_8e7,_8e6);}return _8e7;});},"dijit/_editor/plugins/TextColor":function(){define("dijit/_editor/plugins/TextColor",["require","dojo/colors","dojo/_base/declare","dojo/_base/lang","../_Plugin","../../form/DropDownButton"],function(_8e8,_8e9,_8ea,lang,_8eb,_8ec){var _8ed=_8ea("dijit._editor.plugins.TextColor",_8eb,{buttonClass:_8ec,useDefaultCommand:false,_initButton:function(){this.inherited(arguments);var self=this;this.button.loadDropDown=function(_8ee){_8e8(["../../ColorPalette"],lang.hitch(this,function(_8ef){this.dropDown=new _8ef({dir:self.editor.dir,ownerDocument:self.editor.ownerDocument,value:self.value,onChange:function(_8f0){self.editor.execCommand(self.command,_8f0);}});_8ee();}));};},updateState:function(){var _8f1=this.editor;var _8f2=this.command;if(!_8f1||!_8f1.isLoaded||!_8f2.length){return;}if(this.button){var _8f3=this.get("disabled");this.button.set("disabled",_8f3);if(_8f3){return;}var _8f4;try{_8f4=_8f1.queryCommandValue(_8f2)||"";}catch(e){_8f4="";}}if(_8f4==""){_8f4="#000000";}if(_8f4=="transparent"){_8f4="#ffffff";}if(typeof _8f4=="string"){if(_8f4.indexOf("rgb")>-1){_8f4=_8e9.fromRgb(_8f4).toHex();}}else{_8f4=((_8f4&255)<<16)|(_8f4&65280)|((_8f4&16711680)>>>16);_8f4=_8f4.toString(16);_8f4="#000000".slice(0,7-_8f4.length)+_8f4;}this.value=_8f4;var _8f5=this.button.dropDown;if(_8f5&&_8f4!==_8f5.get("value")){_8f5.set("value",_8f4,false);}}});_8eb.registry["foreColor"]=function(){return new _8ed({command:"foreColor"});};_8eb.registry["hiliteColor"]=function(){return new _8ed({command:"hiliteColor"});};return _8ed;});},"dijit/_editor/selection":function(){define("dijit/_editor/selection",["dojo/dom","dojo/_base/lang","dojo/sniff","dojo/_base/window","../main"],function(dom,lang,has,win,_8f6){var _8f7={getType:function(){if(win.doc.getSelection){var _8f8="text";var oSel;try{oSel=win.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _8f9=oSel.getRangeAt(0);if((_8f9.startContainer==_8f9.endContainer)&&((_8f9.endOffset-_8f9.startOffset)==1)&&(_8f9.startContainer.nodeType!=3)){_8f8="control";}}return _8f8;}else{return win.doc.selection.type.toLowerCase();}},getSelectedText:function(){if(win.doc.getSelection){var _8fa=win.global.getSelection();return _8fa?_8fa.toString():"";}else{if(_8f6._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().text;}},getSelectedHtml:function(){if(win.doc.getSelection){var _8fb=win.global.getSelection();if(_8fb&&_8fb.rangeCount){var i;var html="";for(i=0;i<_8fb.rangeCount;i++){var frag=_8fb.getRangeAt(i).cloneContents();var div=win.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}else{if(_8f6._editor.selection.getType()=="control"){return null;}return win.doc.selection.createRange().htmlText;}},getSelectedElement:function(){if(_8f6._editor.selection.getType()=="control"){if(win.doc.getSelection){var _8fc=win.global.getSelection();return _8fc.anchorNode.childNodes[_8fc.anchorOffset];}else{var _8fd=win.doc.selection.createRange();if(_8fd&&_8fd.item){return win.doc.selection.createRange().item(0);}}}return null;},getParentElement:function(){if(_8f6._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(win.doc.getSelection){var _8fe=win.global.getSelection();if(_8fe){var node=_8fe.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}else{var r=win.doc.selection.createRange();r.collapse(true);return r.parentElement();}}return null;},hasAncestorElement:function(_8ff){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_900){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _901=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _902=String(tags[i]).toLowerCase();if(_901==_902){return _902;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_903){if(win.doc.getSelection){var _904=win.global.getSelection();if(_904.removeAllRanges){if(_903){_904.collapseToStart();}else{_904.collapseToEnd();}}else{_904.collapse(_903);}}else{var _905=win.doc.selection.createRange();_905.collapse(_903);_905.select();}},remove:function(){var sel=win.doc.selection;if(win.doc.getSelection){sel=win.global.getSelection();sel.deleteFromDocument();return sel;}else{if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}},selectElementChildren:function(_906,_907){var doc=win.doc;var _908;_906=dom.byId(_906);if(win.doc.getSelection){var _909=win.global.getSelection();if(has("opera")){if(_909.rangeCount){_908=_909.getRangeAt(0);}else{_908=doc.createRange();}_908.setStart(_906,0);_908.setEnd(_906,(_906.nodeType==3)?_906.length:_906.childNodes.length);_909.addRange(_908);}else{_909.selectAllChildren(_906);}}else{_908=_906.ownerDocument.body.createTextRange();_908.moveToElementText(_906);if(!_907){try{_908.select();}catch(e){}}}},selectElement:function(_90a,_90b){var _90c;_90a=dom.byId(_90a);var doc=_90a.ownerDocument;var _90d=win.global;if(doc.getSelection){var _90e=_90d.getSelection();_90c=doc.createRange();if(_90e.removeAllRanges){if(has("opera")){if(_90e.getRangeAt(0)){_90c=_90e.getRangeAt(0);}}_90c.selectNode(_90a);_90e.removeAllRanges();_90e.addRange(_90c);}}else{try{var tg=_90a.tagName?_90a.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_90c=win.body(doc).createControlRange();}else{_90c=win.body(doc).createRange();}_90c.addElement(_90a);if(!_90b){_90c.select();}}catch(e){this.selectElementChildren(_90a,_90b);}}},inSelection:function(node){if(node){var _90f;var doc=win.doc;var _910;if(win.doc.getSelection){var sel=win.global.getSelection();if(sel&&sel.rangeCount>0){_910=sel.getRangeAt(0);}if(_910&&_910.compareBoundaryPoints&&doc.createRange){try{_90f=doc.createRange();_90f.setStart(node,0);if(_910.compareBoundaryPoints(_910.START_TO_END,_90f)===1){return true;}}catch(e){}}}else{_910=doc.selection.createRange();try{_90f=node.ownerDocument.body.createControlRange();if(_90f){_90f.addElement(node);}}catch(e1){try{_90f=node.ownerDocument.body.createTextRange();_90f.moveToElementText(node);}catch(e2){}}if(_910&&_90f){if(_910.compareEndPoints("EndToStart",_90f)===1){return true;}}}}return false;}};lang.setObject("dijit._editor.selection",_8f7);return _8f7;});},"dijit/_TemplatedMixin":function(){define("dijit/_TemplatedMixin",["dojo/_base/lang","dojo/touch","./_WidgetBase","dojo/string","dojo/cache","dojo/_base/array","dojo/_base/declare","dojo/dom-construct","dojo/sniff","dojo/_base/unload"],function(lang,_911,_912,_913,_914,_915,_916,_917,has,_918){var _919=_916("dijit._TemplatedMixin",null,{templateString:null,templatePath:null,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _91a=this.declaredClass,_91b=this;return _913.substitute(tmpl,this,function(_91c,key){if(key.charAt(0)=="!"){_91c=lang.getObject(key.substr(1),false,_91b);}if(typeof _91c=="undefined"){throw new Error(_91a+" template:"+key);}if(_91c==null){return "";}return key.charAt(0)=="!"?_91c:_91c.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){if(!this.templateString){this.templateString=_914(this.templatePath,{sanitize:true});}var _91d=_919.getCachedTemplate(this.templateString,this._skipNodeCache,this.ownerDocument);var node;if(lang.isString(_91d)){node=_917.toDom(this._stringRepl(_91d),this.ownerDocument);if(node.nodeType!=1){throw new Error("Invalid template: "+_91d);}}else{node=_91d.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node,function(n,p){return n.getAttribute(p);});this._beforeFillContent();this._fillContent(this.srcNodeRef);},_beforeFillContent:function(){},_fillContent:function(_91e){var dest=this.containerNode;if(_91e&&dest){while(_91e.hasChildNodes()){dest.appendChild(_91e.firstChild);}}},_attachTemplateNodes:function(_91f,_920){var _921=lang.isArray(_91f)?_91f:(_91f.all||_91f.getElementsByTagName("*"));var x=lang.isArray(_91f)?0:-1;for(;x<0||_921[x];x++){var _922=(x==-1)?_91f:_921[x];if(this.widgetsInTemplate&&(_920(_922,"dojoType")||_920(_922,"data-dojo-type"))){continue;}var _923=_920(_922,"dojoAttachPoint")||_920(_922,"data-dojo-attach-point");if(_923){var _924,_925=_923.split(/\s*,\s*/);while((_924=_925.shift())){if(lang.isArray(this[_924])){this[_924].push(_922);}else{this[_924]=_922;}this._attachPoints.push(_924);}}var _926=_920(_922,"dojoAttachEvent")||_920(_922,"data-dojo-attach-event");if(_926){var _927,_928=_926.split(/\s*,\s*/);var trim=lang.trim;while((_927=_928.shift())){if(_927){var _929=null;if(_927.indexOf(":")!=-1){var _92a=_927.split(":");_927=trim(_92a[0]);_929=trim(_92a[1]);}else{_927=trim(_927);}if(!_929){_929=_927;}this._attachEvents.push(this.connect(_922,_911[_927]||_927,_929));}}}}},destroyRendering:function(){_915.forEach(this._attachPoints,function(_92b){delete this[_92b];},this);this._attachPoints=[];_915.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});_919._templateCache={};_919.getCachedTemplate=function(_92c,_92d,doc){var _92e=_919._templateCache;var key=_92c;var _92f=_92e[key];if(_92f){try{if(!_92f.ownerDocument||_92f.ownerDocument==(doc||document)){return _92f;}}catch(e){}_917.destroy(_92f);}_92c=_913.trim(_92c);if(_92d||_92c.match(/\$\{([^\}]+)\}/g)){return (_92e[key]=_92c);}else{var node=_917.toDom(_92c,doc);if(node.nodeType!=1){throw new Error("Invalid template: "+_92c);}return (_92e[key]=node);}};if(has("ie")){_918.addOnWindowUnload(function(){var _930=_919._templateCache;for(var key in _930){var _931=_930[key];if(typeof _931=="object"){_917.destroy(_931);}delete _930[key];}});}lang.extend(_912,{dojoAttachEvent:"",dojoAttachPoint:""});return _919;});},"dijit/_editor/plugins/EnterKeyHandling":function(){define("dijit/_editor/plugins/EnterKeyHandling",["dojo/_base/declare","dojo/dom-construct","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/sniff","dojo/_base/window","dojo/window","../_Plugin","../RichText","../range","../../_base/focus"],function(_932,_933,_934,keys,lang,has,win,_935,_936,_937,_938,_939){return _932("dijit._editor.plugins.EnterKeyHandling",_936,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}lang.mixin(this,args);}},setEditor:function(_93a){if(this.editor===_93a){return;}this.editor=_93a;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_93a.onLoadDeferred.then(lang.hitch(this,function(d){this.connect(_93a.document,"onkeypress",function(e){if(e.charOrCode==keys.ENTER){var ne=lang.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){_934.stop(e);}}});if(has("ie")>=9){this.connect(_93a.document,"onpaste",function(e){setTimeout(dojo.hitch(this,function(){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();r.move("character",1);r.select();}),0);});}return d;}));}else{if(this.blockNodeForEnter){var h=lang.hitch(this,this.handleEnterKey);_93a.addKeyHandler(13,0,0,h);_93a.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(){if(this._checkListLater){if(win.withGlobal(this.editor.window,"isCollapsed",_939)){var _93b=this.editor._sCall("getAncestorElement",["LI"]);if(!_93b){_937.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _93c=this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]);if(_93c){_93c.innerHTML=this.bogusHtmlContent;if(has("ie")<=9){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(has("mozilla")){if(_93b.parentNode.parentNode.nodeName=="LI"){_93b=_93b.parentNode.parentNode;}}var fc=_93b.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_93b.insertBefore(fc.ownerDocument.createTextNode(""),fc);var _93d=_938.create(this.editor.window);_93d.setStart(_93b.firstChild,0);var _93e=_938.getSelection(this.editor.window,true);_93e.removeAllRanges();_93e.addRange(_93d);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&#160;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _93f,_940,_941,_942,_943,_944,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _945=this.editor._sCall("getParentElement",[]);var _946=_938.getAncestor(_945,this.blockNodes);if(_946){if(_946.tagName=="LI"){return true;}_93f=_938.getSelection(this.editor.window);_940=_93f.getRangeAt(0);if(!_940.collapsed){_940.deleteContents();_93f=_938.getSelection(this.editor.window);_940=_93f.getRangeAt(0);}if(_938.atBeginningOfContainer(_946,_940.startContainer,_940.startOffset)){br=doc.createElement("br");_941=_938.create(this.editor.window);_946.insertBefore(br,_946.firstChild);_941.setStartAfter(br);_93f.removeAllRanges();_93f.addRange(_941);}else{if(_938.atEndOfContainer(_946,_940.startContainer,_940.startOffset)){_941=_938.create(this.editor.window);br=doc.createElement("br");_946.appendChild(br);_946.appendChild(doc.createTextNode(""));_941.setStart(_946.lastChild,0);_93f.removeAllRanges();_93f.addRange(_941);}else{rs=_940.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;_942=doc.createTextNode(txt.substring(0,_940.startOffset));_943=doc.createTextNode(txt.substring(_940.startOffset));_944=doc.createElement("br");if(_943.nodeValue==""&&has("webkit")){_943=doc.createTextNode("");}_933.place(_942,rs,"after");_933.place(_944,_942,"after");_933.place(_943,_944,"after");_933.destroy(rs);_941=_938.create(this.editor.window);_941.setStart(_943,0);_93f.removeAllRanges();_93f.addRange(_941);return false;}return true;}}}else{_93f=_938.getSelection(this.editor.window);if(_93f.rangeCount){_940=_93f.getRangeAt(0);if(_940&&_940.startContainer){if(!_940.collapsed){_940.deleteContents();_93f=_938.getSelection(this.editor.window);_940=_93f.getRangeAt(0);}rs=_940.startContainer;if(rs&&rs.nodeType==3){var _947=false;var _948=_940.startOffset;if(rs.length<_948){ret=this._adjustNodeAndOffset(rs,_948);rs=ret.node;_948=ret.offset;}txt=rs.nodeValue;_942=doc.createTextNode(txt.substring(0,_948));_943=doc.createTextNode(txt.substring(_948));_944=doc.createElement("br");if(!_943.length){_943=doc.createTextNode("");_947=true;}if(_942.length){_933.place(_942,rs,"after");}else{_942=rs;}_933.place(_944,_942,"after");_933.place(_943,_944,"after");_933.destroy(rs);_941=_938.create(this.editor.window);_941.setStart(_943,0);_941.setEnd(_943,_943.length);_93f.removeAllRanges();_93f.addRange(_941);if(_947&&!has("webkit")){this.editor._sCall("remove",[]);}else{this.editor._sCall("collapse",[true]);}}else{var _949;if(_940.startOffset>=0){_949=rs.childNodes[_940.startOffset];}var _944=doc.createElement("br");var _943=doc.createTextNode("");if(!_949){rs.appendChild(_944);rs.appendChild(_943);}else{_933.place(_944,_949,"before");_933.place(_943,_944,"after");}_941=_938.create(this.editor.window);_941.setStart(_943,0);_941.setEnd(_943,_943.length);_93f.removeAllRanges();_93f.addRange(_941);this.editor._sCall("collapse",[true]);}}}else{_937.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _94a=true;_93f=_938.getSelection(this.editor.window);_940=_93f.getRangeAt(0);if(!_940.collapsed){_940.deleteContents();_93f=_938.getSelection(this.editor.window);_940=_93f.getRangeAt(0);}var _94b=_938.getBlockAncestor(_940.endContainer,null,this.editor.editNode);var _94c=_94b.blockNode;if((this._checkListLater=(_94c&&(_94c.nodeName=="LI"||_94c.parentNode.nodeName=="LI")))){if(has("mozilla")){this._pressedEnterInBlock=_94c;}if(/^(\s|&nbsp;|&#160;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|&#160;|\xA0)<\/span>)?(<br>)?$/.test(_94c.innerHTML)){_94c.innerHTML="";if(has("webkit")){_941=_938.create(this.editor.window);_941.setStart(_94c,0);_93f.removeAllRanges();_93f.addRange(_941);}this._checkListLater=false;}return true;}if(!_94b.blockNode||_94b.blockNode===this.editor.editNode){try{_937.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_94b={blockNode:this.editor._sCall("getAncestorElement",[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_94b.blockNode){if(_94b.blockNode!=this.editor.editNode&&(!(_94b.blockNode.textContent||_94b.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_94b.blockNode);return false;}}else{_94b.blockNode=this.editor.editNode;}_93f=_938.getSelection(this.editor.window);_940=_93f.getRangeAt(0);}var _94d=doc.createElement(this.blockNodeForEnter);_94d.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_94b.blockNode);var _94e=_940.endOffset;var node=_940.endContainer;if(node.length<_94e){var ret=this._adjustNodeAndOffset(node,_94e);node=ret.node;_94e=ret.offset;}if(_938.atEndOfContainer(_94b.blockNode,node,_94e)){if(_94b.blockNode===_94b.blockContainer){_94b.blockNode.appendChild(_94d);}else{_933.place(_94d,_94b.blockNode,"after");}_94a=false;_941=_938.create(this.editor.window);_941.setStart(_94d,0);_93f.removeAllRanges();_93f.addRange(_941);if(this.editor.height){_935.scrollIntoView(_94d);}}else{if(_938.atBeginningOfContainer(_94b.blockNode,_940.startContainer,_940.startOffset)){_933.place(_94d,_94b.blockNode,_94b.blockNode===_94b.blockContainer?"first":"before");if(_94d.nextSibling&&this.editor.height){_941=_938.create(this.editor.window);_941.setStart(_94d.nextSibling,0);_93f.removeAllRanges();_93f.addRange(_941);_935.scrollIntoView(_94d.nextSibling);}_94a=false;}else{if(_94b.blockNode===_94b.blockContainer){_94b.blockNode.appendChild(_94d);}else{_933.place(_94d,_94b.blockNode,"after");}_94a=false;if(_94b.blockNode.style){if(_94d.style){if(_94b.blockNode.style.cssText){_94d.style.cssText=_94b.blockNode.style.cssText;}}}rs=_940.startContainer;var _94f;if(rs&&rs.nodeType==3){var _950,_951;_94e=_940.endOffset;if(rs.length<_94e){ret=this._adjustNodeAndOffset(rs,_94e);rs=ret.node;_94e=ret.offset;}txt=rs.nodeValue;_942=doc.createTextNode(txt.substring(0,_94e));_943=doc.createTextNode(txt.substring(_94e,txt.length));_933.place(_942,rs,"before");_933.place(_943,rs,"after");_933.destroy(rs);var _952=_942.parentNode;while(_952!==_94b.blockNode){var tg=_952.tagName;var _953=doc.createElement(tg);if(_952.style){if(_953.style){if(_952.style.cssText){_953.style.cssText=_952.style.cssText;}}}if(_952.tagName==="FONT"){if(_952.color){_953.color=_952.color;}if(_952.face){_953.face=_952.face;}if(_952.size){_953.size=_952.size;}}_950=_943;while(_950){_951=_950.nextSibling;_953.appendChild(_950);_950=_951;}_933.place(_953,_952,"after");_942=_952;_943=_953;_952=_952.parentNode;}_950=_943;if(_950.nodeType==1||(_950.nodeType==3&&_950.nodeValue)){_94d.innerHTML="";}_94f=_950;while(_950){_951=_950.nextSibling;_94d.appendChild(_950);_950=_951;}}_941=_938.create(this.editor.window);var _954;var _955=_94f;if(this.blockNodeForEnter!=="BR"){while(_955){_954=_955;_951=_955.firstChild;_955=_951;}if(_954&&_954.parentNode){_94d=_954.parentNode;_941.setStart(_94d,0);_93f.removeAllRanges();_93f.addRange(_941);if(this.editor.height){_935.scrollIntoView(_94d);}if(has("mozilla")){this._pressedEnterInBlock=_94b.blockNode;}}else{_94a=true;}}else{_941.setStart(_94d,0);_93f.removeAllRanges();_93f.addRange(_941);if(this.editor.height){_935.scrollIntoView(_94d);}if(has("mozilla")){this._pressedEnterInBlock=_94b.blockNode;}}}}return _94a;},_adjustNodeAndOffset:function(node,_956){while(node.length<_956&&node.nextSibling&&node.nextSibling.nodeType==3){_956=_956-node.length;node=node.nextSibling;}return {"node":node,"offset":_956};},removeTrailingBr:function(_957){var para=/P|DIV|LI/i.test(_957.tagName)?_957:this.editor._sCall("getParentOfType",[_957,["P","DIV","LI"]]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){_933.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});});},"dojo/data/ItemFileReadStore":function(){define(["../_base/kernel","../_base/lang","../_base/declare","../_base/array","../_base/xhr","../Evented","./util/filter","./util/simpleFetch","../date/stamp"],function(_958,lang,_959,_95a,xhr,_95b,_95c,_95d,_95e){var _95f=_959("dojo.data.ItemFileReadStore",[_95b],{constructor:function(_960){this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._jsonFileUrl=_960.url;this._ccUrl=_960.url;this.url=_960.url;this._jsonData=_960.data;this.data=null;this._datatypeMap=_960.typeMap||{};if(!this._datatypeMap["Date"]){this._datatypeMap["Date"]={type:Date,deserialize:function(_961){return _95e.fromISOString(_961);}};}this._features={"dojo.data.api.Read":true,"dojo.data.api.Identity":true};this._itemsByIdentity=null;this._storeRefPropName="_S";this._itemNumPropName="_0";this._rootItemPropName="_RI";this._reverseRefMap="_RRM";this._loadInProgress=false;this._queuedFetches=[];if(_960.urlPreventCache!==undefined){this.urlPreventCache=_960.urlPreventCache?true:false;}if(_960.hierarchical!==undefined){this.hierarchical=_960.hierarchical?true:false;}if(_960.clearOnClose){this.clearOnClose=true;}if("failOk" in _960){this.failOk=_960.failOk?true:false;}},url:"",_ccUrl:"",data:null,typeMap:null,clearOnClose:false,urlPreventCache:false,failOk:false,hierarchical:true,_assertIsItem:function(item){if(!this.isItem(item)){throw new Error(this.declaredClass+": Invalid item argument.");}},_assertIsAttribute:function(_962){if(typeof _962!=="string"){throw new Error(this.declaredClass+": Invalid attribute argument.");}},getValue:function(item,_963,_964){var _965=this.getValues(item,_963);return (_965.length>0)?_965[0]:_964;},getValues:function(item,_966){this._assertIsItem(item);this._assertIsAttribute(_966);return (item[_966]||[]).slice(0);},getAttributes:function(item){this._assertIsItem(item);var _967=[];for(var key in item){if((key!==this._storeRefPropName)&&(key!==this._itemNumPropName)&&(key!==this._rootItemPropName)&&(key!==this._reverseRefMap)){_967.push(key);}}return _967;},hasAttribute:function(item,_968){this._assertIsItem(item);this._assertIsAttribute(_968);return (_968 in item);},containsValue:function(item,_969,_96a){var _96b=undefined;if(typeof _96a==="string"){_96b=_95c.patternToRegExp(_96a,false);}return this._containsValue(item,_969,_96a,_96b);},_containsValue:function(item,_96c,_96d,_96e){return _95a.some(this.getValues(item,_96c),function(_96f){if(_96f!==null&&!lang.isObject(_96f)&&_96e){if(_96f.toString().match(_96e)){return true;}}else{if(_96d===_96f){return true;}}});},isItem:function(_970){if(_970&&_970[this._storeRefPropName]===this){if(this._arrayOfAllItems[_970[this._itemNumPropName]]===_970){return true;}}return false;},isItemLoaded:function(_971){return this.isItem(_971);},loadItem:function(_972){this._assertIsItem(_972.item);},getFeatures:function(){return this._features;},getLabel:function(item){if(this._labelAttr&&this.isItem(item)){return this.getValue(item,this._labelAttr);}return undefined;},getLabelAttributes:function(item){if(this._labelAttr){return [this._labelAttr];}return null;},filter:function(_973,_974,_975){var _976=[],i,key;if(_973.query){var _977,_978=_973.queryOptions?_973.queryOptions.ignoreCase:false;var _979={};for(key in _973.query){_977=_973.query[key];if(typeof _977==="string"){_979[key]=_95c.patternToRegExp(_977,_978);}else{if(_977 instanceof RegExp){_979[key]=_977;}}}for(i=0;i<_974.length;++i){var _97a=true;var _97b=_974[i];if(_97b===null){_97a=false;}else{for(key in _973.query){_977=_973.query[key];if(!this._containsValue(_97b,key,_977,_979[key])){_97a=false;}}}if(_97a){_976.push(_97b);}}_975(_976,_973);}else{for(i=0;i<_974.length;++i){var item=_974[i];if(item!==null){_976.push(item);}}_975(_976,_973);}},_fetchItems:function(_97c,_97d,_97e){var self=this;if(this._loadFinished){this.filter(_97c,this._getItemsArray(_97c.queryOptions),_97d);}else{if(this._jsonFileUrl!==this._ccUrl){_958.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_97c,filter:lang.hitch(self,"filter"),findCallback:lang.hitch(self,_97d)});}else{this._loadInProgress=true;var _97f={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _980=xhr.get(_97f);_980.addCallback(function(data){try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;self.filter(_97c,self._getItemsArray(_97c.queryOptions),_97d);self._handleQueuedFetches();}catch(e){self._loadFinished=true;self._loadInProgress=false;_97e(e,_97c);}});_980.addErrback(function(_981){self._loadInProgress=false;_97e(_981,_97c);});var _982=null;if(_97c.abort){_982=_97c.abort;}_97c.abort=function(){var df=_980;if(df&&df.fired===-1){df.cancel();df=null;}if(_982){_982.call(_97c);}};}}else{if(this._jsonData){try{this._loadFinished=true;this._getItemsFromLoadedData(this._jsonData);this._jsonData=null;self.filter(_97c,this._getItemsArray(_97c.queryOptions),_97d);}catch(e){_97e(e,_97c);}}else{_97e(new Error(this.declaredClass+": No JSON source data was provided as either URL or a nested Javascript object."),_97c);}}}},_handleQueuedFetches:function(){if(this._queuedFetches.length>0){for(var i=0;i<this._queuedFetches.length;i++){var _983=this._queuedFetches[i],_984=_983.args,_985=_983.filter,_986=_983.findCallback;if(_985){_985(_984,this._getItemsArray(_984.queryOptions),_986);}else{this.fetchItemByIdentity(_984);}}this._queuedFetches=[];}},_getItemsArray:function(_987){if(_987&&_987.deep){return this._arrayOfAllItems;}return this._arrayOfTopLevelItems;},close:function(_988){if(this.clearOnClose&&this._loadFinished&&!this._loadInProgress){if(((this._jsonFileUrl==""||this._jsonFileUrl==null)&&(this.url==""||this.url==null))&&this.data==null){console.debug(this.declaredClass+": WARNING!  Data reload "+" information has not been provided."+"  Please set 'url' or 'data' to the appropriate value before"+" the next fetch");}this._arrayOfAllItems=[];this._arrayOfTopLevelItems=[];this._loadFinished=false;this._itemsByIdentity=null;this._loadInProgress=false;this._queuedFetches=[];}},_getItemsFromLoadedData:function(_989){var _98a=false,self=this;function _98b(_98c){return (_98c!==null)&&(typeof _98c==="object")&&(!lang.isArray(_98c)||_98a)&&(!lang.isFunction(_98c))&&(_98c.constructor==Object||lang.isArray(_98c))&&(typeof _98c._reference==="undefined")&&(typeof _98c._type==="undefined")&&(typeof _98c._value==="undefined")&&self.hierarchical;};function _98d(_98e){self._arrayOfAllItems.push(_98e);for(var _98f in _98e){var _990=_98e[_98f];if(_990){if(lang.isArray(_990)){var _991=_990;for(var k=0;k<_991.length;++k){var _992=_991[k];if(_98b(_992)){_98d(_992);}}}else{if(_98b(_990)){_98d(_990);}}}}};this._labelAttr=_989.label;var i,item;this._arrayOfAllItems=[];this._arrayOfTopLevelItems=_989.items;for(i=0;i<this._arrayOfTopLevelItems.length;++i){item=this._arrayOfTopLevelItems[i];if(lang.isArray(item)){_98a=true;}_98d(item);item[this._rootItemPropName]=true;}var _993={},key;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){if(key!==this._rootItemPropName){var _994=item[key];if(_994!==null){if(!lang.isArray(_994)){item[key]=[_994];}}else{item[key]=[null];}}_993[key]=key;}}while(_993[this._storeRefPropName]){this._storeRefPropName+="_";}while(_993[this._itemNumPropName]){this._itemNumPropName+="_";}while(_993[this._reverseRefMap]){this._reverseRefMap+="_";}var _995;var _996=_989.identifier;if(_996){this._itemsByIdentity={};this._features["dojo.data.api.Identity"]=_996;for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];_995=item[_996];var _997=_995[0];if(!Object.hasOwnProperty.call(this._itemsByIdentity,_997)){this._itemsByIdentity[_997]=item;}else{if(this._jsonFileUrl){throw new Error(this.declaredClass+":  The json data as specified by: ["+this._jsonFileUrl+"] is malformed.  Items within the list have identifier: ["+_996+"].  Value collided: ["+_997+"]");}else{if(this._jsonData){throw new Error(this.declaredClass+":  The json data provided by the creation arguments is malformed.  Items within the list have identifier: ["+_996+"].  Value collided: ["+_997+"]");}}}}}else{this._features["dojo.data.api.Identity"]=Number;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];item[this._storeRefPropName]=this;item[this._itemNumPropName]=i;}for(i=0;i<this._arrayOfAllItems.length;++i){item=this._arrayOfAllItems[i];for(key in item){_995=item[key];for(var j=0;j<_995.length;++j){_994=_995[j];if(_994!==null&&typeof _994=="object"){if(("_type" in _994)&&("_value" in _994)){var type=_994._type;var _998=this._datatypeMap[type];if(!_998){throw new Error("dojo.data.ItemFileReadStore: in the typeMap constructor arg, no object class was specified for the datatype '"+type+"'");}else{if(lang.isFunction(_998)){_995[j]=new _998(_994._value);}else{if(lang.isFunction(_998.deserialize)){_995[j]=_998.deserialize(_994._value);}else{throw new Error("dojo.data.ItemFileReadStore: Value provided in typeMap was neither a constructor, nor a an object with a deserialize function");}}}}if(_994._reference){var _999=_994._reference;if(!lang.isObject(_999)){_995[j]=this._getItemByIdentity(_999);}else{for(var k=0;k<this._arrayOfAllItems.length;++k){var _99a=this._arrayOfAllItems[k],_99b=true;for(var _99c in _999){if(_99a[_99c]!=_999[_99c]){_99b=false;}}if(_99b){_995[j]=_99a;}}}if(this.referenceIntegrity){var _99d=_995[j];if(this.isItem(_99d)){this._addReferenceToMap(_99d,item,key);}}}else{if(this.isItem(_994)){if(this.referenceIntegrity){this._addReferenceToMap(_994,item,key);}}}}}}}},_addReferenceToMap:function(_99e,_99f,_9a0){},getIdentity:function(item){var _9a1=this._features["dojo.data.api.Identity"];if(_9a1===Number){return item[this._itemNumPropName];}else{var _9a2=item[_9a1];if(_9a2){return _9a2[0];}}return null;},fetchItemByIdentity:function(_9a3){var item,_9a4;if(!this._loadFinished){var self=this;if(this._jsonFileUrl!==this._ccUrl){_958.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null&&this._jsonData==null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){if(this._loadInProgress){this._queuedFetches.push({args:_9a3});}else{this._loadInProgress=true;var _9a5={url:self._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk};var _9a6=xhr.get(_9a5);_9a6.addCallback(function(data){var _9a7=_9a3.scope?_9a3.scope:_958.global;try{self._getItemsFromLoadedData(data);self._loadFinished=true;self._loadInProgress=false;item=self._getItemByIdentity(_9a3.identity);if(_9a3.onItem){_9a3.onItem.call(_9a7,item);}self._handleQueuedFetches();}catch(error){self._loadInProgress=false;if(_9a3.onError){_9a3.onError.call(_9a7,error);}}});_9a6.addErrback(function(_9a8){self._loadInProgress=false;if(_9a3.onError){var _9a9=_9a3.scope?_9a3.scope:_958.global;_9a3.onError.call(_9a9,_9a8);}});}}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;item=self._getItemByIdentity(_9a3.identity);if(_9a3.onItem){_9a4=_9a3.scope?_9a3.scope:_958.global;_9a3.onItem.call(_9a4,item);}}}}else{item=this._getItemByIdentity(_9a3.identity);if(_9a3.onItem){_9a4=_9a3.scope?_9a3.scope:_958.global;_9a3.onItem.call(_9a4,item);}}},_getItemByIdentity:function(_9aa){var item=null;if(this._itemsByIdentity){if(Object.hasOwnProperty.call(this._itemsByIdentity,_9aa)){item=this._itemsByIdentity[_9aa];}}else{if(Object.hasOwnProperty.call(this._arrayOfAllItems,_9aa)){item=this._arrayOfAllItems[_9aa];}}if(item===undefined){item=null;}return item;},getIdentityAttributes:function(item){var _9ab=this._features["dojo.data.api.Identity"];if(_9ab===Number){return null;}else{return [_9ab];}},_forceLoad:function(){var self=this;if(this._jsonFileUrl!==this._ccUrl){_958.deprecated(this.declaredClass+": ","To change the url, set the url property of the store,"+" not _jsonFileUrl.  _jsonFileUrl support will be removed in 2.0");this._ccUrl=this._jsonFileUrl;this.url=this._jsonFileUrl;}else{if(this.url!==this._ccUrl){this._jsonFileUrl=this.url;this._ccUrl=this.url;}}if(this.data!=null){this._jsonData=this.data;this.data=null;}if(this._jsonFileUrl){var _9ac={url:this._jsonFileUrl,handleAs:"json-comment-optional",preventCache:this.urlPreventCache,failOk:this.failOk,sync:true};var _9ad=xhr.get(_9ac);_9ad.addCallback(function(data){try{if(self._loadInProgress!==true&&!self._loadFinished){self._getItemsFromLoadedData(data);self._loadFinished=true;}else{if(self._loadInProgress){throw new Error(this.declaredClass+":  Unable to perform a synchronous load, an async load is in progress.");}}}catch(e){console.log(e);throw e;}});_9ad.addErrback(function(_9ae){throw _9ae;});}else{if(this._jsonData){self._getItemsFromLoadedData(self._jsonData);self._jsonData=null;self._loadFinished=true;}}}});lang.extend(_95f,_95d);return _95f;});},"url:dijit/form/templates/DropDownButton.html":"<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdata-dojo-attach-event=\"ondijitclick:_onClick\" data-dojo-attach-point=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdata-dojo-attach-point=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdata-dojo-attach-point=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdata-dojo-attach-point=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdata-dojo-attach-point=\"valueNode\" role=\"presentation\"\n/></span>\n","dojo/data/util/simpleFetch":function(){define(["../../_base/lang","../../_base/kernel","./sorter"],function(lang,_9af,_9b0){var _9b1={};lang.setObject("dojo.data.util.simpleFetch",_9b1);_9b1.errorHandler=function(_9b2,_9b3){if(_9b3.onError){var _9b4=_9b3.scope||_9af.global;_9b3.onError.call(_9b4,_9b2,_9b3);}};_9b1.fetchHandler=function(_9b5,_9b6){var _9b7=_9b6.abort||null,_9b8=false,_9b9=_9b6.start?_9b6.start:0,_9ba=(_9b6.count&&(_9b6.count!==Infinity))?(_9b9+_9b6.count):_9b5.length;_9b6.abort=function(){_9b8=true;if(_9b7){_9b7.call(_9b6);}};var _9bb=_9b6.scope||_9af.global;if(!_9b6.store){_9b6.store=this;}if(_9b6.onBegin){_9b6.onBegin.call(_9bb,_9b5.length,_9b6);}if(_9b6.sort){_9b5.sort(_9b0.createSortFunction(_9b6.sort,this));}if(_9b6.onItem){for(var i=_9b9;(i<_9b5.length)&&(i<_9ba);++i){var item=_9b5[i];if(!_9b8){_9b6.onItem.call(_9bb,item,_9b6);}}}if(_9b6.onComplete&&!_9b8){var _9bc=null;if(!_9b6.onItem){_9bc=_9b5.slice(_9b9,_9ba);}_9b6.onComplete.call(_9bb,_9bc,_9b6);}};_9b1.fetch=function(_9bd){_9bd=_9bd||{};if(!_9bd.store){_9bd.store=this;}this._fetchItems(_9bd,lang.hitch(this,"fetchHandler"),lang.hitch(this,"errorHandler"));return _9bd;};return _9b1;});},"dijit/form/_ComboBoxMenuMixin":function(){define("dijit/form/_ComboBoxMenuMixin",["dojo/_base/array","dojo/_base/declare","dojo/dom-attr","dojo/i18n","dojo/i18n!./nls/ComboBox"],function(_9be,_9bf,_9c0,i18n){return _9bf("dijit.form._ComboBoxMenuMixin",null,{_messages:null,postMixInProperties:function(){this.inherited(arguments);this._messages=i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_9c1){this.value=_9c1;this.onChange(_9c1);},onClick:function(node){if(node==this.previousButton){this._setSelectedAttr(null);this.onPage(-1);}else{if(node==this.nextButton){this._setSelectedAttr(null);this.onPage(1);}else{this.onChange(node);}}},onChange:function(){},onPage:function(){},onClose:function(){this._setSelectedAttr(null);},_createOption:function(item,_9c2){var _9c3=this._createMenuItem();var _9c4=_9c2(item);if(_9c4.html){_9c3.innerHTML=_9c4.label;}else{_9c3.appendChild(_9c3.ownerDocument.createTextNode(_9c4.label));}if(_9c3.innerHTML==""){_9c3.innerHTML="&#160;";}this.applyTextDir(_9c3,(_9c3.innerText||_9c3.textContent||""));return _9c3;},createOptions:function(_9c5,_9c6,_9c7){this.items=_9c5;this.previousButton.style.display=(_9c6.start==0)?"none":"";_9c0.set(this.previousButton,"id",this.id+"_prev");_9be.forEach(_9c5,function(item,i){var _9c8=this._createOption(item,_9c7);_9c8.setAttribute("item",i);_9c0.set(_9c8,"id",this.id+i);this.nextButton.parentNode.insertBefore(_9c8,this.nextButton);},this);var _9c9=false;if(_9c5.total&&!_9c5.total.then&&_9c5.total!=-1){if((_9c6.start+_9c6.count)<_9c5.total){_9c9=true;}else{if((_9c6.start+_9c6.count)>_9c5.total&&_9c6.count==_9c5.length){_9c9=true;}}}else{if(_9c6.count==_9c5.length){_9c9=true;}}this.nextButton.style.display=_9c9?"":"none";_9c0.set(this.nextButton,"id",this.id+"_next");},clearResultList:function(){var _9ca=this.containerNode;while(_9ca.childNodes.length>2){_9ca.removeChild(_9ca.childNodes[_9ca.childNodes.length-2]);}this._setSelectedAttr(null);},highlightFirstOption:function(){this.selectFirstNode();},highlightLastOption:function(){this.selectLastNode();},selectFirstNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.previousButton){this.selectNextNode();}},selectLastNode:function(){this.inherited(arguments);if(this.getHighlightedOption()==this.nextButton){this.selectPreviousNode();}},getHighlightedOption:function(){return this.selected;}});});},"dojo/colors":function(){define(["./_base/kernel","./_base/lang","./_base/Color","./_base/array"],function(dojo,lang,_9cb,_9cc){var _9cd={};lang.setObject("dojo.colors",_9cd);var _9ce=function(m1,m2,h){if(h<0){++h;}if(h>1){--h;}var h6=6*h;if(h6<1){return m1+(m2-m1)*h6;}if(2*h<1){return m2;}if(3*h<2){return m1+(m2-m1)*(2/3-h)*6;}return m1;};dojo.colorFromRgb=_9cb.fromRgb=function(_9cf,obj){var m=_9cf.toLowerCase().match(/^(rgba?|hsla?)\(([\s\.\-,%0-9]+)\)/);if(m){var c=m[2].split(/\s*,\s*/),l=c.length,t=m[1],a;if((t=="rgb"&&l==3)||(t=="rgba"&&l==4)){var r=c[0];if(r.charAt(r.length-1)=="%"){a=_9cc.map(c,function(x){return parseFloat(x)*2.56;});if(l==4){a[3]=c[3];}return _9cb.fromArray(a,obj);}return _9cb.fromArray(c,obj);}if((t=="hsl"&&l==3)||(t=="hsla"&&l==4)){var H=((parseFloat(c[0])%360)+360)%360/360,S=parseFloat(c[1])/100,L=parseFloat(c[2])/100,m2=L<=0.5?L*(S+1):L+S-L*S,m1=2*L-m2;a=[_9ce(m1,m2,H+1/3)*256,_9ce(m1,m2,H)*256,_9ce(m1,m2,H-1/3)*256,1];if(l==4){a[3]=c[3];}return _9cb.fromArray(a,obj);}}return null;};var _9d0=function(c,low,high){c=Number(c);return isNaN(c)?high:c<low?low:c>high?high:c;};_9cb.prototype.sanitize=function(){var t=this;t.r=Math.round(_9d0(t.r,0,255));t.g=Math.round(_9d0(t.g,0,255));t.b=Math.round(_9d0(t.b,0,255));t.a=_9d0(t.a,0,1);return this;};_9cd.makeGrey=_9cb.makeGrey=function(g,a){return _9cb.fromArray([g,g,g,a]);};lang.mixin(_9cb.named,{"aliceblue":[240,248,255],"antiquewhite":[250,235,215],"aquamarine":[127,255,212],"azure":[240,255,255],"beige":[245,245,220],"bisque":[255,228,196],"blanchedalmond":[255,235,205],"blueviolet":[138,43,226],"brown":[165,42,42],"burlywood":[222,184,135],"cadetblue":[95,158,160],"chartreuse":[127,255,0],"chocolate":[210,105,30],"coral":[255,127,80],"cornflowerblue":[100,149,237],"cornsilk":[255,248,220],"crimson":[220,20,60],"cyan":[0,255,255],"darkblue":[0,0,139],"darkcyan":[0,139,139],"darkgoldenrod":[184,134,11],"darkgray":[169,169,169],"darkgreen":[0,100,0],"darkgrey":[169,169,169],"darkkhaki":[189,183,107],"darkmagenta":[139,0,139],"darkolivegreen":[85,107,47],"darkorange":[255,140,0],"darkorchid":[153,50,204],"darkred":[139,0,0],"darksalmon":[233,150,122],"darkseagreen":[143,188,143],"darkslateblue":[72,61,139],"darkslategray":[47,79,79],"darkslategrey":[47,79,79],"darkturquoise":[0,206,209],"darkviolet":[148,0,211],"deeppink":[255,20,147],"deepskyblue":[0,191,255],"dimgray":[105,105,105],"dimgrey":[105,105,105],"dodgerblue":[30,144,255],"firebrick":[178,34,34],"floralwhite":[255,250,240],"forestgreen":[34,139,34],"gainsboro":[220,220,220],"ghostwhite":[248,248,255],"gold":[255,215,0],"goldenrod":[218,165,32],"greenyellow":[173,255,47],"grey":[128,128,128],"honeydew":[240,255,240],"hotpink":[255,105,180],"indianred":[205,92,92],"indigo":[75,0,130],"ivory":[255,255,240],"khaki":[240,230,140],"lavender":[230,230,250],"lavenderblush":[255,240,245],"lawngreen":[124,252,0],"lemonchiffon":[255,250,205],"lightblue":[173,216,230],"lightcoral":[240,128,128],"lightcyan":[224,255,255],"lightgoldenrodyellow":[250,250,210],"lightgray":[211,211,211],"lightgreen":[144,238,144],"lightgrey":[211,211,211],"lightpink":[255,182,193],"lightsalmon":[255,160,122],"lightseagreen":[32,178,170],"lightskyblue":[135,206,250],"lightslategray":[119,136,153],"lightslategrey":[119,136,153],"lightsteelblue":[176,196,222],"lightyellow":[255,255,224],"limegreen":[50,205,50],"linen":[250,240,230],"magenta":[255,0,255],"mediumaquamarine":[102,205,170],"mediumblue":[0,0,205],"mediumorchid":[186,85,211],"mediumpurple":[147,112,219],"mediumseagreen":[60,179,113],"mediumslateblue":[123,104,238],"mediumspringgreen":[0,250,154],"mediumturquoise":[72,209,204],"mediumvioletred":[199,21,133],"midnightblue":[25,25,112],"mintcream":[245,255,250],"mistyrose":[255,228,225],"moccasin":[255,228,181],"navajowhite":[255,222,173],"oldlace":[253,245,230],"olivedrab":[107,142,35],"orange":[255,165,0],"orangered":[255,69,0],"orchid":[218,112,214],"palegoldenrod":[238,232,170],"palegreen":[152,251,152],"paleturquoise":[175,238,238],"palevioletred":[219,112,147],"papayawhip":[255,239,213],"peachpuff":[255,218,185],"peru":[205,133,63],"pink":[255,192,203],"plum":[221,160,221],"powderblue":[176,224,230],"rosybrown":[188,143,143],"royalblue":[65,105,225],"saddlebrown":[139,69,19],"salmon":[250,128,114],"sandybrown":[244,164,96],"seagreen":[46,139,87],"seashell":[255,245,238],"sienna":[160,82,45],"skyblue":[135,206,235],"slateblue":[106,90,205],"slategray":[112,128,144],"slategrey":[112,128,144],"snow":[255,250,250],"springgreen":[0,255,127],"steelblue":[70,130,180],"tan":[210,180,140],"thistle":[216,191,216],"tomato":[255,99,71],"turquoise":[64,224,208],"violet":[238,130,238],"wheat":[245,222,179],"whitesmoke":[245,245,245],"yellowgreen":[154,205,50]});return _9cb;});},"dijit/_HasDropDown":function(){define("dijit/_HasDropDown",["dojo/_base/declare","dojo/_base/Deferred","dojo/_base/event","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/keys","dojo/_base/lang","dojo/on","dojo/window","./registry","./focus","./popup","./_FocusMixin"],function(_9d1,_9d2,_9d3,dom,_9d4,_9d5,_9d6,_9d7,has,keys,lang,on,_9d8,_9d9,_9da,_9db,_9dc){return _9d1("dijit._HasDropDown",_9dc,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}e.preventDefault();this._docHandler=this.connect(this.ownerDocument,"mouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _9dd=this.dropDown,_9de=false;if(e&&this._opened){var c=_9d6.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_9de){if(_9d5.contains(t,"dijitPopup")){_9de=true;}else{t=t.parentNode;}}if(_9de){t=e.target;if(_9dd.onItemClick){var _9df;while(t&&!(_9df=_9d9.byNode(t))){t=t.parentNode;}if(_9df&&_9df.onClick&&_9df.getParent){_9df.getParent().onItemClick(_9df,e);}}return;}}}if(this._opened){if(_9dd.focus&&_9dd.autoFocus!==false){this._focusDropDownTimer=this.defer(function(){_9dd.focus();delete this._focusDropDownTimer;});}}else{this.defer("focus");}if(has("touch")){this._justGotMouseUp=true;this.defer(function(){this._justGotMouseUp=false;});}},_onDropDownClick:function(e){if(has("touch")&&!this._justGotMouseUp){this._onDropDownMouseDown(e);this._onDropDownMouseUp(e);}if(this._stopClickEvents){_9d3.stop(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _9e0={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";_9d5.add(this._arrowWrapperNode||this._buttonNode,"dijit"+_9e0+"ArrowButton");},postCreate:function(){this.inherited(arguments);var _9e1=this.focusNode||this.domNode;this.own(on(this._buttonNode,"mousedown",lang.hitch(this,"_onDropDownMouseDown")),on(this._buttonNode,"click",lang.hitch(this,"_onDropDownClick")),on(_9e1,"keydown",lang.hitch(this,"_onKey")),on(_9e1,"keyup",lang.hitch(this,"_onKeyUp")));},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_9e2=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){_9d3.stop(e);return;}}if(d&&this._opened&&e.keyCode==keys.ESCAPE){this.closeDropDown();_9d3.stop(e);}else{if(!this._opened&&(e.keyCode==keys.DOWN_ARROW||((e.keyCode==keys.ENTER||e.keyCode==keys.SPACE)&&((_9e2.tagName||"").toLowerCase()!=="input"||(_9e2.type&&_9e2.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;_9d3.stop(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){this.defer(lang.hitch(d,"focus"),1);}}},_onBlur:function(){var _9e3=_9da.curNode&&this.dropDown&&dom.isDescendant(_9da.curNode,this.dropDown.domNode);this.closeDropDown(_9e3);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_9e4){_9e4();},loadAndOpenDropDown:function(){var d=new _9d2(),_9e5=lang.hitch(this,function(){this.openDropDown();d.resolve(this.dropDown);});if(!this.isLoaded()){this.loadDropDown(_9e5);}else{_9e5();}return d;},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){this.loadAndOpenDropDown();}else{this.closeDropDown();}},openDropDown:function(){var _9e6=this.dropDown,_9e7=_9e6.domNode,_9e8=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_9e7.style.width){this._explicitDDWidth=true;}if(_9e7.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _9e9={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_9e9.width="";}if(!this._explicitDDHeight){_9e9.height="";}_9d7.set(_9e7,_9e9);var _9ea=this.maxHeight;if(_9ea==-1){var _9eb=_9d8.getBox(this.ownerDocument),_9ec=_9d6.position(_9e8,false);_9ea=Math.floor(Math.max(_9ec.y,_9eb.h-(_9ec.y+_9ec.h)));}_9db.moveOffScreen(_9e6);if(_9e6.startup&&!_9e6._started){_9e6.startup();}var mb=_9d6.getMarginSize(_9e7);var _9ed=(_9ea&&mb.h>_9ea);_9d7.set(_9e7,{overflowX:"visible",overflowY:_9ed?"auto":"visible"});if(_9ed){mb.h=_9ea;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_9e8.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_9e8.offsetWidth);}else{delete mb.w;}}if(lang.isFunction(_9e6.resize)){_9e6.resize(mb);}else{_9d6.setMarginBox(_9e7,mb);}}var _9ee=_9db.open({parent:this,popup:_9e6,around:_9e8,orient:this.dropDownPosition,onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){_9d4.set(self._popupStateNode,"popupActive",false);_9d5.remove(self._popupStateNode,"dijitHasDropDownOpen");self._set("_opened",false);}});_9d4.set(this._popupStateNode,"popupActive","true");_9d5.add(this._popupStateNode,"dijitHasDropDownOpen");this._set("_opened",true);this.domNode.setAttribute("aria-expanded","true");return _9ee;},closeDropDown:function(_9ef){if(this._focusDropDownTimer){this._focusDropDownTimer.remove();delete this._focusDropDownTimer;}if(this._opened){this.domNode.setAttribute("aria-expanded","false");if(_9ef){this.focus();}_9db.close(this.dropDown);this._opened=false;}}});});},"dijit/_editor/range":function(){define("dijit/_editor/range",["dojo/_base/array","dojo/_base/declare","dojo/_base/lang","dojo/_base/window","../main"],function(_9f0,_9f1,lang,win,_9f2){_9f2.range={};_9f2.range.getIndex=function(node,_9f3){var ret=[],retR=[];var _9f4=node;var _9f5,n;while(node!=_9f3){var i=0;_9f5=node.parentNode;while((n=_9f5.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_9f5.childNodes.length);node=_9f5;}if(ret.length>0&&_9f4.nodeType==3){n=_9f4.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_9f4.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};_9f2.range.getNode=function(_9f6,_9f7){if(!lang.isArray(_9f6)||_9f6.length==0){return _9f7;}var node=_9f7;_9f0.every(_9f6,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};_9f2.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _9f8=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_9f8(n1);var n2as=_9f8(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};_9f2.range.getAncestor=function(node,_9f9,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_9f9.test(name)){return node;}node=node.parentNode;}return null;};_9f2.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;_9f2.range.getBlockAncestor=function(node,_9fa,root){root=root||node.ownerDocument.body;_9fa=_9fa||_9f2.range.BlockTagNames;var _9fb=null,_9fc;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_9fb&&_9fa.test(name)){_9fb=node;}if(!_9fc&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_9fc=node;}node=node.parentNode;}return {blockNode:_9fb,blockContainer:_9fc||node.ownerDocument.body};};_9f2.range.atBeginningOfContainer=function(_9fd,node,_9fe){var _9ff=false;var _a00=(_9fe==0);if(!_a00&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_9fe))){_a00=true;}}if(_a00){var _a01=node;_9ff=true;while(_a01&&_a01!==_9fd){if(_a01.previousSibling){_9ff=false;break;}_a01=_a01.parentNode;}}return _9ff;};_9f2.range.atEndOfContainer=function(_a02,node,_a03){var _a04=false;var _a05=(_a03==(node.length||node.childNodes.length));if(!_a05&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_a03))){_a05=true;}}if(_a05){var _a06=node;_a04=true;while(_a06&&_a06!==_a02){if(_a06.nextSibling){_a04=false;break;}_a06=_a06.parentNode;}}return _a04;};_9f2.range.adjacentNoneTextNode=function(_a07,next){var node=_a07;var len=(0-_a07.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};_9f2.range.create=function(win){win=win||window;if(win.getSelection){return win.document.createRange();}else{return new _9f2.range.W3CRange();}};_9f2.range.getSelection=function(_a08,_a09){if(_a08.getSelection){return _a08.getSelection();}else{var s=new _9f2.range.ie.selection(_a08);if(!_a09){s._getCurrentSelection();}return s;}};if(!window.getSelection){_9f2.range.ie={cachedSelection:{},selection:function(_a0a){this._ranges=[];this.addRange=function(r,_a0b){this._ranges.push(r);if(!_a0b){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _a0c=function(){var r=_a0a.document.selection.createRange();var type=_a0a.document.selection.type.toUpperCase();if(type=="CONTROL"){return new _9f2.range.W3CRange(_9f2.range.ie.decomposeControlRange(r));}else{return new _9f2.range.W3CRange(_9f2.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_a0c();if(r){this.addRange(r,true);this.isCollapsed=r.collapsed;}else{this.isCollapsed=true;}};},decomposeControlRange:function(_a0d){var _a0e=_a0d.item(0),_a0f=_a0d.item(_a0d.length-1);var _a10=_a0e.parentNode,_a11=_a0f.parentNode;var _a12=_9f2.range.getIndex(_a0e,_a10).o[0];var _a13=_9f2.range.getIndex(_a0f,_a11).o[0]+1;return [_a10,_a12,_a11,_a13];},getEndPoint:function(_a14,end){var _a15=_a14.duplicate();_a15.collapse(!end);var _a16="EndTo"+(end?"End":"Start");var _a17=_a15.parentElement();var _a18,_a19,_a1a;if(_a17.childNodes.length>0){_9f0.every(_a17.childNodes,function(node,i){var _a1b;if(node.nodeType!=3){_a15.moveToElementText(node);if(_a15.compareEndPoints(_a16,_a14)>0){if(_a1a&&_a1a.nodeType==3){_a18=_a1a;_a1b=true;}else{_a18=_a17;_a19=i;return false;}}else{if(i==_a17.childNodes.length-1){_a18=_a17;_a19=_a17.childNodes.length;return false;}}}else{if(i==_a17.childNodes.length-1){_a18=node;_a1b=true;}}if(_a1b&&_a18){var _a1c=_9f2.range.adjacentNoneTextNode(_a18)[0];if(_a1c){_a18=_a1c.nextSibling;}else{_a18=_a17.firstChild;}var _a1d=_9f2.range.adjacentNoneTextNode(_a18);_a1c=_a1d[0];var _a1e=_a1d[1];if(_a1c){_a15.moveToElementText(_a1c);_a15.collapse(false);}else{_a15.moveToElementText(_a17);}_a15.setEndPoint(_a16,_a14);_a19=_a15.text.length-_a1e;return false;}_a1a=node;return true;});}else{_a18=_a17;_a19=0;}if(!end&&_a18.nodeType==1&&_a19==_a18.childNodes.length){var _a1f=_a18.nextSibling;if(_a1f&&_a1f.nodeType==3){_a18=_a1f;_a19=0;}}return [_a18,_a19];},setEndPoint:function(_a20,_a21,_a22){var _a23=_a20.duplicate(),node,len;if(_a21.nodeType!=3){if(_a22>0){node=_a21.childNodes[_a22-1];if(node){if(node.nodeType==3){_a21=node;_a22=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_a21=node.nextSibling;_a22=0;}else{_a23.moveToElementText(node.nextSibling?node:_a21);var _a24=node.parentNode;var _a25=_a24.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_a23.collapse(false);_a24.removeChild(_a25);}}}}else{_a23.moveToElementText(_a21);_a23.collapse(true);}}if(_a21.nodeType==3){var _a26=_9f2.range.adjacentNoneTextNode(_a21);var _a27=_a26[0];len=_a26[1];if(_a27){_a23.moveToElementText(_a27);_a23.collapse(false);if(_a27.contentEditable!="inherit"){len++;}}else{_a23.moveToElementText(_a21.parentNode);_a23.collapse(true);_a23.move("character",1);_a23.move("character",-1);}_a22+=len;if(_a22>0){if(_a23.move("character",_a22)!=_a22){console.error("Error when moving!");}}}return _a23;},decomposeTextRange:function(_a28){var _a29=_9f2.range.ie.getEndPoint(_a28);var _a2a=_a29[0],_a2b=_a29[1];var _a2c=_a29[0],_a2d=_a29[1];if(_a28.htmlText.length){if(_a28.htmlText==_a28.text){_a2d=_a2b+_a28.text.length;}else{_a29=_9f2.range.ie.getEndPoint(_a28,true);_a2c=_a29[0],_a2d=_a29[1];}}return [_a2a,_a2b,_a2c,_a2d];},setRange:function(_a2e,_a2f,_a30,_a31,_a32,_a33){var _a34=_9f2.range.ie.setEndPoint(_a2e,_a2f,_a30);_a2e.setEndPoint("StartToStart",_a34);if(!_a33){var end=_9f2.range.ie.setEndPoint(_a2e,_a31,_a32);}_a2e.setEndPoint("EndToEnd",end||_a34);return _a2e;}};_9f1("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=_9f2.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_a35){_a35=parseInt(_a35);if(this.startContainer===node&&this.startOffset==_a35){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_a35;if(!this.endContainer){this.setEnd(node,_a35);}else{this._updateInternal();}},setEnd:function(node,_a36){_a36=parseInt(_a36);if(this.endContainer===node&&this.endOffset==_a36){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_a36;if(!this.startContainer){this.setStart(node,_a36);}else{this._updateInternal();}},setStartAfter:function(node,_a37){this._setPoint("setStart",node,_a37,1);},setStartBefore:function(node,_a38){this._setPoint("setStart",node,_a38,0);},setEndAfter:function(node,_a39){this._setPoint("setEnd",node,_a39,1);},setEndBefore:function(node,_a3a){this._setPoint("setEnd",node,_a3a,0);},_setPoint:function(what,node,_a3b,ext){var _a3c=_9f2.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_a3c.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();_9f2.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var s=this.startContainer,r=this._getIERange();if(s.nodeType===3&&!this.startOffset){this.setStartBefore(s);}r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new _9f2.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}return _9f2.range;});},"dijit/Tooltip":function(){require({cache:{"url:dijit/templates/Tooltip.html":"<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" data-dojo-attach-point=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" data-dojo-attach-point=\"connectorNode\"></div\n></div>\n"}});define("dijit/Tooltip",["dojo/_base/array","dojo/_base/declare","dojo/_base/fx","dojo/dom","dojo/dom-class","dojo/dom-geometry","dojo/dom-style","dojo/_base/lang","dojo/mouse","dojo/on","dojo/sniff","./_base/manager","./place","./_Widget","./_TemplatedMixin","./BackgroundIframe","dojo/text!./templates/Tooltip.html","./main"],function(_a3d,_a3e,fx,dom,_a3f,_a40,_a41,lang,_a42,on,has,_a43,_a44,_a45,_a46,_a47,_a48,_a49){var _a4a=_a3e("dijit._MasterTooltip",[_a45,_a46],{duration:_a43.defaultDuration,templateString:_a48,postCreate:function(){this.ownerDocumentBody.appendChild(this.domNode);this.bgIframe=new _a47(this.domNode);this.fadeIn=fx.fadeIn({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onShow")});this.fadeOut=fx.fadeOut({node:this.domNode,duration:this.duration,onEnd:lang.hitch(this,"_onHide")});},show:function(_a4b,_a4c,_a4d,rtl,_a4e){if(this.aroundNode&&this.aroundNode===_a4c&&this.containerNode.innerHTML==_a4b){return;}if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_a4b;if(_a4e){this.set("textDir",_a4e);}this.containerNode.align=rtl?"right":"left";var pos=_a44.around(this.domNode,_a4c,_a4d&&_a4d.length?_a4d:_a4f.defaultPosition,!rtl,lang.hitch(this,"orient"));var _a50=pos.aroundNodePos;if(pos.corner.charAt(0)=="M"&&pos.aroundCorner.charAt(0)=="M"){this.connectorNode.style.top=_a50.y+((_a50.h-this.connectorNode.offsetHeight)>>1)-pos.y+"px";this.connectorNode.style.left="";}else{if(pos.corner.charAt(1)=="M"&&pos.aroundCorner.charAt(1)=="M"){this.connectorNode.style.left=_a50.x+((_a50.w-this.connectorNode.offsetWidth)>>1)-pos.x+"px";}else{this.connectorNode.style.left="";this.connectorNode.style.top="";}}_a41.set(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_a4c;},orient:function(node,_a51,_a52,_a53,_a54){this.connectorNode.style.top="";var _a55=_a53.h,_a56=_a53.w;node.className="dijitTooltip "+{"MR-ML":"dijitTooltipRight","ML-MR":"dijitTooltipLeft","TM-BM":"dijitTooltipAbove","BM-TM":"dijitTooltipBelow","BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_a51+"-"+_a52];this.domNode.style.width="auto";var size=_a40.position(this.domNode);if(has("ie")==9){size.w+=2;}var _a57=Math.min((Math.max(_a56,1)),size.w);_a40.setMarginBox(this.domNode,{w:_a57});if(_a52.charAt(0)=="B"&&_a51.charAt(0)=="B"){var bb=_a40.position(node);var _a58=this.connectorNode.offsetHeight;if(bb.h>_a55){var _a59=_a55-((_a54.h+_a58)>>1);this.connectorNode.style.top=_a59+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_a54.h/2-_a58/2,0),bb.h-_a58)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_a56);},_onShow:function(){if(has("ie")){this.domNode.style.filter="";}},hide:function(_a5a){if(this._onDeck&&this._onDeck[1]==_a5a){this._onDeck=null;}else{if(this.aroundNode===_a5a){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}},_setAutoTextDir:function(node){this.applyTextDir(node,has("ie")?node.outerText:node.textContent);_a3d.forEach(node.children,function(_a5b){this._setAutoTextDir(_a5b);},this);},_setTextDirAttr:function(_a5c){this._set("textDir",_a5c);if(_a5c=="auto"){this._setAutoTextDir(this.containerNode);}else{this.containerNode.dir=this.textDir;}}});_a49.showTooltip=function(_a5d,_a5e,_a5f,rtl,_a60){if(_a5f){_a5f=_a3d.map(_a5f,function(val){return {after:"after-centered",before:"before-centered"}[val]||val;});}if(!_a4f._masterTT){_a49._masterTT=_a4f._masterTT=new _a4a();}return _a4f._masterTT.show(_a5d,_a5e,_a5f,rtl,_a60);};_a49.hideTooltip=function(_a61){return _a4f._masterTT&&_a4f._masterTT.hide(_a61);};var _a4f=_a3e("dijit.Tooltip",_a45,{label:"",showDelay:400,connectId:[],position:[],selector:"",_setConnectIdAttr:function(_a62){_a3d.forEach(this._connections||[],function(_a63){_a3d.forEach(_a63,function(_a64){_a64.remove();});},this);this._connectIds=_a3d.filter(lang.isArrayLike(_a62)?_a62:(_a62?[_a62]:[]),function(id){return dom.byId(id,this.ownerDocument);},this);this._connections=_a3d.map(this._connectIds,function(id){var node=dom.byId(id,this.ownerDocument),_a65=this.selector,_a66=_a65?function(_a67){return on.selector(_a65,_a67);}:function(_a68){return _a68;},self=this;return [on(node,_a66(_a42.enter),function(){self._onHover(this);}),on(node,_a66("focusin"),function(){self._onHover(this);}),on(node,_a66(_a42.leave),lang.hitch(self,"_onUnHover")),on(node,_a66("focusout"),lang.hitch(self,"_onUnHover"))];},this);this._set("connectId",_a62);},addTarget:function(node){var id=node.id||node;if(_a3d.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=_a3d.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);_a3f.add(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;_a3d.forEach(lang.isArrayLike(ids)?ids:[ids],this.addTarget,this);},getContent:function(node){return this.label||this.domNode.innerHTML;},_onHover:function(_a69){if(!this._showTimer){this._showTimer=this.defer(function(){this.open(_a69);},this.showDelay);}},_onUnHover:function(){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}this.close();},open:function(_a6a){if(this._showTimer){this._showTimer.remove();delete this._showTimer;}var _a6b=this.getContent(_a6a);if(!_a6b){return;}_a4f.show(_a6b,_a6a,this.position,!this.isLeftToRight(),this.textDir);this._connectNode=_a6a;this.onShow(_a6a,this.position);},close:function(){if(this._connectNode){_a4f.hide(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){this._showTimer.remove();delete this._showTimer;}},onShow:function(){},onHide:function(){},destroy:function(){this.close();_a3d.forEach(this._connections||[],function(_a6c){_a3d.forEach(_a6c,function(_a6d){_a6d.remove();});},this);this.inherited(arguments);}});_a4f._MasterTooltip=_a4a;_a4f.show=_a49.showTooltip;_a4f.hide=_a49.hideTooltip;_a4f.defaultPosition=["after-centered","before-centered"];return _a4f;});},"esri/layers/OnDemandMode":function(){define("esri/layers/OnDemandMode",["dojo/_base/declare","dojo/_base/connect","dojo/_base/lang","dojo/_base/array","dojo/has","esri/kernel","esri/geometry/Point","esri/tasks/query","esri/layers/RenderMode","esri/layers/GridLayout"],function(_a6e,_a6f,lang,_a70,has,_a71,_a72,_a73,_a74,_a75){var _a76=_a6e([_a74],{declaredClass:"esri.layers._OnDemandMode",constructor:function(_a77){this.featureLayer=_a77;this._featureMap={};this._queryErrorHandler=lang.hitch(this,this._queryErrorHandler);},initialize:function(map){this.inherited(arguments);var _a78=this.featureLayer,_a79=_a78._srInfo;this._gridLayer=new _a75(new _a72(_a79?_a79.valid[0]:map.extent.xmin,map.extent.ymax,map.spatialReference),{width:_a78._tileWidth,height:_a78._tileHeight},{width:map.width,height:map.height},_a79);this._cellMap={};this._gridLayer.setResolution(map.extent);},startup:function(){this._ioQueue=[];if(!this.featureLayer.suspended){this._zoomHandler();this._enableConnectors();}},propertyChangeHandler:function(type){if(this._init){if(type<2){this._zoomHandler();}else{console.log("FeatureLayer: layer in on-demand mode does not support time definitions. Layer id = "+this.featureLayer.id+", Layer URL = "+this.featureLayer.url);}}},destroy:function(){this._disableConnectors();this.inherited(arguments);},drawFeature:function(_a7a){var _a7b=this._gridLayer,geom=_a7a.geometry,_a7c=[];if(!geom){return;}_a7c=_a7b.getCellsInExtent((geom.type==="point")?{xmin:geom.x,ymin:geom.y,xmax:geom.x,ymax:geom.y}:geom.getExtent(),false).cells;var _a7d=this._cellMap,i,cell,oid=_a7a.attributes[this.featureLayer.objectIdField],_a7e,row,col;for(i=0;i<_a7c.length;i++){cell=_a7c[i];_a7e=cell.latticeID;row=cell.row;col=cell.col;if(_a7e){cell=(_a7d[_a7e]=(_a7d[_a7e]||cell));}else{_a7d[row]=_a7d[row]||{};cell=(_a7d[row][col]=(_a7d[row][col]||cell));}cell.features=cell.features||[];cell.features.push(_a7a);this._addFeatureIIf(oid,_a7a);this._incRefCount(oid);}},suspend:function(){if(!this._init){return;}this._disableConnectors();},resume:function(){if(!this._init){return;}this._enableConnectors();this._zoomHandler();},refresh:function(){this._zoomHandler();},_enableConnectors:function(){var map=this.map;this._zoomConnect=_a6f.connect(map,"onZoomEnd",this,this._zoomHandler);this._panConnect=_a6f.connect(map,"onPanEnd",this,this._panHandler);this._resizeConnect=_a6f.connect(map,"onResize",this,this._panHandler);},_disableConnectors:function(){_a6f.disconnect(this._zoomConnect);_a6f.disconnect(this._panConnect);_a6f.disconnect(this._resizeConnect);},_zoomHandler:function(){this._processIOQueue(true);var _a7f=this.featureLayer,map=this.map;if(_a7f.suspended){return;}_a7f._fireUpdateStart();this._clearIIf();var _a80=_a7f._trackManager;if(_a80){_a80.clearTracks();}this._cellMap={};this._gridLayer.setResolution(map.extent);this._sendRequest();},_panHandler:function(){this.featureLayer._fireUpdateStart();this._sendRequest(this.featureLayer._resized&&arguments[0]);},_getRequestId:function(_a81,cell){var id="_"+_a81.name+_a81.layerId+_a81._ulid+"_"+cell.resolution+"_"+(cell.latticeID||(cell.row+"_"+cell.col));return id.replace(/[^a-zA-Z0-9\_]+/g,"_");},_sendRequest:function(_a82){this._exceeds=false;var _a83=this.featureLayer,map=this.map,_a84=_a82||map.extent,_a85=this._gridLayer.getCellsInExtent(_a84,_a83.latticeTiling),_a86=_a85.cells;if(!_a83.isEditable()){var _a87=this._cellMap;_a86=_a70.filter(_a86,function(cell){if(cell.lattice){if(_a87[cell.latticeID]){return false;}}else{if(_a87[cell.row]&&_a87[cell.row][cell.col]){return false;}}return true;});}var _a88=_a83.getOutFields(),_a89=_a83.getDefinitionExpression(),time=_a83._getOffsettedTE(_a83._mapTimeExtent),_a8a=_a83._usePatch,_a8b=this._ioQueue,i,self=this,func=this._drawFeatures,cell,_a8c,_a8d;this._pending=this._pending||0;for(i=0;i<_a86.length;i++){cell=_a86[i];_a8c=new _a73();_a8c.geometry=cell.extent||cell.lattice;_a8c.outFields=_a88;_a8c.where=_a89;if(_a83.latticeTiling&&cell.extent){_a8c.spatialRelationship=_a73.SPATIAL_REL_CONTAINS;}_a8c.returnGeometry=true;_a8c.timeExtent=time;_a8c.maxAllowableOffset=_a83._maxOffset;if(_a83._ts){_a8c._ts=(new Date()).getTime();}_a8d=null;if(_a8a){_a8d=this._getRequestId(_a83,cell);if(this._isPending(_a8d)){continue;}}this._pending++;_a8b.push(_a83._task.execute(_a8c,function(){var _a8e=cell;return function(_a8f){func.apply(self,[_a8f,_a8e]);};}.call(this),this._queryErrorHandler,_a8d));}this._removeOldCells(_a84);this._endCheck();},_drawFeatures:function(_a90,cell){this._exceeds=this._exceeds||_a90.exceededTransferLimit;this._finalizeIO();var _a91=this.featureLayer,map=this.map,_a92=map.extent,_a93=cell.extent,row=cell.row,col=cell.col,_a94=_a91.objectIdField,_a95=_a90.features,_a96=this._gridLayer,_a97=this._cellMap,i,len,_a98=cell.latticeID,_a99=_a98?_a97[_a98]:(_a97[row]&&_a97[row][col]);if((cell.resolution!=_a96._resolution)||(_a98?(_a98!==_a96.getLatticeID(_a92)):(!_a96.intersects(_a93,_a92)))){if(_a99){this._removeCell(row,col,_a98);}}else{if(_a99){this._updateCell(_a99,_a95);}else{cell.features=_a95;if(_a98){_a97[_a98]=cell;}else{_a97[row]=_a97[row]||{};_a97[row][col]=cell;}len=_a95.length;for(i=0;i<len;i++){var _a9a=_a95[i];var oid=_a9a.attributes[_a94];this._addFeatureIIf(oid,_a9a);this._incRefCount(oid);}}}this._endCheck();},_queryErrorHandler:function(err){this._finalizeIO();this.featureLayer._errorHandler(err);this._endCheck(true);},_finalizeIO:function(){this._purgeRequests();this._pending--;},_endCheck:function(_a9b){if(this._pending===0){this._processIOQueue();var _a9c=this.featureLayer,_a9d=_a9c._trackManager;if(_a9d){_a9d.clearTracks();_a9d.addFeatures(_a9c.graphics);if(_a9c._ager){_a70.forEach(_a9c.graphics,function(_a9e){if(_a9e._shape){_a9c._repaint(_a9e);}});}_a9d.moveLatestToFront();_a9d.drawTracks();}this.featureLayer._fireUpdateEnd(_a9b&&new Error("FeatureLayer: an error occurred while updating the layer"),this._exceeds?{queryLimitExceeded:true}:null);if(this._exceeds){_a9c.onQueryLimitExceeded();}}},_processIOQueue:function(_a9f){this._ioQueue=_a70.filter(this._ioQueue,function(dfd){var keep=dfd.fired>-1?false:true;return keep;});if(_a9f){_a70.forEach(this._ioQueue,this._cancelPendingRequest);}},_removeOldCells:function(_aa0){var _aa1=this._cellMap,_aa2=this._gridLayer,_aa3,_aa4;for(_aa3 in _aa1){if(_aa1[_aa3]){var row=_aa1[_aa3],_aa5=row.latticeID,_aa6=0,_aa7=0;if(_aa5){_aa6++;if(_aa5!==_aa2.getLatticeID(_aa0)){this._removeCell(null,null,_aa5);_aa7++;}}else{for(_aa4 in row){if(row[_aa4]){_aa6++;var _aa8=row[_aa4].extent;if(!_aa2.intersects(_aa8,_aa0)){this._removeCell(_aa3,_aa4);_aa7++;}}}}if(_aa7===_aa6){delete _aa1[_aa3];}}}},_updateCell:function(cell,_aa9){var _aaa=this.featureLayer,_aab=_aaa.objectIdField,_aac=_aaa._selectedFeatures,i,len=_aa9.length;cell.features=cell.features||[];for(i=0;i<len;i++){var _aad=_aa9[i];var oid=_aad.attributes[_aab];var _aae=this._addFeatureIIf(oid,_aad);if(_aae===_aad){this._incRefCount(oid);cell.features.push(_aae);}else{if(!(oid in _aac)){_aae.setGeometry(_aad.geometry);_aae.setAttributes(_aad.attributes);}}}},_removeCell:function(row,col,_aaf){var _ab0=this._cellMap,_ab1=this.featureLayer,_ab2=_ab1.objectIdField;var cell=_aaf?_ab0[_aaf]:(_ab0[row]&&_ab0[row][col]);if(cell){if(_aaf){delete _ab0[_aaf];}else{delete _ab0[row][col];}var _ab3=cell.features,i;for(i=0;i<_ab3.length;i++){var _ab4=_ab3[i];var oid=_ab4.attributes[_ab2];this._decRefCount(oid);if(oid in _ab1._selectedFeatures){continue;}this._removeFeatureIIf(oid);}}}});if(has("extend-esri")){lang.setObject("layers._OnDemandMode",_a76,_a71);}return _a76;});},"dijit/form/_ComboBoxMenu":function(){define("dijit/form/_ComboBoxMenu",["dojo/_base/declare","dojo/dom-class","dojo/dom-style","dojo/keys","../_WidgetBase","../_TemplatedMixin","./_ComboBoxMenuMixin","./_ListMouseMixin"],function(_ab5,_ab6,_ab7,keys,_ab8,_ab9,_aba,_abb){return _ab5("dijit.form._ComboBoxMenu",[_ab8,_ab9,_abb,_aba],{templateString:"<div class='dijitReset dijitMenu' data-dojo-attach-point='containerNode' style='overflow: auto; overflow-x: hidden;' role='listbox'>"+"<div class='dijitMenuItem dijitMenuPreviousButton' data-dojo-attach-point='previousButton' role='option'></div>"+"<div class='dijitMenuItem dijitMenuNextButton' data-dojo-attach-point='nextButton' role='option'></div>"+"</div>",baseClass:"dijitComboBoxMenu",postCreate:function(){this.inherited(arguments);if(!this.isLeftToRight()){_ab6.add(this.previousButton,"dijitMenuItemRtl");_ab6.add(this.nextButton,"dijitMenuItemRtl");}},_createMenuItem:function(){var item=this.ownerDocument.createElement("div");item.className="dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl");item.setAttribute("role","option");return item;},onHover:function(node){_ab6.add(node,"dijitMenuItemHover");},onUnhover:function(node){_ab6.remove(node,"dijitMenuItemHover");},onSelect:function(node){_ab6.add(node,"dijitMenuItemSelected");},onDeselect:function(node){_ab6.remove(node,"dijitMenuItemSelected");},_page:function(up){var _abc=0;var _abd=this.domNode.scrollTop;var _abe=_ab7.get(this.domNode,"height");if(!this.getHighlightedOption()){this.selectNextNode();}while(_abc<_abe){var _abf=this.getHighlightedOption();if(up){if(!_abf.previousSibling||_abf.previousSibling.style.display=="none"){break;}this.selectPreviousNode();}else{if(!_abf.nextSibling||_abf.nextSibling.style.display=="none"){break;}this.selectNextNode();}var _ac0=this.domNode.scrollTop;_abc+=(_ac0-_abd)*(up?-1:1);_abd=_ac0;}},handleKey:function(evt){switch(evt.keyCode){case keys.DOWN_ARROW:this.selectNextNode();return false;case keys.PAGE_DOWN:this._page(false);return false;case keys.UP_ARROW:this.selectPreviousNode();return false;case keys.PAGE_UP:this._page(true);return false;default:return true;}}});});},"dijit/Calendar":function(){define("dijit/Calendar",["dojo/_base/array","dojo/date","dojo/date/locale","dojo/_base/declare","dojo/dom-attr","dojo/dom-class","dojo/_base/event","dojo/_base/kernel","dojo/keys","dojo/_base/lang","dojo/sniff","./CalendarLite","./_Widget","./_CssStateMixin","./_TemplatedMixin","./form/DropDownButton"],function(_ac1,date,_ac2,_ac3,_ac4,_ac5,_ac6,_ac7,keys,lang,has,_ac8,_ac9,_aca,_acb,_acc){var _acd=_ac3("dijit.Calendar",[_ac8,_ac9,_aca],{cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},setValue:function(_ace){_ac7.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_ace);},_createMonthWidget:function(){return new _acd._MonthDropDownButton({id:this.id+"_mddb",tabIndex:-1,onMonthSelect:lang.hitch(this,"_onMonthSelect"),lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeydown","_onKeyDown");this.connect(this.dateRowsNode,"onmouseover","_onDayMouseOver");this.connect(this.dateRowsNode,"onmouseout","_onDayMouseOut");this.connect(this.dateRowsNode,"onmousedown","_onDayMouseDown");this.connect(this.dateRowsNode,"onmouseup","_onDayMouseUp");},_onMonthSelect:function(_acf){var date=new this.dateClassObj(this.currentFocus);date.setDate(1);date.setMonth(_acf);var _ad0=this.dateModule.getDaysInMonth(date);var _ad1=this.currentFocus.getDate();date.setDate(Math.min(_ad1,_ad0));this._setCurrentFocusAttr(date);},_onDayMouseOver:function(evt){var node=_ac5.contains(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&((node.dijitDateValue&&!_ac5.contains(node,"dijitCalendarDisabledDate"))||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){_ac5.add(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(_ac5.contains(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}_ac5.remove(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue&&!_ac5.contains(node,"dijitCalendarDisabledDate")){_ac5.add(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){_ac5.remove(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var _ad2=-1,_ad3,_ad4=this.currentFocus;switch(evt.keyCode){case keys.RIGHT_ARROW:_ad2=1;case keys.LEFT_ARROW:_ad3="day";if(!this.isLeftToRight()){_ad2*=-1;}break;case keys.DOWN_ARROW:_ad2=1;case keys.UP_ARROW:_ad3="week";break;case keys.PAGE_DOWN:_ad2=1;case keys.PAGE_UP:_ad3=evt.ctrlKey||evt.altKey?"year":"month";break;case keys.END:_ad4=this.dateModule.add(_ad4,"month",1);_ad3="day";case keys.HOME:_ad4=new this.dateClassObj(_ad4);_ad4.setDate(1);break;case keys.ENTER:case keys.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_ad3){_ad4=this.dateModule.add(_ad4,_ad3,_ad2);}this._setCurrentFocusAttr(_ad4);return false;},_onKeyDown:function(evt){if(!this.handleKey(evt)){_ac6.stop(evt);}},onValueSelected:function(){},onChange:function(_ad5){this.onValueSelected(_ad5);},getClassForDate:function(){}});_acd._MonthDropDownButton=_ac3("dijit.Calendar._MonthDropDownButton",_acc,{onMonthSelect:function(){},postCreate:function(){this.inherited(arguments);this.dropDown=new _acd._MonthDropDown({id:this.id+"_mdd",onChange:this.onMonthSelect});},_setMonthAttr:function(_ad6){var _ad7=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_ad6);this.dropDown.set("months",_ad7);this.containerNode.innerHTML=(has("ie")==6?"":"<div class='dijitSpacer'>"+this.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_ad7[_ad6.getMonth()]+"</div>";}});_acd._MonthDropDown=_ac3("dijit.Calendar._MonthDropDown",[_ac9,_acb],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"data-dojo-attach-event='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_ad8){this.domNode.innerHTML=_ac1.map(_ad8,function(_ad9,idx){return _ad9?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_ad9+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(_ac4.get(evt.target,"month"));},onChange:function(){},_onMenuHover:function(evt){_ac5.toggle(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});return _acd;});},"url:dijit/form/templates/TextBox.html":"<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" data-dojo-attach-point='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n","dijit/popup":function(){define("dijit/popup",["dojo/_base/array","dojo/aspect","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/keys","dojo/_base/lang","dojo/on","dojo/sniff","./place","./BackgroundIframe","./main"],function(_ada,_adb,_adc,_add,dom,_ade,_adf,_ae0,_ae1,_ae2,keys,lang,on,has,_ae3,_ae4,_ae5){function _ae6(){if(this._popupWrapper){_adf.destroy(this._popupWrapper);delete this._popupWrapper;}};var _ae7=_add(null,{_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_ae8){var _ae9=_ae8._popupWrapper,node=_ae8.domNode;if(!_ae9){_ae9=_adf.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},_ae8.ownerDocumentBody);_ae9.appendChild(node);var s=node.style;s.display="";s.visibility="";s.position="";s.top="0px";_ae8._popupWrapper=_ae9;_adb.after(_ae8,"destroy",_ae6,true);}return _ae9;},moveOffScreen:function(_aea){var _aeb=this._createWrapper(_aea);_ae1.set(_aeb,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_aec){var _aed=this._createWrapper(_aec);_ae1.set(_aed,"display","none");},getTopPopup:function(){var _aee=this._stack;for(var pi=_aee.length-1;pi>0&&_aee[pi].parent===_aee[pi-1].widget;pi--){}return _aee[pi];},open:function(args){var _aef=this._stack,_af0=args.popup,_af1=args.orient||["below","below-alt","above","above-alt"],ltr=args.parent?args.parent.isLeftToRight():_ae0.isBodyLtr(_af0.ownerDocument),_af2=args.around,id=(args.around&&args.around.id)?(args.around.id+"_dropdown"):("popup_"+this._idGen++);while(_aef.length&&(!args.parent||!dom.isDescendant(args.parent.domNode,_aef[_aef.length-1].widget.domNode))){this.close(_aef[_aef.length-1].widget);}var _af3=this._createWrapper(_af0);_ade.set(_af3,{id:id,style:{zIndex:this._beginZIndex+_aef.length},"class":"dijitPopup "+(_af0.baseClass||_af0["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:args.parent?args.parent.id:""});if(has("ie")||has("mozilla")){if(!_af0.bgIframe){_af0.bgIframe=new _ae4(_af3);}}var best=_af2?_ae3.around(_af3,_af2,_af1,ltr,_af0.orient?lang.hitch(_af0,"orient"):null):_ae3.at(_af3,args,_af1=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],args.padding);_af3.style.display="";_af3.style.visibility="visible";_af0.domNode.style.visibility="visible";var _af4=[];_af4.push(on(_af3,_adc._keypress,lang.hitch(this,function(evt){if(evt.charOrCode==keys.ESCAPE&&args.onCancel){_ae2.stop(evt);args.onCancel();}else{if(evt.charOrCode===keys.TAB){_ae2.stop(evt);var _af5=this.getTopPopup();if(_af5&&_af5.onCancel){_af5.onCancel();}}}})));if(_af0.onCancel&&args.onCancel){_af4.push(_af0.on("cancel",args.onCancel));}_af4.push(_af0.on(_af0.onExecute?"execute":"change",lang.hitch(this,function(){var _af6=this.getTopPopup();if(_af6&&_af6.onExecute){_af6.onExecute();}})));_aef.push({widget:_af0,parent:args.parent,onExecute:args.onExecute,onCancel:args.onCancel,onClose:args.onClose,handlers:_af4});if(_af0.onOpen){_af0.onOpen(best);}return best;},close:function(_af7){var _af8=this._stack;while((_af7&&_ada.some(_af8,function(elem){return elem.widget==_af7;}))||(!_af7&&_af8.length)){var top=_af8.pop(),_af9=top.widget,_afa=top.onClose;if(_af9.onClose){_af9.onClose();}var h;while(h=top.handlers.pop()){h.remove();}if(_af9&&_af9.domNode){this.hide(_af9);}if(_afa){_afa();}}}});return (_ae5.popup=new _ae7());});},"dijit/CalendarLite":function(){require({cache:{"url:dijit/templates/Calendar.html":"<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" aria-labelledby=\"${id}_mddb ${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div data-dojo-attach-point=\"monthNode\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' data-dojo-attach-point=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span data-dojo-attach-point=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr role=\"row\">\n\t\t\t${!dayCellsHtml}\n\t\t</tr>\n\t</thead>\n\t<tbody data-dojo-attach-point=\"dateRowsNode\" data-dojo-attach-event=\"onclick: _onDayClick\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t\t${!dateRowsHtml}\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\" role=\"presentation\">\n\t\t\t\t<div class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span data-dojo-attach-point=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\" role=\"button\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" role=\"button\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span data-dojo-attach-point=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\" role=\"button\"></span>\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"}});define("dijit/CalendarLite",["dojo/_base/array","dojo/_base/declare","dojo/cldr/supplemental","dojo/date","dojo/date/locale","dojo/date/stamp","dojo/dom","dojo/dom-class","dojo/_base/event","dojo/_base/lang","dojo/sniff","dojo/string","./_WidgetBase","./_TemplatedMixin","dojo/text!./templates/Calendar.html","./hccss"],function(_afb,_afc,_afd,date,_afe,_aff,dom,_b00,_b01,lang,has,_b02,_b03,_b04,_b05){var _b06=_afc("dijit.CalendarLite",[_b03,_b04],{templateString:_b05,dowTemplateString:"<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\">${d}</span></th>",dateTemplateString:"<td class=\"dijitReset\" role=\"gridcell\" data-dojo-attach-point=\"dateCells\"><span class=\"dijitCalendarDateLabel\" data-dojo-attach-point=\"dateLabels\"></span></td>",weekTemplateString:"<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">${d}${d}${d}${d}${d}${d}${d}</tr>",value:new Date(""),datePackage:"",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",_isValidDate:function(_b07){return _b07&&!isNaN(_b07)&&typeof _b07=="object"&&_b07.toString()!=this.constructor.prototype.value.toString();},_getValueAttr:function(){if(this.value&&!isNaN(this.value)){var _b08=new this.dateClassObj(this.value);_b08.setHours(0,0,0,0);if(_b08.getDate()<this.value.getDate()){_b08=this.dateModule.add(_b08,"hour",1);}return _b08;}else{return null;}},_setValueAttr:function(_b09,_b0a){if(typeof _b09=="string"){_b09=_aff.fromISOString(_b09);}_b09=this._patchDate(_b09);if(this._isValidDate(_b09)&&!this.isDisabledDate(_b09,this.lang)){this._set("value",_b09);this.set("currentFocus",_b09);this._markSelectedDates([_b09]);if(this._created&&(_b0a||typeof _b0a=="undefined")){this.onChange(this.get("value"));}}else{this._set("value",null);this._markSelectedDates([]);}},_patchDate:function(_b0b){if(_b0b){_b0b=new this.dateClassObj(_b0b);_b0b.setHours(1,0,0,0);}return _b0b;},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(node.ownerDocument.createTextNode(text));},_populateGrid:function(){var _b0c=new this.dateClassObj(this.currentFocus);_b0c.setDate(1);var _b0d=_b0c.getDay(),_b0e=this.dateModule.getDaysInMonth(_b0c),_b0f=this.dateModule.getDaysInMonth(this.dateModule.add(_b0c,"month",-1)),_b10=new this.dateClassObj(),_b11=_afd.getFirstDayOfWeek(this.lang);if(_b11>_b0d){_b11-=7;}this._date2cell={};_afb.forEach(this.dateCells,function(_b12,idx){var i=idx+_b11;var date=new this.dateClassObj(_b0c),_b13,_b14="dijitCalendar",adj=0;if(i<_b0d){_b13=_b0f-_b0d+i+1;adj=-1;_b14+="Previous";}else{if(i>=(_b0d+_b0e)){_b13=i-_b0d-_b0e+1;adj=1;_b14+="Next";}else{_b13=i-_b0d+1;_b14+="Current";}}if(adj){date=this.dateModule.add(date,"month",adj);}date.setDate(_b13);if(!this.dateModule.compare(date,_b10,"date")){_b14="dijitCalendarCurrentDate "+_b14;}if(this.isDisabledDate(date,this.lang)){_b14="dijitCalendarDisabledDate "+_b14;_b12.setAttribute("aria-disabled","true");}else{_b14="dijitCalendarEnabledDate "+_b14;_b12.removeAttribute("aria-disabled");_b12.setAttribute("aria-selected","false");}var _b15=this.getClassForDate(date,this.lang);if(_b15){_b14=_b15+" "+_b14;}_b12.className=_b14+"Month dijitCalendarDateTemplate";var _b16=date.valueOf();this._date2cell[_b16]=_b12;_b12.dijitDateValue=_b16;this._setText(this.dateLabels[idx],date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate());},this);},_populateControls:function(){var _b17=new this.dateClassObj(this.currentFocus);_b17.setDate(1);this.monthWidget.set("month",_b17);var y=_b17.getFullYear()-1;var d=new this.dateClassObj();_afb.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(_b18){this.dateModule=_b18.datePackage?lang.getObject(_b18.datePackage,false):date;this.dateClassObj=this.dateModule.Date||Date;this.dateLocaleModule=_b18.datePackage?lang.getObject(_b18.datePackage+".locale",false):_afe;},_createMonthWidget:function(){return _b06._MonthWidget({id:this.id+"_mw",lang:this.lang,dateLocaleModule:this.dateLocaleModule},this.monthNode);},buildRendering:function(){var d=this.dowTemplateString,_b19=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang),_b1a=_afd.getFirstDayOfWeek(this.lang);this.dayCellsHtml=_b02.substitute([d,d,d,d,d,d,d].join(""),{d:""},function(){return _b19[_b1a++%7];});var r=_b02.substitute(this.weekTemplateString,{d:this.dateTemplateString});this.dateRowsHtml=[r,r,r,r,r,r].join("");this.dateCells=[];this.dateLabels=[];this.inherited(arguments);dom.setSelectable(this.domNode,false);var _b1b=new this.dateClassObj(this.currentFocus);this.monthWidget=this._createMonthWidget();this.set("currentFocus",_b1b,false);},postCreate:function(){this.inherited(arguments);this._connectControls();},_connectControls:function(){var _b1c=lang.hitch(this,function(_b1d,part,_b1e){this.connect(this[_b1d],"onclick",function(){this._setCurrentFocusAttr(this.dateModule.add(this.currentFocus,part,_b1e));});});_b1c("incrementMonth","month",1);_b1c("decrementMonth","month",-1);_b1c("nextYearLabelNode","year",1);_b1c("previousYearLabelNode","year",-1);},_setCurrentFocusAttr:function(date,_b1f){var _b20=this.currentFocus,_b21=this._getNodeByDate(_b20);date=this._patchDate(date);this._set("currentFocus",date);if(!this._date2cell||this.dateModule.difference(_b20,date,"month")!=0){this._populateGrid();this._populateControls();this._markSelectedDates([this.value]);}var _b22=this._getNodeByDate(date);_b22.setAttribute("tabIndex",this.tabIndex);if(this.focused||_b1f){_b22.focus();}if(_b21&&_b21!=_b22){if(has("webkit")){_b21.setAttribute("tabIndex","-1");}else{_b21.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onDayClick:function(evt){_b01.stop(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!_b00.contains(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_getNodeByDate:function(_b23){_b23=this._patchDate(_b23);return _b23&&this._date2cell?this._date2cell[_b23.valueOf()]:null;},_markSelectedDates:function(_b24){function mark(_b25,cell){_b00.toggle(cell,"dijitCalendarSelectedDate",_b25);cell.setAttribute("aria-selected",_b25?"true":"false");};_afb.forEach(this._selectedCells||[],lang.partial(mark,false));this._selectedCells=_afb.filter(_afb.map(_b24,this._getNodeByDate,this),function(n){return n;});_afb.forEach(this._selectedCells,lang.partial(mark,true));},onChange:function(){},isDisabledDate:function(){},getClassForDate:function(){}});_b06._MonthWidget=_afc("dijit.CalendarLite._MonthWidget",_b03,{_setMonthAttr:function(_b26){var _b27=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_b26),_b28=(has("ie")==6?"":"<div class='dijitSpacer'>"+_afb.map(_b27,function(s){return "<div>"+s+"</div>";}).join("")+"</div>");this.domNode.innerHTML=_b28+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_b27[_b26.getMonth()]+"</div>";}});return _b06;});},"dijit/_WidgetBase":function(){define("dijit/_WidgetBase",["require","dojo/_base/array","dojo/aspect","dojo/_base/config","dojo/_base/connect","dojo/_base/declare","dojo/dom","dojo/dom-attr","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/has","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/ready","dojo/Stateful","dojo/topic","dojo/_base/window","./Destroyable","./registry"],function(_b29,_b2a,_b2b,_b2c,_b2d,_b2e,dom,_b2f,_b30,_b31,_b32,_b33,has,_b34,lang,on,_b35,_b36,_b37,win,_b38,_b39){has.add("dijit-legacy-requires",!_b34.isAsync);if(has("dijit-legacy-requires")){_b35(0,function(){var _b3a=["dijit/_base/manager"];_b29(_b3a);});}var _b3b={};function _b3c(obj){var ret={};for(var attr in obj){ret[attr.toLowerCase()]=true;}return ret;};function _b3d(attr){return function(val){_b2f[val?"set":"remove"](this.domNode,attr,val);this._set(attr,val);};};return _b2e("dijit._WidgetBase",[_b36,_b38],{id:"",_setIdAttr:"domNode",lang:"",_setLangAttr:_b3d("lang"),dir:"",_setDirAttr:_b3d("dir"),textDir:"","class":"",_setClassAttr:{node:"domNode",type:"class"},style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,ownerDocument:null,_setOwnerDocumentAttr:function(val){this._set("ownerDocument",val);},attributeMap:{},_blankGif:_b2c.blankGif||_b29.toUrl("dojo/resources/blank.gif"),postscript:function(_b3e,_b3f){this.create(_b3e,_b3f);},create:function(_b40,_b41){this.srcNodeRef=dom.byId(_b41);this._connects=[];this._supportingWidgets=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_b40){this.params=_b40;lang.mixin(this,_b40);}this.postMixInProperties();if(!this.id){this.id=_b39.getUniqueId(this.declaredClass.replace(/\./g,"_"));if(this.params){delete this.params.id;}}this.ownerDocument=this.ownerDocument||(this.srcNodeRef?this.srcNodeRef.ownerDocument:win.doc);this.ownerDocumentBody=win.body(this.ownerDocument);_b39.add(this);this.buildRendering();var _b42;if(this.domNode){this._applyAttributes();var _b43=this.srcNodeRef;if(_b43&&_b43.parentNode&&this.domNode!==_b43){_b43.parentNode.replaceChild(this.domNode,_b43);_b42=true;}this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(_b42){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var ctor=this.constructor,list=ctor._setterAttrs;if(!list){list=(ctor._setterAttrs=[]);for(var attr in this.attributeMap){list.push(attr);}var _b44=ctor.prototype;for(var _b45 in _b44){if(_b45 in this.attributeMap){continue;}var _b46="_set"+_b45.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();})+"Attr";if(_b46 in _b44){list.push(_b45);}}}var _b47={};for(var key in this.params||{}){_b47[key]=this[key];}_b2a.forEach(list,function(attr){if(attr in _b47){}else{if(this[attr]){this.set(attr,this[attr]);}}},this);for(key in _b47){this.set(key,_b47[key]);}},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||this.ownerDocument.createElement("div");}if(this.baseClass){var _b48=this.baseClass.split(" ");if(!this.isLeftToRight()){_b48=_b48.concat(_b2a.map(_b48,function(name){return name+"Rtl";}));}_b30.add(this.domNode,_b48);}},postCreate:function(){},startup:function(){if(this._started){return;}this._started=true;_b2a.forEach(this.getChildren(),function(obj){if(!obj._started&&!obj._destroyed&&lang.isFunction(obj.startup)){obj.startup();obj._started=true;}});},destroyRecursive:function(_b49){this._beingDestroyed=true;this.destroyDescendants(_b49);this.destroy(_b49);},destroy:function(_b4a){this._beingDestroyed=true;this.uninitialize();function _b4b(w){if(w.destroyRecursive){w.destroyRecursive(_b4a);}else{if(w.destroy){w.destroy(_b4a);}}};_b2a.forEach(this._connects,lang.hitch(this,"disconnect"));_b2a.forEach(this._supportingWidgets,_b4b);if(this.domNode){_b2a.forEach(_b39.findWidgets(this.domNode,this.containerNode),_b4b);}this.destroyRendering(_b4a);_b39.remove(this.id);this._destroyed=true;},destroyRendering:function(_b4c){if(this.bgIframe){this.bgIframe.destroy(_b4c);delete this.bgIframe;}if(this.domNode){if(_b4c){_b2f.remove(this.domNode,"widgetId");}else{_b31.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_b4c){_b31.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_b4d){_b2a.forEach(this.getChildren(),function(_b4e){if(_b4e.destroyRecursive){_b4e.destroyRecursive(_b4d);}});},uninitialize:function(){return false;},_setStyleAttr:function(_b4f){var _b50=this.domNode;if(lang.isObject(_b4f)){_b33.set(_b50,_b4f);}else{if(_b50.style.cssText){_b50.style.cssText+="; "+_b4f;}else{_b50.style.cssText=_b4f;}}this._set("style",_b4f);},_attrToDom:function(attr,_b51,_b52){_b52=arguments.length>=3?_b52:this.attributeMap[attr];_b2a.forEach(lang.isArray(_b52)?_b52:[_b52],function(_b53){var _b54=this[_b53.node||_b53||"domNode"];var type=_b53.type||"attribute";switch(type){case "attribute":if(lang.isFunction(_b51)){_b51=lang.hitch(this,_b51);}var _b55=_b53.attribute?_b53.attribute:(/^on[A-Z][a-zA-Z]*$/.test(attr)?attr.toLowerCase():attr);if(_b54.tagName){_b2f.set(_b54,_b55,_b51);}else{_b54.set(_b55,_b51);}break;case "innerText":_b54.innerHTML="";_b54.appendChild(this.ownerDocument.createTextNode(_b51));break;case "innerHTML":_b54.innerHTML=_b51;break;case "class":_b30.replace(_b54,_b51,this[attr]);break;}},this);},get:function(name){var _b56=this._getAttrNames(name);return this[_b56.g]?this[_b56.g]():this[name];},set:function(name,_b57){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _b58=this._getAttrNames(name),_b59=this[_b58.s];if(lang.isFunction(_b59)){var _b5a=_b59.apply(this,Array.prototype.slice.call(arguments,1));}else{var _b5b=this.focusNode&&!lang.isFunction(this.focusNode)?"focusNode":"domNode",_b5c,map,tag;tag=this[_b5b]&&this[_b5b].tagName;if(tag){_b5c=_b3b[tag]||(_b3b[tag]=_b3c(this[_b5b]));}map=name in this.attributeMap?this.attributeMap[name]:_b58.s in this?this[_b58.s]:((_b5c&&_b58.l in _b5c&&typeof _b57!="function")||/^aria-|^data-|^role$/.test(name))?_b5b:null;if(map!=null){this._attrToDom(name,_b57,map);}this._set(name,_b57);}return _b5a||this;},_attrPairNames:{},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.replace(/^[a-z]|-[a-zA-Z]/g,function(c){return c.charAt(c.length-1).toUpperCase();});return (apn[name]={n:name+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr",l:uc.toLowerCase()});},_set:function(name,_b5d){var _b5e=this[name];this[name]=_b5d;if(this._created&&_b5d!==_b5e){if(this._watchCallbacks){this._watchCallbacks(name,_b5e,_b5d);}this.emit("attrmodified-"+name,{detail:{prevValue:_b5e,newValue:_b5d}});}},emit:function(type,_b5f,_b60){_b5f=_b5f||{};if(_b5f.bubbles===undefined){_b5f.bubbles=true;}if(_b5f.cancelable===undefined){_b5f.cancelable=true;}if(!_b5f.detail){_b5f.detail={};}_b5f.detail.widget=this;var ret,_b61=this["on"+type];if(_b61){ret=_b61.apply(this,_b60?_b60:[_b5f]);}if(this._started&&!this._beingDestroyed){on.emit(this.domNode,type.toLowerCase(),_b5f);}return ret;},on:function(type,func){var _b62=this._onMap(type);if(_b62){return _b2b.after(this,_b62,func,true);}return this.own(on(this.domNode,type,func))[0];},_onMap:function(type){var ctor=this.constructor,map=ctor._onMap;if(!map){map=(ctor._onMap={});for(var attr in ctor.prototype){if(/^on/.test(attr)){map[attr.replace(/^on/,"").toLowerCase()]=attr;}}}return map[typeof type=="string"&&type.toLowerCase()];},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getChildren:function(){return this.containerNode?_b39.findWidgets(this.containerNode):[];},getParent:function(){return _b39.getEnclosingWidget(this.domNode.parentNode);},connect:function(obj,_b63,_b64){return this.own(_b2d.connect(obj,_b63,this,_b64))[0];},disconnect:function(_b65){_b65.remove();},subscribe:function(t,_b66){return this.own(_b37.subscribe(t,lang.hitch(this,_b66)))[0];},unsubscribe:function(_b67){_b67.remove();},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):_b32.isBodyLtr(this.ownerDocument);},isFocusable:function(){return this.focus&&(_b33.get(this.domNode,"display")!="none");},placeAt:function(_b68,_b69){var _b6a=!_b68.tagName&&_b39.byId(_b68);if(_b6a&&_b6a.addChild&&(!_b69||typeof _b69==="number")){_b6a.addChild(this,_b69);}else{var ref=_b6a?(_b6a.containerNode&&!/after|before|replace/.test(_b69||"")?_b6a.containerNode:_b6a.domNode):dom.byId(_b68,this.ownerDocument);_b31.place(this.domNode,ref,_b69);if(!this._started&&(this.getParent()||{})._started){this.startup();}}return this;},getTextDir:function(text,_b6b){return _b6b;},applyTextDir:function(){},defer:function(fcn,_b6c){var _b6d=setTimeout(lang.hitch(this,function(){_b6d=null;if(!this._destroyed){lang.hitch(this,fcn)();}}),_b6c||0);return {remove:function(){if(_b6d){clearTimeout(_b6d);_b6d=null;}return null;}};}});});},"*now":function(r){r(["dojo/i18n!*preload*esri/dijit/nls/AttributeInspector-all*[\"ar\",\"az\",\"ca\",\"cs\",\"da\",\"de-de\",\"el\",\"en-gb\",\"en-us\",\"es-es\",\"fi-fi\",\"fr-fr\",\"he-il\",\"hu\",\"it-it\",\"ja-jp\",\"ko-kr\",\"nl-nl\",\"nb\",\"pl\",\"pt-br\",\"pt-pt\",\"ro\",\"ru\",\"sk\",\"sl\",\"sv\",\"th\",\"tr\",\"zh-tw\",\"zh-cn\",\"ROOT\"]"]);},"*noref":1}});define("esri/dijit/AttributeInspector-all",["esri/layers/FeatureLayer","esri/dijit/AttributeInspector"],function(_b6e,_b6f){return {};});